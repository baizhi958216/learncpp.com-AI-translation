<div
  class="code-block code-block-1"
  style="margin: 8px 8px 8px 0; float: left"
></div>
<p>
  In lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/unsigned-integers-and-why-to-avoid-them/"
    >4.5 -- Unsigned integers, and why to avoid them</a
  >, we noted how we generally prefer to use signed values to hold quantities,
  because unsigned values can act in surprising ways. However, in lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/stdvector-and-the-unsigned-length-and-subscript-problem/"
    >16.3 -- std::vector and the unsigned length and subscript problem</a
  >, we discussed how <code>std::vector</code> (and other container classes)
  uses unsigned integral type <code>std::size_t</code> for length and indices.
</p>
<p>This can lead to problems such as this one:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-void">void</span> <span class="token function">printReverse</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-0-close">(</span><span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&amp;</span> arr<span class="token punctuation brace-round brace-close brace-level-1" id="pair-0-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-8-close">{</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-2-close">(</span>std<span class="token double-colon punctuation">::</span>size_t index<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-6-close">{</span> arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-1-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-1-open">)</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-6-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-2-open">)</span> <span class="token comment">// index is unsigned</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-7-close">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> arr<span class="token punctuation brace-square brace-open brace-level-3" id="pair-5-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-3" id="pair-5-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-7-open">}</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-8-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-3-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-3-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-10-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector arr<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-9-close">{</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-9-open">}</span><span class="token punctuation">;</span>

    <span class="token function">printReverse</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-4-close">(</span>arr<span class="token punctuation brace-round brace-close brace-level-2" id="pair-4-open">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-10-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>This code begins by printing the array in reverse:</p>
<pre>
9 1 2 8 3 7 6 4
</pre>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_2_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: visible;
      "
    >
      <iframe
        id="aswift_2"
        name="aswift_2"
        browsingtopics="true"
        style="
          left: 0;
          position: absolute;
          top: 0;
          border: 0;
          width: 1027px;
          height: 280px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="280"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3335521078&amp;adf=106957934&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751262489&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Farrays-loops-and-sign-challenge-solutions%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963090574&amp;bpp=1&amp;bdt=1746&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280&amp;nras=2&amp;correlator=2560688977886&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=996&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093234%2C95331832%2C95353387%2C95362656%2C95364946%2C95365226%2C95365234%2C95365461%2C95344790%2C95359266%2C95365118%2C95365797&amp;oid=2&amp;pvsid=3197780303206891&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=3&amp;uci=a!3&amp;fsb=1&amp;dtd=18"
        data-google-container-id="a!3"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CPbZ-YzrrI4DFbtFwgUdKtM7gQ"
      ></iframe></div
  ></ins>
</div>
<p>
  And then exhibits undefined behavior. It might print garbage values, or crash
  the application.
</p>
<p>
  There are two problems here. First, our loop executes as long as
  <code>index &gt;= 0</code> (or in other words, as long as
  <code>index</code> is positive), which is always true when
  <code>index</code> is unsigned. Therefore, the loop never terminates.
</p>
<div class="code-block code-block-2" style="margin: 8px 0; clear: both"></div>

<p>
  Second, when we decrement <code>index</code> when it has value <code>0</code>,
  it will wrap around to a large positive value, which we then use to index the
  array on the next iteration. This is an out-of-bounds index, and will cause
  undefined behavior. We run into the same problem if our vector is empty.
</p>
<p>
  And while there are plenty of ways to work around these specific issues, these
  kinds of issues are magnets for bugs.
</p>
<p>
  Using a signed type for a loop variable more easily avoids such problems, but
  has its own challenges. Here’s a version of the above problem that uses a
  signed index:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-void">void</span> <span class="token function">printReverse</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-11-close">(</span><span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&amp;</span> arr<span class="token punctuation brace-round brace-close brace-level-1" id="pair-11-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-21-close">{</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-14-close">(</span><span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-19-close">{</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-13-close">(</span>arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-5" id="pair-12-close">(</span><span class="token punctuation brace-round brace-close brace-level-5" id="pair-12-open">)</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-13-open">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation brace-curly brace-close brace-level-3" id="pair-19-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-14-open">)</span> <span class="token comment">// index is signed</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-20-close">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> arr<span class="token punctuation brace-square brace-open brace-level-3" id="pair-18-close">[</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>size_t<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-15-close">(</span>index<span class="token punctuation brace-round brace-close brace-level-4" id="pair-15-open">)</span><span class="token punctuation brace-square brace-close brace-level-3" id="pair-18-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-20-open">}</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-21-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-16-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-16-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-23-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector arr<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-22-close">{</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-22-open">}</span><span class="token punctuation">;</span>

    <span class="token function">printReverse</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-17-close">(</span>arr<span class="token punctuation brace-round brace-close brace-level-2" id="pair-17-open">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-23-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_3_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_3"
        name="aswift_3"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3335521078&amp;adf=2877400571&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751262489&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Farrays-loops-and-sign-challenge-solutions%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963090574&amp;bpp=1&amp;bdt=1746&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C1027x280&amp;nras=3&amp;correlator=2560688977886&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=1891&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093234%2C95331832%2C95353387%2C95362656%2C95364946%2C95365226%2C95365234%2C95365461%2C95344790%2C95359266%2C95365118%2C95365797&amp;oid=2&amp;pvsid=3197780303206891&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=4&amp;uci=a!4&amp;btvi=1&amp;fsb=1&amp;dtd=19"
        data-google-container-id="a!4"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CO3p-YzrrI4DFTaQ6QUdfU0AaA"
      ></iframe></div
  ></ins>
</div>
<p>
  While this version functions as intended, the code is also a cluttered due to
  the addition two static casts.
  <code>arr[static_cast&lt;std::size_t&gt;(index)]</code> is particularly hard
  to read. In this case, we’ve improved safety at a significant cost to
  readability.
</p>
<p>Here’s another example of using a signed index:</p>
<div class="code-block code-block-3" style="margin: 8px 0; clear: both"></div>

<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token comment">// Function template to calculate the average value in a std::vector</span>
<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
T <span class="token function">calculateAverage</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-24-close">(</span><span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&amp;</span> arr<span class="token punctuation brace-round brace-close brace-level-1" id="pair-24-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-35-close">{</span>
    <span class="token keyword keyword-int">int</span> length<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-32-close">{</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-26-close">(</span>arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-25-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-25-open">)</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-26-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-32-open">}</span><span class="token punctuation">;</span>

    T average<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-33-close">{</span> <span class="token number">0</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-33-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-27-close">(</span><span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-34-close">{</span> <span class="token number">0</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-34-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> <span class="token operator">++</span>index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-27-open">)</span>
        average <span class="token operator">+=</span> arr<span class="token punctuation brace-square brace-open brace-level-2" id="pair-31-close">[</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>size_t<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-28-close">(</span>index<span class="token punctuation brace-round brace-close brace-level-3" id="pair-28-open">)</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-31-open">]</span><span class="token punctuation">;</span>
    average <span class="token operator">/=</span> length<span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> average<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-35-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-29-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-29-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-37-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector testScore1 <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-36-close">{</span> <span class="token number">84</span><span class="token punctuation">,</span> <span class="token number">92</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">56</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-36-open">}</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"The class 1 average is: "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">calculateAverage</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-30-close">(</span>testScore1<span class="token punctuation brace-round brace-close brace-level-2" id="pair-30-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-37-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_4_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_4"
        name="aswift_4"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3335521078&amp;adf=2622524585&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751262489&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Farrays-loops-and-sign-challenge-solutions%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963090574&amp;bpp=1&amp;bdt=1746&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C1027x280%2C1027x280&amp;nras=4&amp;correlator=2560688977886&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=2692&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093234%2C95331832%2C95353387%2C95362656%2C95364946%2C95365226%2C95365234%2C95365461%2C95344790%2C95359266%2C95365118%2C95365797&amp;oid=2&amp;pvsid=3197780303206891&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=5&amp;uci=a!5&amp;btvi=2&amp;fsb=1&amp;dtd=20"
        data-google-container-id="a!5"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CNOD-ozrrI4DFbqH6QUdjksTkQ"
      ></iframe></div
  ></ins>
</div>
<p>The cluttering of our code with static casts is pretty terrible.</p>
<p>So what should we do? This is an area where there is no ideal solution.</p>
<p>
  There are many viable options here, which we’ll present in order from what we
  believe is worst to best. You will likely encounter all of these in code
  written by others.
</p>
<div class="cpp-note cpp-lightgraybackground">
  <p class="cpp-note-title cpp-bottomline">Author’s note</p>
  <p>
    Although we’ll be discussing this in the context of
    <code>std::vector</code>, all of the standard library containers (e.g.
    <code>std::array</code>) work similarly and have the same challenges. The
    discussion that follows is applicable to any of them.
  </p>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Leave signed/unsigned conversion warnings off
</p>
<p>
  If you were wondering why signed/unsigned conversion warnings are often
  disabled by default, this topic is one of the key reasons. Every time we
  subscript a standard library container using a signed index, a sign conversion
  warning will be generated. This will quickly fill up your compilation log with
  spurious warnings, drowning out warnings that may actually be legitimate.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_5_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_5"
        name="aswift_5"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3335521078&amp;adf=2664369627&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751262489&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Farrays-loops-and-sign-challenge-solutions%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963090574&amp;bpp=1&amp;bdt=1746&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C1027x280%2C1027x280%2C1027x280&amp;nras=5&amp;correlator=2560688977886&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3319&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093234%2C95331832%2C95353387%2C95362656%2C95364946%2C95365226%2C95365234%2C95365461%2C95344790%2C95359266%2C95365118%2C95365797&amp;oid=2&amp;pvsid=3197780303206891&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=6&amp;uci=a!6&amp;btvi=3&amp;fsb=1&amp;dtd=21"
        data-google-container-id="a!6"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CNyZ-ozrrI4DFVOK6QUdP8M4hA"
      ></iframe></div
  ></ins>
</div>
<div class="code-block code-block-4" style="margin: 8px 0; clear: both"></div>

<p>
  So one way to avoid having to deal with lots of signed/unsigned conversion
  warnings is to simply leave those warnings turned off.
</p>
<p>
  This is the simplest solution, but not one we recommend, as this will also
  suppress generation of legitimate sign conversion warnings that may cause bugs
  if not addressed.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Using an unsigned loop variable
</p>
<p>
  Many developers believe that since the standard library array types were
  designed to use unsigned indices, then we should use unsigned indices! This is
  a completely reasonable position. We just need to be extra careful that we do
  not run into signed/unsigned mismatches when doing so. If possible, avoid
  using the index loop variable for anything but indexing.
</p>
<p>
  If we decide to use this approach, which unsigned type should we actually use?
</p>
<div class="code-block code-block-5" style="margin: 8px 0; clear: both"></div>

<p>
  In lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/stdvector-and-the-unsigned-length-and-subscript-problem/#size_type"
    >16.3 -- std::vector and the unsigned length and subscript problem</a
  >, we noted that the standard library container classes define nested typedef
  <code>size_type</code>, which is an unsigned integral type used for array
  lengths and indices. The <code>size()</code> member function returns
  <code>size_type</code>, and <code>operator[]</code> uses
  <code>size_type</code> as an index, so using <code>size_type</code> as the
  type of your index is technically the most consistent and safe unsigned type
  to use (as it will work in all cases, even in the extremely rare case where
  <code>size_type</code> is something other than <code>size_t</code>.). For
  example:
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_6_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_6"
        name="aswift_6"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3335521078&amp;adf=3471507276&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751262489&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Farrays-loops-and-sign-challenge-solutions%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963090574&amp;bpp=1&amp;bdt=1747&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C1027x280%2C1027x280%2C1027x280%2C1027x280&amp;nras=6&amp;correlator=2560688977886&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3957&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093234%2C95331832%2C95353387%2C95362656%2C95364946%2C95365226%2C95365234%2C95365461%2C95344790%2C95359266%2C95365118%2C95365797&amp;oid=2&amp;pvsid=3197780303206891&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;cms=2&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=7&amp;uci=a!7&amp;btvi=4&amp;fsb=1&amp;dtd=22"
        data-google-container-id="a!7"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CMqg-ozrrI4DFXeH6QUdz_kHhg"
      ></iframe></div
  ></ins>
</div>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-38-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-38-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-44-close">{</span>
	std<span class="token double-colon punctuation">::</span>vector arr <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-42-close">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-42-open">}</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-40-close">(</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>size_type index <span class="token punctuation brace-curly brace-open brace-level-3" id="pair-43-close">{</span> <span class="token number">0</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-43-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-39-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-39-open">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-40-open">)</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> arr<span class="token punctuation brace-square brace-open brace-level-2" id="pair-41-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-2" id="pair-41-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-44-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  However, using <code>size_type</code> has a major downside: because it is a
  nested type, to use it we have to explicitly prefix the name with the fully
  templated name of the container (meaning we have to type
  <code>std::vector&lt;int&gt;::size_type</code> rather than just
  <code>std::size_type</code>). This requires a lot of typing, is hard to read,
  and varies depending on the container and element type.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_7_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_7"
        name="aswift_7"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3335521078&amp;adf=971481047&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751262489&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Farrays-loops-and-sign-challenge-solutions%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963090576&amp;bpp=1&amp;bdt=1748&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C1027x280%2C1027x280%2C1027x280%2C1027x280%2C1027x280&amp;nras=7&amp;correlator=2560688977886&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3720&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093234%2C95331832%2C95353387%2C95362656%2C95364946%2C95365226%2C95365234%2C95365461%2C95344790%2C95359266%2C95365118%2C95365797&amp;oid=2&amp;pvsid=3197780303206891&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=8&amp;uci=a!8&amp;btvi=5&amp;fsb=1&amp;dtd=309"
        data-google-container-id="a!8"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CJDWi43rrI4DFeKI6QUdJcEblg"
      ></iframe></div
  ></ins>
</div>
<p>
  When used inside a function template, we can use <code>T</code> for the
  template arguments. But we also need to prefix the type with the
  <code>typename</code> keyword:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-void">void</span> <span class="token function">printArray</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-45-close">(</span><span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&amp;</span> arr<span class="token punctuation brace-round brace-close brace-level-1" id="pair-45-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-52-close">{</span>
	<span class="token comment">// typename keyword prefix required for dependent type</span>
	<span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-47-close">(</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">std</span><span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>size_type index <span class="token punctuation brace-curly brace-open brace-level-3" id="pair-51-close">{</span> <span class="token number">0</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-51-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-46-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-46-open">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-47-open">)</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> arr<span class="token punctuation brace-square brace-open brace-level-2" id="pair-50-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-2" id="pair-50-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-52-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-48-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-48-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-54-close">{</span>
	std<span class="token double-colon punctuation">::</span>vector arr <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-53-close">{</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-53-open">}</span><span class="token punctuation">;</span>

	<span class="token function">printArray</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-49-close">(</span>arr<span class="token punctuation brace-round brace-close brace-level-2" id="pair-49-open">)</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-54-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_8_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_8"
        name="aswift_8"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3335521078&amp;adf=476695051&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751262489&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Farrays-loops-and-sign-challenge-solutions%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963090578&amp;bpp=1&amp;bdt=1750&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C1027x280%2C1027x280%2C1027x280%2C1027x280%2C1027x280%2C1027x280%2C160x600%2C160x600&amp;nras=8&amp;correlator=2560688977886&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3825&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093234%2C95331832%2C95353387%2C95362656%2C95364946%2C95365226%2C95365234%2C95365461%2C95344790%2C95359266%2C95365118%2C95365797&amp;oid=2&amp;pvsid=3197780303206891&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=9&amp;uci=a!9&amp;btvi=6&amp;fsb=1&amp;dtd=770"
        data-google-container-id="a!9"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CKLzp43rrI4DFWCH6QUdtqw9hw"
      ></iframe></div
  ></ins>
</div>
<p>
  If you forget the <code>typename</code> keyword, your compiler will probably
  remind you to add it.
</p>
<div class="cpp-note cpp-lightgraybackground">
  <p class="cpp-note-title cpp-bottomline">For advanced readers</p>
  <p>
    Any name that depends on a type containing a template parameter is called a
    <strong>dependent name</strong>. Dependent names must be prefixed with the
    keyword <code>typename</code> in order to be used as a type.
  </p>
  <p>
    In the above example, <code>std::vector&lt;T&gt;</code> is a type with a
    template parameter, so nested type
    <code>std::vector&lt;T&gt;::size_type</code> is a dependent name, and must
    be prefixed with <code>typename</code> to be used as a type.
  </p>
</div>
<p>
  You may occasionally see the array type aliased to make the loop easier to
  read:
</p>
<div class="code-block code-block-6" style="margin: 8px 0; clear: both"></div>

<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-using">using</span> arrayi <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-1" id="pair-56-close">(</span>arrayi<span class="token double-colon punctuation">::</span>size_type index <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-57-close">{</span> <span class="token number">0</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-57-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-55-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-55-open">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>index<span class="token punctuation brace-round brace-close brace-level-1" id="pair-56-open">)</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_9_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<p>
  A more general solution is to have the compiler fetch the type of the array
  type object for us, so that we don’t have to explicitly specify the container
  type or template arguments. To do so, we can use the
  <strong>decltype</strong> keyword, which returns the type of its parameter.
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token comment">// arr is some non-reference type</span>
<span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-1" id="pair-60-close">(</span><span class="token keyword keyword-decltype">decltype</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-58-close">(</span>arr<span class="token punctuation brace-round brace-close brace-level-2" id="pair-58-open">)</span><span class="token double-colon punctuation">::</span>size_type index <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-61-close">{</span> <span class="token number">0</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-61-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-59-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-59-open">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>index<span class="token punctuation brace-round brace-close brace-level-1" id="pair-60-open">)</span> <span class="token comment">// decltype(arr) resolves to std::vector&lt;int&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  However, if <code>arr</code> is a reference type (e.g. an array passed by
  reference), the above doesn’t work. We need to first remove the reference from
  <code>arr</code>:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-void">void</span> <span class="token function">printArray</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-62-close">(</span><span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&amp;</span> arr<span class="token punctuation brace-round brace-close brace-level-1" id="pair-62-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-68-close">{</span>
	<span class="token comment">// arr can be a reference or non-reference type</span>
	<span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-65-close">(</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">std</span><span class="token double-colon punctuation">::</span>remove_reference_t<span class="token operator">&lt;</span><span class="token keyword keyword-decltype">decltype</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-63-close">(</span>arr<span class="token punctuation brace-round brace-close brace-level-3" id="pair-63-open">)</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>size_type index <span class="token punctuation brace-curly brace-open brace-level-3" id="pair-67-close">{</span> <span class="token number">0</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-67-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-64-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-64-open">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-65-open">)</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> arr<span class="token punctuation brace-square brace-open brace-level-2" id="pair-66-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-2" id="pair-66-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-68-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_10_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<p>Unfortunately, this is no longer very concise or easy to remember.</p>
<p>
  Because <code>size_type</code> is almost always a typedef for
  <code>size_t</code>, many programmers just skip using
  <code>size_type</code> altogether and use the easier to remember and type
  <code>std::size_t</code> directly:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-1" id="pair-70-close">(</span>std<span class="token double-colon punctuation">::</span>size_t index <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-71-close">{</span> <span class="token number">0</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-71-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-69-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-69-open">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>index<span class="token punctuation brace-round brace-close brace-level-1" id="pair-70-open">)</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Unless you’re using custom allocators (and you probably aren’t), we believe
  this is a reasonable approach.
</p>
<div class="code-block code-block-7" style="margin: 8px 0; clear: both"></div>

<p class="cpp-section cpp-topline" style="clear: both">
  Using a signed loop variable
</p>
<p>
  Although it makes working with the standard library container types a bit more
  difficult, using a signed loop variable is consistent with the best practices
  employed in the rest of our code (to favor signed values for quantities). And
  the more we can consistently apply our best practices, the fewer errors we
  will have overall.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_11_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<p>
  If we are going to use signed loop variables, there are three issues we need
  to address:
</p>
<ul>
  <li>What signed type should we use?</li>
  <li>Getting the length of the array as a signed value</li>
  <li>Converting the signed loop variable to an unsigned index</li>
</ul>
<p class="cpp-section cpp-topline" style="clear: both">
  What signed type should we use?
</p>
<p>There are three (sometimes four) good options here.</p>
<div class="code-block code-block-8" style="margin: 8px 0; clear: both"></div>

<ol start="1">
  <li>
    Unless you are working with a very large array, using
    <code>int</code> should be fine (particularly on architectures where int is
    4 bytes). <code>int</code> is the default signed integral type we use for
    everything when we don’t really care about the type otherwise, and there’s
    little reason to do otherwise here.
  </li>
  <li>
    If you are dealing with very large arrays, or if you want to be a bit more
    defensive, you can use the strangely named <code>std::ptrdiff_t</code>. This
    typedef is often used as the signed counterpart to <code>std::size_t</code>.
  </li>
  <li>
    Because <code>std::ptrdiff_t</code> has a weird name, another good approach
    is to define your own type alias for indices:
  </li>
</ol>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-using">using</span> Index <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span>ptrdiff_t<span class="token punctuation">;</span>

<span class="token comment">// Sample loop using index</span>
<span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-1" id="pair-74-close">(</span>Index index<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-75-close">{</span> <span class="token number">0</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-75-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Index<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-73-close">(</span>arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-72-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-72-open">)</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-73-open">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>index<span class="token punctuation brace-round brace-close brace-level-1" id="pair-74-open">)</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>We’ll show a full example of this in the next section.</p>
<p>
  Defining your own type alias also has a potential future benefit: if the C++
  standard library ever releases a type designed to be used as a signed index,
  it will be easy to either modify <code>Index</code> to alias that type, or to
  find/replace <code>Index</code> with whatever that type is named.
</p>
<ol start="4">
  <li>
    In cases where you can derive the type of your loop variable from the
    initializer, you can use <code>auto</code> to have the compiler deduce the
    type:
  </li>
</ol>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-1" id="pair-78-close">(</span><span class="token keyword keyword-auto">auto</span> index<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-79-close">{</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>ptrdiff_t<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-77-close">(</span>arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-76-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-76-open">)</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-77-open">)</span><span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-79-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>index<span class="token punctuation brace-round brace-close brace-level-1" id="pair-78-open">)</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In C++23, the <code>Z</code> suffix can be used to define a literal of the
  type that is the signed counterpart to <code>std::size_t</code> (probably
  <code>std::ptrdiff_t</code>):
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-1" id="pair-82-close">(</span><span class="token keyword keyword-auto">auto</span> index<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-83-close">{</span> <span class="token number">0</span>Z <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-83-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>ptrdiff_t<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-81-close">(</span>arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-80-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-80-open">)</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-81-open">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>index<span class="token punctuation brace-round brace-close brace-level-1" id="pair-82-open">)</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Getting the length of an array as a signed value
</p>
<ol start="1">
  <li>
    Pre-C++20, the best option is to <code>static_cast</code> the return value
    of the <code>size()</code> member function or <code>std::size()</code> to a
    signed type:
  </li>
</ol>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-using">using</span> Index <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span>ptrdiff_t<span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-84-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-84-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-92-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector arr<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-90-close">{</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-90-open">}</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-87-close">(</span><span class="token keyword keyword-auto">auto</span> index<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-91-close">{</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Index<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-86-close">(</span>arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-5" id="pair-85-close">(</span><span class="token punctuation brace-round brace-close brace-level-5" id="pair-85-open">)</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-86-open">)</span><span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-91-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-87-open">)</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> arr<span class="token punctuation brace-square brace-open brace-level-2" id="pair-89-close">[</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>size_t<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-88-close">(</span>index<span class="token punctuation brace-round brace-close brace-level-3" id="pair-88-open">)</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-89-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-92-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  That way, the unsigned value returned by <code>arr.size()</code> will be
  converted to a signed type, so our comparison operator will have two signed
  operands. And because signed indices won’t overflow when they go negative, we
  don’t have the wrap-around problem we ran into when using unsigned indices.
</p>
<p>
  The downside of this approach is that it clutters up our loop, making it
  harder to read. We can address this by moving the length out of the loop:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-using">using</span> Index <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span>ptrdiff_t<span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-93-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-93-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-102-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector arr<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-99-close">{</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-99-open">}</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-auto">auto</span> length<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-100-close">{</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Index<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-95-close">(</span>arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-94-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-94-open">)</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-95-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-100-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-96-close">(</span><span class="token keyword keyword-auto">auto</span> index<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-101-close">{</span> length<span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-101-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-96-open">)</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> arr<span class="token punctuation brace-square brace-open brace-level-2" id="pair-98-close">[</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>size_t<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-97-close">(</span>index<span class="token punctuation brace-round brace-close brace-level-3" id="pair-97-open">)</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-98-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-102-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<ol start="2">
  <li>In C++20, use <code>std::ssize()</code>:</li>
</ol>
<p>
  If you want more evidence that the designers of C++ now believe that signed
  indices are the way to go, consider the introduction of
  <code>std::ssize()</code> in C++20. This function returns the size of an array
  type as a signed type (likely <code>ptrdiff_t</code>).
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-103-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-103-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-110-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector arr<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-108-close">{</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-108-open">}</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-105-close">(</span><span class="token keyword keyword-auto">auto</span> index<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-109-close">{</span> std<span class="token double-colon punctuation">::</span><span class="token function">ssize</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-104-close">(</span>arr<span class="token punctuation brace-round brace-close brace-level-4" id="pair-104-open">)</span><span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-109-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-105-open">)</span> <span class="token comment">// std::ssize introduced in C++20</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> arr<span class="token punctuation brace-square brace-open brace-level-2" id="pair-107-close">[</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>size_t<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-106-close">(</span>index<span class="token punctuation brace-round brace-close brace-level-3" id="pair-106-open">)</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-107-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-110-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Converting the signed loop variable to an unsigned index
</p>
<p>
  Once we have a signed loop variable, we’re going to run into implicit sign
  conversion warnings whenever we try to use that signed loop variable as an
  index. So we need some way to convert our signed loop variable to an unsigned
  value wherever we intend to use it as an index.
</p>
<ol start="1">
  <li>
    The obvious option is to static cast our signed loop variable into an
    unsigned index. We show this in the prior example. Unfortunately, we need to
    do this everywhere we subscript the array, and it makes our array indices
    hard to read.
  </li>
  <li>Use a conversion function with a short name:</li>
</ol>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;type_traits&gt;</span> <span class="token comment">// for std::is_integral and std::is_enum</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-using">using</span> Index <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span>ptrdiff_t<span class="token punctuation">;</span>

<span class="token comment">// Helper function to convert `value` into an object of type std::size_t</span>
<span class="token comment">// UZ is the suffix for literals of type std::size_t.</span>
<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-constexpr">constexpr</span> std<span class="token double-colon punctuation">::</span>size_t <span class="token function">toUZ</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-111-close">(</span>T value<span class="token punctuation brace-round brace-close brace-level-1" id="pair-111-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-122-close">{</span>
    <span class="token comment">// make sure T is an integral type</span>
    <span class="token keyword keyword-static_assert">static_assert</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-114-close">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">is_integral</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-112-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-112-open">)</span> <span class="token operator">||</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">is_enum</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-113-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-113-open">)</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-114-open">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>size_t<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-115-close">(</span>value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-115-open">)</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-122-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-116-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-116-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-126-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector arr<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-123-close">{</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-123-open">}</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-auto">auto</span> length <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-124-close">{</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Index<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-118-close">(</span>arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-117-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-117-open">)</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-118-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-124-open">}</span><span class="token punctuation">;</span>  <span class="token comment">// in C++20, prefer std::ssize()</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-119-close">(</span><span class="token keyword keyword-auto">auto</span> index<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-125-close">{</span> length<span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-125-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-119-open">)</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> arr<span class="token punctuation brace-square brace-open brace-level-2" id="pair-121-close">[</span><span class="token function">toUZ</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-120-close">(</span>index<span class="token punctuation brace-round brace-close brace-level-3" id="pair-120-open">)</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-121-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span> <span class="token comment">// use toUZ() to avoid sign conversion warning</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-126-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In the above example, we’ve created a function named <code>toUZ()</code> that
  is designed to convert integral values to values of type
  <code>std::size_t</code>. This allows us to index our array as
  <code>arr[toUZ(index)]</code>, which is pretty readable.
</p>
<ol start="3">
  <li>Use a custom view</li>
</ol>
<p>
  In prior lessons, we discussed how <code>std::string</code> owns a string,
  whereas <code>std::string_view</code> is a view into a string that exists
  elsewhere. One of the neat things about <code>std::string_view</code> is how
  it can view different types of strings (C-style string literals,
  <code>std::string</code>, and other <code>std::string_view</code>) but keeps a
  consistent interface for us to use.
</p>
<p>
  While we can’t modify the standard library containers to accept a signed
  integral index, we can create our own custom view class to “view” a standard
  library container class. And in doing so, we can define our own interface to
  work however we want.
</p>
<p>
  In the following example, we define a custom view class that can view any
  standard library container that supports indexing. Our interface will do two
  things:
</p>
<ul>
  <li>
    Allow us to access elements using <code>operator[]</code> with a signed
    integral type.
  </li>
  <li>
    Get the length of the container as a signed integral type (since
    <code>std::ssize()</code> is only available on C++20).
  </li>
</ul>
<p>
  This uses operator overloading (which we briefly introduced in lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/introduction-to-overloading-the-i-o-operators/"
    >13.5 -- Introduction to overloading the I/O operators</a
  >) to implement <code>operator[]</code>. You don’t need to know how
  <code>SignedArrayView</code> is implemented in order to use it.
</p>
<p>SignedArrayView.h:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">SIGNED_ARRAY_VIEW_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SIGNED_ARRAY_VIEW_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstddef&gt;</span> <span class="token comment">// for std::size_t and std::ptrdiff_t</span></span>

<span class="token comment">// SignedArrayView provides a view into a container that supports indexing</span>
<span class="token comment">// allowing us to work with these types using signed indices</span>
<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">SignedArrayView</span> <span class="token comment">// requires C++17</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-144-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    T<span class="token operator">&amp;</span> m_array<span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-using">using</span> Index <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span>ptrdiff_t<span class="token punctuation">;</span>

    <span class="token function">SignedArrayView</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-127-close">(</span>T<span class="token operator">&amp;</span> array<span class="token punctuation brace-round brace-close brace-level-2" id="pair-127-open">)</span>
        <span class="token operator">:</span> m_array<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-139-close">{</span> array <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-139-open">}</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-140-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-140-open">}</span>

    <span class="token comment">// Overload operator[] to take a signed index</span>
    <span class="token keyword keyword-constexpr">constexpr</span> <span class="token keyword keyword-auto">auto</span><span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-135-close">[</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-135-open">]</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-128-close">(</span>Index index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-128-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-141-close">{</span> <span class="token keyword keyword-return">return</span> m_array<span class="token punctuation brace-square brace-open brace-level-3" id="pair-136-close">[</span><span class="token keyword keyword-static_cast">static_cast</span><span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token double-colon punctuation">::</span>size_type<span class="token operator">&gt;</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-129-close">(</span>index<span class="token punctuation brace-round brace-close brace-level-4" id="pair-129-open">)</span><span class="token punctuation brace-square brace-close brace-level-3" id="pair-136-open">]</span><span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-141-open">}</span>
    <span class="token keyword keyword-constexpr">constexpr</span> <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-auto">auto</span><span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-137-close">[</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-137-open">]</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-130-close">(</span>Index index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-130-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-142-close">{</span> <span class="token keyword keyword-return">return</span> m_array<span class="token punctuation brace-square brace-open brace-level-3" id="pair-138-close">[</span><span class="token keyword keyword-static_cast">static_cast</span><span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token double-colon punctuation">::</span>size_type<span class="token operator">&gt;</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-131-close">(</span>index<span class="token punctuation brace-round brace-close brace-level-4" id="pair-131-open">)</span><span class="token punctuation brace-square brace-close brace-level-3" id="pair-138-open">]</span><span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-142-open">}</span>
    <span class="token keyword keyword-constexpr">constexpr</span> <span class="token keyword keyword-auto">auto</span> <span class="token function">ssize</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-132-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-132-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-143-close">{</span> <span class="token keyword keyword-return">return</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Index<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-134-close">(</span>m_array<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-133-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-133-open">)</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-134-open">)</span><span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-143-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-144-open">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>main.cpp:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"SignedArrayView.h"</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-145-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-145-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-152-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector arr<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-149-close">{</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-149-open">}</span><span class="token punctuation">;</span>
    SignedArrayView sarr<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-150-close">{</span> arr <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-150-open">}</span><span class="token punctuation">;</span> <span class="token comment">// Create a signed view of our std::vector</span>

    <span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-147-close">(</span><span class="token keyword keyword-auto">auto</span> index<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-151-close">{</span> sarr<span class="token punctuation">.</span><span class="token function">ssize</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-146-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-146-open">)</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-151-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-147-open">)</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> sarr<span class="token punctuation brace-square brace-open brace-level-2" id="pair-148-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-2" id="pair-148-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span> <span class="token comment">// index using a signed type</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-152-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Index the underlying C-style array instead
</p>
<p>
  In lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/stdvector-and-the-unsigned-length-and-subscript-problem/"
    >16.3 -- std::vector and the unsigned length and subscript problem</a
  >, we noted that instead of indexing the standard library container, we can
  instead call the <code>data()</code> member function and index that instead.
  Since <code>data()</code> returns the array data as a C-style array, and
  C-style arrays allow indexing with both signed and unsigned values, this
  avoids sign conversion issues.
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-153-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-153-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-162-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector arr<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-159-close">{</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-159-open">}</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-auto">auto</span> length <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-160-close">{</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Index<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-155-close">(</span>arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-154-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-154-open">)</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-155-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-160-open">}</span><span class="token punctuation">;</span>  <span class="token comment">// in C++20, prefer std::ssize()</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-156-close">(</span><span class="token keyword keyword-auto">auto</span> index<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-161-close">{</span> length <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-161-open">}</span><span class="token punctuation">;</span> index <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-156-open">)</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> arr<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-157-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-157-open">)</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-158-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-2" id="pair-158-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span>       <span class="token comment">// use data() to avoid sign conversion warning</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-162-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>We believe that this method is the best of the indexing options:</p>
<ul>
  <li>We can use signed loop variables and indices.</li>
  <li>We don’t have to define any custom types or type aliases.</li>
  <li>The hit to readability from using <code>data()</code> isn’t very big.</li>
  <li>There should be no performance hit in optimized code.</li>
</ul>
<p class="cpp-section cpp-topline" style="clear: both">
  The only sane choice: avoid indexing altogether!
</p>
<p>
  All of the options presented above have their own downsides, so it’s hard to
  recommend one approach over the other. However, there is a choice that is far
  more sane than the others: avoid indexing with integral values altogether.
</p>
<p>
  C++ provides several other methods for traversing through arrays that do not
  use indices at all. And if we don’t have indices, then we don’t run into all
  of these signed/unsigned conversion issues.
</p>
<p>
  Two common methods for array traversal without indices include range-based for
  loops, and iterators.
</p>
<div class="cpp-note cpp-lightgraybackground">
  <p class="cpp-note-title cpp-bottomline">Related content</p>
  <p>
    We cover ranged-for loops in the next lesson (<a
      href="https://www.learncpp.com/cpp-tutorial/range-based-for-loops-for-each/"
      >16.8 -- Range-based for loops (for-each)</a
    >).<br />
    We cover iterators in upcoming lesson
    <a href="https://www.learncpp.com/cpp-tutorial/introduction-to-iterators/"
      >18.2 -- Introduction to iterators</a
    >.
  </p>
</div>
<p>
  If you’re only using the index variable to traverse the array, then prefer a
  method that does not use indices.
</p>
<div class="cpp-note cpp-lightgreenbackground">
  <p class="cpp-note-title cpp-bottomline">Best practice</p>
  <p>Avoid array indexing with integral values whenever possible.</p>
</div>
<div class="prevnext">
  <div class="prevnext-inline">
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/range-based-for-loops-for-each/"
    >
      <div class="nav-button nav-button-next">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-right" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Next lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">16.8</span>Range-based for
            loops (for-each)
          </div>
        </div>
      </div></a
    >
    <a class="nav-link" href="/">
      <div class="nav-button nav-button-index">
        <div class="nav-button-icon">
          <i class="fa fa-home" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Back to table of contents</div>
        </div>
      </div></a
    >
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/arrays-and-loops/"
    >
      <div class="nav-button nav-button-prev">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-left" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Previous lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">16.6</span>Arrays and loops
          </div>
        </div>
      </div></a
    >
  </div>
</div>
<div class="code-block code-block-10" style="margin: 8px 0; clear: both"></div>
