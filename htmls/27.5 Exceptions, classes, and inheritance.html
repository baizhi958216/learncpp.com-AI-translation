<div
  class="code-block code-block-1"
  style="margin: 8px 8px 8px 0; float: left"
></div>
<p><strong>Exceptions and member functions</strong></p>
<p>
  Up to this point in the tutorial, you’ve only seen exceptions used in
  non-member functions. However, exceptions are equally useful in member
  functions, and even more so in overloaded operators. Consider the following
  overloaded [] operator as part of a simple integer array class:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> IntArray<span class="token double-colon punctuation">::</span><span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-1" id="pair-1-close">[</span><span class="token punctuation brace-square brace-close brace-level-1" id="pair-1-open">]</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-0-close">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-round brace-close brace-level-1" id="pair-0-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-3-close">{</span>
    <span class="token keyword keyword-return">return</span> m_data<span class="token punctuation brace-square brace-open brace-level-2" id="pair-2-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-2" id="pair-2-open">]</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-3-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Although this function will work great as long as index is a valid array
  index, this function is sorely lacking in some good error checking. We could
  add an assert statement to ensure the index is valid:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> IntArray<span class="token double-colon punctuation">::</span><span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-1" id="pair-7-close">[</span><span class="token punctuation brace-square brace-close brace-level-1" id="pair-7-open">]</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-4-close">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-round brace-close brace-level-1" id="pair-4-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-9-close">{</span>
    <span class="token function">assert</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-6-close">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">&lt;</span> <span class="token function">getLength</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-5-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-5-open">)</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-6-open">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> m_data<span class="token punctuation brace-square brace-open brace-level-2" id="pair-8-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-2" id="pair-8-open">]</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-9-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Now if the user passes in an invalid index, the program will cause an
  assertion error. Unfortunately, because overloaded operators have specific
  requirements as to the number and type of parameter(s) they can take and
  return, there is no flexibility for passing back error codes or Boolean values
  to the caller to handle. However, since exceptions do not change the signature
  of a function, they can be put to great use here. Here’s an example:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> IntArray<span class="token double-colon punctuation">::</span><span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-1" id="pair-13-close">[</span><span class="token punctuation brace-square brace-close brace-level-1" id="pair-13-open">]</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-10-close">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-round brace-close brace-level-1" id="pair-10-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-15-close">{</span>
    <span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-12-close">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> index <span class="token operator">&gt;=</span> <span class="token function">getLength</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-11-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-11-open">)</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-12-open">)</span>
        <span class="token keyword keyword-throw">throw</span> index<span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> m_data<span class="token punctuation brace-square brace-open brace-level-2" id="pair-14-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-2" id="pair-14-open">]</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-15-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_5_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_5"
        name="aswift_5"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3129705843&amp;adf=2877306689&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751116206&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fexceptions-classes-and-inheritance%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963741884&amp;bpp=2&amp;bdt=512&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600&amp;nras=2&amp;correlator=2167462802197&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=1028&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093272%2C95353386%2C95362656%2C95365225%2C95365234%2C95365109%2C95359265%2C95365121%2C95365797&amp;oid=2&amp;pvsid=3073934038349466&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=6&amp;uci=a!6&amp;btvi=1&amp;fsb=1&amp;dtd=19"
        data-google-container-id="a!6"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="COTWwsPtrI4DFcebuQUdfdg4QQ"
      ></iframe></div
  ></ins>
</div>
<p>
  Now, if the user passes in an invalid index, operator[] will throw an int
  exception.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  When constructors fail
</p>
<p>
  Constructors are another area of classes in which exceptions can be very
  useful. If a constructor must fail for some reason (e.g. the user passed in
  invalid input), simply throw an exception to indicate the object failed to
  create. In such a case, the object’s construction is aborted, and all class
  members (which have already been created and initialized prior to the body of
  the constructor executing) are destructed as per usual.
</p>
<div class="code-block code-block-2" style="margin: 8px 0; clear: both"></div>

<p>
  However, the class’s destructor is never called (because the object never
  finished construction). Because the destructor never executes, you can’t rely
  on said destructor to clean up any resources that have already been allocated.
</p>
<p>
  This leads to the question of what we should do if we’ve allocated resources
  in our constructor and then an exception occurs prior to the constructor
  finishing. How do we ensure the resources that we’ve already allocated get
  cleaned up properly? One way would be to wrap any code that can fail in a try
  block, use a corresponding catch block to catch the exception and do any
  necessary cleanup, and then rethrow the exception (a topic we’ll discuss in
  lesson
  <a href="https://www.learncpp.com/cpp-tutorial/rethrowing-exceptions/"
    >27.6 -- Rethrowing exceptions</a
  >). However, this adds a lot of clutter, and it’s easy to get wrong,
  particularly if your class allocates multiple resources.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_6_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_6"
        name="aswift_6"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3129705843&amp;adf=50729357&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751116206&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fexceptions-classes-and-inheritance%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963741884&amp;bpp=1&amp;bdt=512&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280&amp;nras=3&amp;correlator=2167462802197&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=1620&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093272%2C95353386%2C95362656%2C95365225%2C95365234%2C95365109%2C95359265%2C95365121%2C95365797&amp;oid=2&amp;pvsid=3073934038349466&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=7&amp;uci=a!7&amp;btvi=2&amp;fsb=1&amp;dtd=20"
        data-google-container-id="a!7"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CIbUwsPtrI4DFSTzTAId88IAHA"
      ></iframe></div
  ></ins>
</div>
<p>
  Fortunately, there is a better way. Taking advantage of the fact that class
  members are destructed even if the constructor fails, if you do the resource
  allocations inside the members of the class (rather than in the constructor
  itself), then those members can clean up after themselves when they are
  destructed.
</p>
<p>Here’s an example:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Member</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-25-close">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
	<span class="token function">Member</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-16-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-16-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-23-close">{</span>
		std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Member allocated some resources\n"</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-23-open">}</span>

	<span class="token operator">~</span><span class="token function">Member</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-17-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-17-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-24-close">{</span>
		std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Member cleaned up\n"</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-24-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-25-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">A</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-30-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
	<span class="token keyword keyword-int">int</span> m_x <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-26-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-26-open">}</span><span class="token punctuation">;</span>
	Member m_member<span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
	<span class="token function">A</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-18-close">(</span><span class="token keyword keyword-int">int</span> x<span class="token punctuation brace-round brace-close brace-level-2" id="pair-18-open">)</span> <span class="token operator">:</span> m_x<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-27-close">{</span>x<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-27-open">}</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-28-close">{</span>
		<span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-3" id="pair-19-close">(</span>x <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-19-open">)</span>
			<span class="token keyword keyword-throw">throw</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-28-open">}</span>

	<span class="token operator">~</span><span class="token function">A</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-20-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-20-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-29-close">{</span>
		std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"~A\n"</span><span class="token punctuation">;</span> <span class="token comment">// should not be called</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-29-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-30-open">}</span><span class="token punctuation">;</span>


<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-21-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-21-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-34-close">{</span>
	<span class="token keyword keyword-try">try</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-32-close">{</span>
		A a<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-31-close">{</span><span class="token number">0</span><span class="token punctuation brace-curly brace-close brace-level-3" id="pair-31-open">}</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-32-open">}</span>
	<span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-22-close">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-22-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-33-close">{</span>
		std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Oops\n"</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-33-open">}</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-34-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_7_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_7"
        name="aswift_7"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3129705843&amp;adf=4182866086&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751116206&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fexceptions-classes-and-inheritance%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963741884&amp;bpp=1&amp;bdt=512&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280&amp;nras=4&amp;correlator=2167462802197&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=2821&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093272%2C95353386%2C95362656%2C95365225%2C95365234%2C95365109%2C95359265%2C95365121%2C95365797&amp;oid=2&amp;pvsid=3073934038349466&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=8&amp;uci=a!8&amp;btvi=3&amp;fsb=1&amp;dtd=20"
        data-google-container-id="a!8"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CODowsPtrI4DFdLyTAIdXoEmEA"
      ></iframe></div
  ></ins>
</div>
<p>This prints:</p>
<pre>
Member allocated some resources
Member cleaned up
Oops
</pre>
<p>
  In the above program, when class A throws an exception, all of the members of
  A are destructed. m_member’s destructor is called, providing an opportunity to
  clean up any resources that it allocated.
</p>
<p>
  This is part of the reason that RAII (covered in lesson
  <a href="https://www.learncpp.com/cpp-tutorial/destructors/"
    >19.3 -- Destructors</a
  >) is advocated so highly -- even in exceptional circumstances, classes that
  implement RAII are able to clean up after themselves.
</p>
<div class="code-block code-block-3" style="margin: 8px 0; clear: both"></div>

<p>
  However, creating a custom class like Member to manage a resource allocation
  isn’t efficient. Fortunately, the C++ standard library comes with
  RAII-compliant classes to manage common resource types, such as files
  (std::fstream, covered in lesson
  <a href="https://www.learncpp.com/cpp-tutorial/basic-file-io/"
    >28.6 -- Basic file I/O</a
  >) and dynamic memory (std::unique_ptr and the other smart pointers, covered
  in
  <a
    href="https://www.learncpp.com/cpp-tutorial/introduction-to-smart-pointers-move-semantics/"
    >22.1 -- Introduction to smart pointers and move semantics</a
  >).
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_8_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_8"
        name="aswift_8"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3129705843&amp;adf=3568835341&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751116206&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fexceptions-classes-and-inheritance%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963741884&amp;bpp=1&amp;bdt=512&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280&amp;nras=5&amp;correlator=2167462802197&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3430&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093272%2C95353386%2C95362656%2C95365225%2C95365234%2C95365109%2C95359265%2C95365121%2C95365797&amp;oid=2&amp;pvsid=3073934038349466&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=9&amp;uci=a!9&amp;btvi=4&amp;fsb=1&amp;dtd=21"
        data-google-container-id="a!9"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="COaBw8PtrI4DFQIUewcdLQECKQ"
      ></iframe></div
  ></ins>
</div>
<p>For example, instead of this:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-class">class</span> <span class="token class-name">Foo</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span><span class="token operator">*</span> ptr<span class="token punctuation">;</span> <span class="token comment">// Foo will handle allocation/deallocation</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>Do this:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-class">class</span> <span class="token class-name">Foo</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    std<span class="token double-colon punctuation">::</span>unique_ptr<span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token operator">&gt;</span> ptr<span class="token punctuation">;</span> <span class="token comment">// std::unique_ptr will handle allocation/deallocation</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_9_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_9"
        name="aswift_9"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3129705843&amp;adf=1099788040&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751116206&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fexceptions-classes-and-inheritance%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963741884&amp;bpp=1&amp;bdt=512&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280%2C1027x280&amp;nras=6&amp;correlator=2167462802197&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3967&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093272%2C95353386%2C95362656%2C95365225%2C95365234%2C95365109%2C95359265%2C95365121%2C95365797&amp;oid=2&amp;pvsid=3073934038349466&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=10&amp;uci=a!a&amp;btvi=5&amp;fsb=1&amp;dtd=22"
        data-google-container-id="a!a"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CPOtw8PtrI4DFXXyTAIdSf40aQ"
      ></iframe></div
  ></ins>
</div>
<p>
  In the former case, if Foo’s constructor were to fail after ptr had allocated
  its dynamic memory, Foo would be responsible for cleanup, which can be
  challenging. In the latter case, if Foo’s constructor were to fail after ptr
  has allocated its dynamic memory, ptr’s destructor would execute and return
  that memory to the system. Foo doesn’t have to do any explicit cleanup when
  resource handling is delegated to RAII-compliant members!
</p>
<p class="cpp-section cpp-topline" style="clear: both">Exception classes</p>
<p>
  One of the major problems with using basic data types (such as int) as
  exception types is that they are inherently vague. An even bigger problem is
  disambiguation of what an exception means when there are multiple statements
  or function calls within a try block.
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token comment">// Using the IntArray overloaded operator[] above</span>

<span class="token keyword keyword-try">try</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-40-close">{</span>
    <span class="token keyword keyword-int">int</span><span class="token operator">*</span> value<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-39-close">{</span> <span class="token keyword keyword-new">new</span> <span class="token keyword keyword-int">int</span><span class="token punctuation brace-curly brace-open brace-level-3" id="pair-38-close">{</span> array<span class="token punctuation brace-square brace-open brace-level-4" id="pair-36-close">[</span>index1<span class="token punctuation brace-square brace-close brace-level-4" id="pair-36-open">]</span> <span class="token operator">+</span> array<span class="token punctuation brace-square brace-open brace-level-4" id="pair-37-close">[</span>index2<span class="token punctuation brace-square brace-close brace-level-4" id="pair-37-open">]</span><span class="token punctuation brace-curly brace-close brace-level-3" id="pair-38-open">}</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-39-open">}</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-40-open">}</span>
<span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-1" id="pair-35-close">(</span><span class="token keyword keyword-int">int</span> value<span class="token punctuation brace-round brace-close brace-level-1" id="pair-35-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-41-close">{</span>
    <span class="token comment">// What are we catching here?</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-41-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_10_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_10"
        name="aswift_10"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3129705843&amp;adf=4234258824&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751116206&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fexceptions-classes-and-inheritance%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963741886&amp;bpp=1&amp;bdt=514&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280%2C1027x280%2C1027x280&amp;nras=7&amp;correlator=2167462802197&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3232&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093272%2C95353386%2C95362656%2C95365225%2C95365234%2C95365109%2C95359265%2C95365121%2C95365797&amp;oid=2&amp;pvsid=3073934038349466&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=11&amp;uci=a!b&amp;btvi=6&amp;fsb=1&amp;dtd=253"
        data-google-container-id="a!b"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CKaH0cPtrI4DFWr1TAId4M08Xw"
      ></iframe></div
  ></ins>
</div>
<p>
  In this example, if we were to catch an int exception, what does that really
  tell us? Was one of the array indexes out of bounds? Did operator+ cause
  integer overflow? Did operator new fail because it ran out of memory?
  Unfortunately, in this case, there’s just no easy way to disambiguate. While
  we can throw const char* exceptions to solve the problem of identifying WHAT
  went wrong, this still does not provide us the ability to handle exceptions
  from various sources differently.
</p>
<div class="code-block code-block-4" style="margin: 8px 0; clear: both"></div>

<p>
  One way to solve this problem is to use exception classes. An
  <strong>exception class</strong> is just a normal class that is designed
  specifically to be thrown as an exception. Let’s design a simple exception
  class to be used with our IntArray class:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string_view&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">ArrayException</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-47-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
	std<span class="token double-colon punctuation">::</span>string m_error<span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
	<span class="token function">ArrayException</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-42-close">(</span>std<span class="token double-colon punctuation">::</span>string_view error<span class="token punctuation brace-round brace-close brace-level-2" id="pair-42-open">)</span>
		<span class="token operator">:</span> m_error<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-44-close">{</span> error <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-44-open">}</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-45-close">{</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-45-open">}</span>

	<span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> <span class="token function">getError</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-43-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-43-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-46-close">{</span> <span class="token keyword keyword-return">return</span> m_error<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-46-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-47-open">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_11_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_11"
        name="aswift_11"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3129705843&amp;adf=1689283641&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751116206&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fexceptions-classes-and-inheritance%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963741889&amp;bpp=1&amp;bdt=517&amp;idt=1&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280%2C1027x280%2C1027x280%2C1027x280&amp;nras=8&amp;correlator=2167462802197&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3947&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093272%2C95353386%2C95362656%2C95365225%2C95365234%2C95365109%2C95359265%2C95365121%2C95365797&amp;oid=2&amp;pvsid=3073934038349466&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=12&amp;uci=a!c&amp;btvi=7&amp;fsb=1&amp;dtd=257"
        data-google-container-id="a!c"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CNGs0cPtrI4DFRMmewcd1NAUKw"
      ></iframe></div
  ></ins>
</div>
<p>Here’s a full program using this class:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string_view&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">ArrayException</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-65-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
	std<span class="token double-colon punctuation">::</span>string m_error<span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
	<span class="token function">ArrayException</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-48-close">(</span>std<span class="token double-colon punctuation">::</span>string_view error<span class="token punctuation brace-round brace-close brace-level-2" id="pair-48-open">)</span>
		<span class="token operator">:</span> m_error<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-62-close">{</span> error <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-62-open">}</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-63-close">{</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-63-open">}</span>

	<span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> <span class="token function">getError</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-49-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-49-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-64-close">{</span> <span class="token keyword keyword-return">return</span> m_error<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-64-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-65-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">IntArray</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-71-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
	<span class="token keyword keyword-int">int</span> m_data<span class="token punctuation brace-square brace-open brace-level-2" id="pair-58-close">[</span><span class="token number">3</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-58-open">]</span><span class="token punctuation brace-curly brace-open brace-level-2" id="pair-66-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-66-open">}</span><span class="token punctuation">;</span> <span class="token comment">// assume array is length 3 for simplicity</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
	<span class="token function">IntArray</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-50-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-50-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-67-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-67-open">}</span>

	<span class="token keyword keyword-int">int</span> <span class="token function">getLength</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-51-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-51-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-68-close">{</span> <span class="token keyword keyword-return">return</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-68-open">}</span>

	<span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-59-close">[</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-59-open">]</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-52-close">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-52-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-70-close">{</span>
		<span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-3" id="pair-54-close">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> index <span class="token operator">&gt;=</span> <span class="token function">getLength</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-53-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-53-open">)</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-54-open">)</span>
			<span class="token keyword keyword-throw">throw</span> ArrayException<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-69-close">{</span> <span class="token string">"Invalid index"</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-69-open">}</span><span class="token punctuation">;</span>

		<span class="token keyword keyword-return">return</span> m_data<span class="token punctuation brace-square brace-open brace-level-3" id="pair-60-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-3" id="pair-60-open">]</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-70-open">}</span>

<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-71-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-55-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-55-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-75-close">{</span>
	IntArray array<span class="token punctuation">;</span>

	<span class="token keyword keyword-try">try</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-73-close">{</span>
		<span class="token keyword keyword-int">int</span> value<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-72-close">{</span> array<span class="token punctuation brace-square brace-open brace-level-4" id="pair-61-close">[</span><span class="token number">5</span><span class="token punctuation brace-square brace-close brace-level-4" id="pair-61-open">]</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-72-open">}</span><span class="token punctuation">;</span> <span class="token comment">// out of range subscript</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-73-open">}</span>
	<span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-56-close">(</span><span class="token keyword keyword-const">const</span> ArrayException<span class="token operator">&amp;</span> exception<span class="token punctuation brace-round brace-close brace-level-2" id="pair-56-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-74-close">{</span>
		std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"An array exception occurred ("</span> <span class="token operator">&lt;&lt;</span> exception<span class="token punctuation">.</span><span class="token function">getError</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-57-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-57-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">")\n"</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-74-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-75-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_12_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<p>
  Using such a class, we can have the exception return a description of the
  problem that occurred, which provides context for what went wrong. And since
  ArrayException is its own unique type, we can specifically catch exceptions
  thrown by the array class and treat them differently from other exceptions if
  we wish.
</p>
<p>
  Note that exception handlers should catch class exception objects by reference
  instead of by value. This prevents the compiler from making a copy of the
  exception at the point where it is caught, which can be expensive when the
  exception is a class object, and prevents object slicing when dealing with
  derived exception classes (which we’ll talk about in a moment). Catching
  exceptions by pointer should generally be avoided unless you have a specific
  reason to do so.
</p>
<div class="cpp-note cpp-lightgreenbackground">
  <p class="cpp-note-title cpp-bottomline">Best practice</p>
  <p>
    Exceptions of a fundamental type can be caught by value since they are cheap
    to copy.<br />
    Exceptions of a class type should be caught by (const) reference to prevent
    expensive copying and slicing.
  </p>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Exceptions and inheritance
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_13_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<p>
  Since it’s possible to throw classes as exceptions, and classes can be derived
  from other classes, we need to consider what happens when we use inherited
  classes as exceptions. As it turns out, exception handlers will not only match
  classes of a specific type, they’ll also match classes derived from that
  specific type as well! Consider the following example:
</p>
<div class="code-block code-block-5" style="margin: 8px 0; clear: both"></div>

<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Base</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-83-close">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Base</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-76-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-76-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-82-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-82-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-83-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Derived</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Base</span></span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-85-close">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Derived</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-77-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-77-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-84-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-84-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-85-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-78-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-78-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-89-close">{</span>
    <span class="token keyword keyword-try">try</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-86-close">{</span>
        <span class="token keyword keyword-throw">throw</span> <span class="token function">Derived</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-79-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-79-open">)</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-86-open">}</span>
    <span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-80-close">(</span><span class="token keyword keyword-const">const</span> Base<span class="token operator">&amp;</span> base<span class="token punctuation brace-round brace-close brace-level-2" id="pair-80-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-87-close">{</span>
        std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"caught Base"</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-87-open">}</span>
    <span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-81-close">(</span><span class="token keyword keyword-const">const</span> Derived<span class="token operator">&amp;</span> derived<span class="token punctuation brace-round brace-close brace-level-2" id="pair-81-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-88-close">{</span>
        std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"caught Derived"</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-88-open">}</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-89-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In the above example we throw an exception of type Derived. However, the
  output of this program is:
</p>
<pre>
caught Base
</pre>
<p>What happened?</p>
<p>
  First, as mentioned above, derived classes will be caught by handlers for the
  base type. Because Derived is derived from Base, Derived is-a Base (they have
  an is-a relationship). Second, when C++ is attempting to find a handler for a
  raised exception, it does so sequentially. Consequently, the first thing C++
  does is check whether the exception handler for Base matches the Derived
  exception. Because Derived is-a Base, the answer is yes, and it executes the
  catch block for type Base! The catch block for Derived is never even tested in
  this case.
</p>
<p>
  In order to make this example work as expected, we need to flip the order of
  the catch blocks:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Base</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-97-close">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Base</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-90-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-90-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-96-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-96-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-97-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Derived</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Base</span></span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-99-close">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Derived</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-91-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-91-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-98-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-98-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-99-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-92-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-92-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-103-close">{</span>
    <span class="token keyword keyword-try">try</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-100-close">{</span>
        <span class="token keyword keyword-throw">throw</span> <span class="token function">Derived</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-93-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-93-open">)</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-100-open">}</span>
    <span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-94-close">(</span><span class="token keyword keyword-const">const</span> Derived<span class="token operator">&amp;</span> derived<span class="token punctuation brace-round brace-close brace-level-2" id="pair-94-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-101-close">{</span>
        std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"caught Derived"</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-101-open">}</span>
    <span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-95-close">(</span><span class="token keyword keyword-const">const</span> Base<span class="token operator">&amp;</span> base<span class="token punctuation brace-round brace-close brace-level-2" id="pair-95-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-102-close">{</span>
        std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"caught Base"</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-102-open">}</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-103-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  This way, the Derived handler will get first shot at catching objects of type
  Derived (before the handler for Base can). Objects of type Base will not match
  the Derived handler (Derived is-a Base, but Base is not a Derived), and thus
  will “fall through” to the Base handler.
</p>
<div class="cpp-note cpp-lightpurplebackground">
  <p class="cpp-note-title cpp-bottomline">Rule</p>
  <p>
    Handlers for derived exception classes should be listed before those for
    base classes.
  </p>
</div>
<p>
  The ability to use a handler to catch exceptions of derived types using a
  handler for the base class turns out to be exceedingly useful.
</p>
<div class="code-block code-block-6" style="margin: 8px 0; clear: both"></div>

<p class="cpp-section cpp-topline" style="clear: both">std::exception</p>
<p>
  Many of the classes and operators in the standard library throw exception
  classes on failure. For example, operator new can throw std::bad_alloc if it
  is unable to allocate enough memory. A failed dynamic_cast will throw
  std::bad_cast. And so on. As of C++20, there are 28 different exception
  classes that can be thrown, with more being added in each subsequent language
  standard.
</p>
<p>
  The good news is that all of these exception classes are derived from a single
  class called <strong>std::exception</strong> (defined in the &lt;exception&gt;
  header). std::exception is a small interface class designed to serve as a base
  class to any exception thrown by the C++ standard library.
</p>
<p>
  Much of the time, when an exception is thrown by the standard library, we
  won’t care whether it’s a bad allocation, a bad cast, or something else. We
  just care that something catastrophic went wrong and now our program is
  exploding. Thanks to std::exception, we can set up an exception handler to
  catch exceptions of type std::exception, and we’ll end up catching
  std::exception and all of the derived exceptions together in one place. Easy!
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstddef&gt;</span> <span class="token comment">// for std::size_t</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;exception&gt;</span> <span class="token comment">// for std::exception</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;limits&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span> <span class="token comment">// for this example</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-104-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-104-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-111-close">{</span>
    <span class="token keyword keyword-try">try</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-109-close">{</span>
        <span class="token comment">// Your code using standard library goes here</span>
        <span class="token comment">// We'll trigger one of these exceptions intentionally for the sake of the example</span>
        std<span class="token double-colon punctuation">::</span>string s<span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-106-close">(</span>std<span class="token double-colon punctuation">::</span><span class="token class-name">numeric_limits</span><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>size_t<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-105-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-105-open">)</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-106-open">)</span><span class="token punctuation">;</span> <span class="token comment">// will trigger a std::length_error or allocation exception</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-109-open">}</span>
    <span class="token comment">// This handler will catch std::exception and all the derived exceptions too</span>
    <span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-107-close">(</span><span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>exception<span class="token operator">&amp;</span> exception<span class="token punctuation brace-round brace-close brace-level-2" id="pair-107-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-110-close">{</span>
        std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Standard exception: "</span> <span class="token operator">&lt;&lt;</span> exception<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-108-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-108-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-110-open">}</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-111-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>On the author’s machine, the above program prints:</p>
<pre>
Standard exception: string too long
</pre>
<p>
  The above example should be pretty straightforward. The one thing worth noting
  is that std::exception has a virtual member function named
  <strong>what()</strong> that returns a C-style string description of the
  exception. Most derived classes override the what() function to change the
  message. Note that this string is meant to be used for descriptive text only
  -- do not use it for comparisons, as it is not guaranteed to be the same
  across compilers.
</p>
<div class="code-block code-block-7" style="margin: 8px 0; clear: both"></div>

<p>
  Sometimes we’ll want to handle a specific type of exception differently. In
  this case, we can add a handler for that specific type, and let all the others
  “fall through” to the base handler. Consider:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-try">try</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-115-close">{</span>
     <span class="token comment">// code using standard library goes here</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-115-open">}</span>
<span class="token comment">// This handler will catch std::length_error (and any exceptions derived from it) here</span>
<span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-1" id="pair-112-close">(</span><span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>length_error<span class="token operator">&amp;</span> exception<span class="token punctuation brace-round brace-close brace-level-1" id="pair-112-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-116-close">{</span>
    std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"You ran out of memory!"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-116-open">}</span>
<span class="token comment">// This handler will catch std::exception (and any exception derived from it) that fall</span>
<span class="token comment">// through here</span>
<span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-1" id="pair-113-close">(</span><span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>exception<span class="token operator">&amp;</span> exception<span class="token punctuation brace-round brace-close brace-level-1" id="pair-113-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-117-close">{</span>
    std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Standard exception: "</span> <span class="token operator">&lt;&lt;</span> exception<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-114-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-114-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-117-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In this example, exceptions of type std::length_error will be caught by the
  first handler and handled there. Exceptions of type std::exception and all of
  the other derived classes will be caught by the second handler.
</p>
<p>
  Such inheritance hierarchies allow us to use specific handlers to target
  specific derived exception classes, or to use base class handlers to catch the
  whole hierarchy of exceptions. This allows us a fine degree of control over
  what kind of exceptions we want to handle while ensuring we don’t have to do
  too much work to catch “everything else” in a hierarchy.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Using the standard exceptions directly
</p>
<p>
  Nothing throws a std::exception directly, and neither should you. However, you
  should feel free to throw the other standard exception classes in the standard
  library if they adequately represent your needs. You can find a list of all
  the standard exceptions on
  <a href="http://en.cppreference.com/w/cpp/error/exception">cppreference</a>.
</p>
<div class="code-block code-block-8" style="margin: 8px 0; clear: both"></div>

<p>
  std::runtime_error (included as part of the stdexcept header) is a popular
  choice, because it has a generic name, and its constructor takes a
  customizable message:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;exception&gt;</span> <span class="token comment">// for std::exception</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdexcept&gt;</span> <span class="token comment">// for std::runtime_error</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-118-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-118-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-124-close">{</span>
	<span class="token keyword keyword-try">try</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-122-close">{</span>
		<span class="token keyword keyword-throw">throw</span> std<span class="token double-colon punctuation">::</span><span class="token function">runtime_error</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-119-close">(</span><span class="token string">"Bad things happened"</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-119-open">)</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-122-open">}</span>
	<span class="token comment">// This handler will catch std::exception and all the derived exceptions too</span>
	<span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-120-close">(</span><span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>exception<span class="token operator">&amp;</span> exception<span class="token punctuation brace-round brace-close brace-level-2" id="pair-120-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-123-close">{</span>
		std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Standard exception: "</span> <span class="token operator">&lt;&lt;</span> exception<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-121-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-121-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-123-open">}</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-124-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>This prints:</p>
<pre>
Standard exception: Bad things happened
</pre>
<p class="cpp-section cpp-topline" style="clear: both">
  Deriving your own classes from std::exception or std::runtime_error
</p>
<p>
  You can, of course, derive your own classes from std::exception, and override
  the virtual what() const member function. Here’s the same program as above,
  with ArrayException derived from std::exception:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;exception&gt;</span> <span class="token comment">// for std::exception</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string_view&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">ArrayException</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> std<span class="token double-colon punctuation">::</span><span class="token class-name">exception</span></span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-147-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
	std<span class="token double-colon punctuation">::</span>string m_error<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-143-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-143-open">}</span><span class="token punctuation">;</span> <span class="token comment">// handle our own string</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
	<span class="token function">ArrayException</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-125-close">(</span>std<span class="token double-colon punctuation">::</span>string_view error<span class="token punctuation brace-round brace-close brace-level-2" id="pair-125-open">)</span>
		<span class="token operator">:</span> m_error<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-144-close">{</span>error<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-144-open">}</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-145-close">{</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-145-open">}</span>

	<span class="token comment">// std::exception::what() returns a const char*, so we must as well</span>
	<span class="token keyword keyword-const">const</span> <span class="token keyword keyword-char">char</span><span class="token operator">*</span> <span class="token function">what</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-126-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-126-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-noexcept">noexcept</span> <span class="token keyword keyword-override">override</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-146-close">{</span> <span class="token keyword keyword-return">return</span> m_error<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-127-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-127-open">)</span><span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-146-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-147-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">IntArray</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-152-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
	<span class="token keyword keyword-int">int</span> m_data<span class="token punctuation brace-square brace-open brace-level-2" id="pair-139-close">[</span><span class="token number">3</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-139-open">]</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-148-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-148-open">}</span><span class="token punctuation">;</span> <span class="token comment">// assume array is length 3 for simplicity</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
	<span class="token function">IntArray</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-128-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-128-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-149-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-149-open">}</span>

	<span class="token keyword keyword-int">int</span> <span class="token function">getLength</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-129-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-129-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-150-close">{</span> <span class="token keyword keyword-return">return</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-150-open">}</span>

	<span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-140-close">[</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-140-open">]</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-130-close">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-130-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-151-close">{</span>
		<span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-3" id="pair-132-close">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> index <span class="token operator">&gt;=</span> <span class="token function">getLength</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-131-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-131-open">)</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-132-open">)</span>
			<span class="token keyword keyword-throw">throw</span> <span class="token function">ArrayException</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-133-close">(</span><span class="token string">"Invalid index"</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-133-open">)</span><span class="token punctuation">;</span>

		<span class="token keyword keyword-return">return</span> m_data<span class="token punctuation brace-square brace-open brace-level-3" id="pair-141-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-3" id="pair-141-open">]</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-151-open">}</span>

<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-152-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-134-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-134-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-157-close">{</span>
	IntArray array<span class="token punctuation">;</span>

	<span class="token keyword keyword-try">try</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-154-close">{</span>
		<span class="token keyword keyword-int">int</span> value<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-153-close">{</span> array<span class="token punctuation brace-square brace-open brace-level-4" id="pair-142-close">[</span><span class="token number">5</span><span class="token punctuation brace-square brace-close brace-level-4" id="pair-142-open">]</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-153-open">}</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-154-open">}</span>
	<span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-135-close">(</span><span class="token keyword keyword-const">const</span> ArrayException<span class="token operator">&amp;</span> exception<span class="token punctuation brace-round brace-close brace-level-2" id="pair-135-open">)</span> <span class="token comment">// derived catch blocks go first</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-155-close">{</span>
		std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"An array exception occurred ("</span> <span class="token operator">&lt;&lt;</span> exception<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-136-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-136-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">")\n"</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-155-open">}</span>
	<span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-137-close">(</span><span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>exception<span class="token operator">&amp;</span> exception<span class="token punctuation brace-round brace-close brace-level-2" id="pair-137-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-156-close">{</span>
		std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Some other std::exception occurred ("</span> <span class="token operator">&lt;&lt;</span> exception<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-138-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-138-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">")\n"</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-156-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-157-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Note that virtual function what() has specifier noexcept (which means the
  function promises not to throw exceptions itself). Therefore, our override
  should also have specifier noexcept.
</p>
<p>
  Because std::runtime_error already has string handling capabilities, it’s also
  a popular base class for derived exception classes. std::runtime_error can
  take a C-style string parameter, or a
  <code>const std::string&amp;</code> parameter.
</p>
<p>Here’s the same example derived from std::runtime_error instead:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;exception&gt;</span> <span class="token comment">// for std::exception</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdexcept&gt;</span> <span class="token comment">// for std::runtime_error</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">ArrayException</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> std<span class="token double-colon punctuation">::</span><span class="token class-name">runtime_error</span></span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-176-close">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
	<span class="token comment">// std::runtime_error takes either a null-terminated const char* or a const std::string&amp;.</span>
	<span class="token comment">// We will follow their lead and take a const std::string&amp;</span>
	<span class="token function">ArrayException</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-158-close">(</span><span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> error<span class="token punctuation brace-round brace-close brace-level-2" id="pair-158-open">)</span>
		<span class="token operator">:</span> std<span class="token double-colon punctuation">::</span>runtime_error<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-174-close">{</span> error <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-174-open">}</span> <span class="token comment">// std::runtime_error will handle the string</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-175-close">{</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-175-open">}</span>


        <span class="token comment">// no need to override what() since we can just use std::runtime_error::what()</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-176-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">IntArray</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-181-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
	<span class="token keyword keyword-int">int</span> m_data<span class="token punctuation brace-square brace-open brace-level-2" id="pair-170-close">[</span><span class="token number">3</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-170-open">]</span><span class="token punctuation brace-curly brace-open brace-level-2" id="pair-177-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-177-open">}</span><span class="token punctuation">;</span> <span class="token comment">// assume array is length 3 for simplicity</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
	<span class="token function">IntArray</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-159-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-159-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-178-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-178-open">}</span>

	<span class="token keyword keyword-int">int</span> <span class="token function">getLength</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-160-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-160-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-179-close">{</span> <span class="token keyword keyword-return">return</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-179-open">}</span>

	<span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-171-close">[</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-171-open">]</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-161-close">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-161-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-180-close">{</span>
		<span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-3" id="pair-163-close">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> index <span class="token operator">&gt;=</span> <span class="token function">getLength</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-162-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-162-open">)</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-163-open">)</span>
			<span class="token keyword keyword-throw">throw</span> <span class="token function">ArrayException</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-164-close">(</span><span class="token string">"Invalid index"</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-164-open">)</span><span class="token punctuation">;</span>

		<span class="token keyword keyword-return">return</span> m_data<span class="token punctuation brace-square brace-open brace-level-3" id="pair-172-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-3" id="pair-172-open">]</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-180-open">}</span>

<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-181-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-165-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-165-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-186-close">{</span>
	IntArray array<span class="token punctuation">;</span>

	<span class="token keyword keyword-try">try</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-183-close">{</span>
		<span class="token keyword keyword-int">int</span> value<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-182-close">{</span> array<span class="token punctuation brace-square brace-open brace-level-4" id="pair-173-close">[</span><span class="token number">5</span><span class="token punctuation brace-square brace-close brace-level-4" id="pair-173-open">]</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-182-open">}</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-183-open">}</span>
	<span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-166-close">(</span><span class="token keyword keyword-const">const</span> ArrayException<span class="token operator">&amp;</span> exception<span class="token punctuation brace-round brace-close brace-level-2" id="pair-166-open">)</span> <span class="token comment">// derived catch blocks go first</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-184-close">{</span>
		std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"An array exception occurred ("</span> <span class="token operator">&lt;&lt;</span> exception<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-167-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-167-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">")\n"</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-184-open">}</span>
	<span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-168-close">(</span><span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>exception<span class="token operator">&amp;</span> exception<span class="token punctuation brace-round brace-close brace-level-2" id="pair-168-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-185-close">{</span>
		std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Some other std::exception occurred ("</span> <span class="token operator">&lt;&lt;</span> exception<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-169-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-169-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">")\n"</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-185-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-186-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  It’s up to you whether you want create your own standalone exception classes,
  use the standard exception classes, or derive your own exception classes from
  std::exception or std::runtime_error. All are valid approaches depending on
  your aims.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  The lifetime of exceptions
</p>
<p>
  When an exception is thrown, the object being thrown is typically a temporary
  or local variable that has been allocated on the stack. However, the process
  of exception handling may unwind the function, causing all variables local to
  the function to be destroyed. So how does the exception object being thrown
  survive stack unwinding?
</p>
<p>
  When an exception is thrown, the compiler makes a copy of the exception object
  to some piece of unspecified memory (outside of the call stack) reserved for
  handling exceptions. That way, the exception object is persisted regardless of
  whether or how many times the stack is unwound. The exception is guaranteed to
  exist until the exception has been handled.
</p>
<p>
  This means that the objects being thrown generally need to be copyable (even
  if the stack is not actually unwound). Smart compilers may be able to perform
  a move instead, or elide the copy altogether in specific circumstances.
</p>
<div class="cpp-note cpp-lightbluebackground">
  <p class="cpp-note-title cpp-bottomline">Tip</p>
  <p>Exception objects need to be copyable.</p>
</div>
<p>
  Here’s an example showing what happens when we try to throw a Derived object
  that is not copyable:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Base</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-194-close">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Base</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-187-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-187-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-193-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-193-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-194-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Derived</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Base</span></span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-196-close">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Derived</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-188-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-188-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-195-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-195-open">}</span>

    <span class="token function">Derived</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-189-close">(</span><span class="token keyword keyword-const">const</span> Derived<span class="token operator">&amp;</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-189-open">)</span> <span class="token operator">=</span> <span class="token keyword keyword-delete">delete</span><span class="token punctuation">;</span> <span class="token comment">// not copyable</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-196-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-190-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-190-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-201-close">{</span>
    Derived d<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-197-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-197-open">}</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-try">try</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-198-close">{</span>
        <span class="token keyword keyword-throw">throw</span> d<span class="token punctuation">;</span> <span class="token comment">// compile error: Derived copy constructor was deleted</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-198-open">}</span>
    <span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-191-close">(</span><span class="token keyword keyword-const">const</span> Derived<span class="token operator">&amp;</span> derived<span class="token punctuation brace-round brace-close brace-level-2" id="pair-191-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-199-close">{</span>
        std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"caught Derived"</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-199-open">}</span>
    <span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-192-close">(</span><span class="token keyword keyword-const">const</span> Base<span class="token operator">&amp;</span> base<span class="token punctuation brace-round brace-close brace-level-2" id="pair-192-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-200-close">{</span>
        std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"caught Base"</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-200-open">}</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-201-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  When this program is compiled, the compiler will complain that the Derived
  copy constructor is not available, and halt compilation.
</p>
<p>
  Exception objects should not keep pointers or references to stack-allocated
  objects. If a thrown exception results in stack unwinding (causing the
  destruction of stack-allocated objects), these pointers or references may be
  left dangling.
</p>
<div class="prevnext">
  <div class="prevnext-inline">
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/rethrowing-exceptions/"
    >
      <div class="nav-button nav-button-next">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-right" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Next lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">27.6</span>Rethrowing
            exceptions
          </div>
        </div>
      </div></a
    >
    <a class="nav-link" href="/">
      <div class="nav-button nav-button-index">
        <div class="nav-button-icon">
          <i class="fa fa-home" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Back to table of contents</div>
        </div>
      </div></a
    >
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/uncaught-exceptions-catch-all-handlers/"
    >
      <div class="nav-button nav-button-prev">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-left" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Previous lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">27.4</span>Uncaught
            exceptions and catch-all handlers
          </div>
        </div>
      </div></a
    >
  </div>
</div>
<div class="code-block code-block-10" style="margin: 8px 0; clear: both"></div>
