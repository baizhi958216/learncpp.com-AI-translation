<div
  class="code-block code-block-1"
  style="margin: 8px 8px 8px 0; float: left"
></div>
<p>
  In previous lesson
  <a href="https://www.learncpp.com/cpp-tutorial/class-template-specialization/"
    >26.4 -- Class template specialization</a
  >, we took a look at a simple templated <code>Storage</code> class, along with
  a specialization for type <code>double</code>:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">Storage</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-10-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    T m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-6-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-6-open">}</span><span class="token punctuation">;</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Storage</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-0-close">(</span>T value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-0-open">)</span>
      <span class="token operator">:</span> m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-7-close">{</span> value <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-7-open">}</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-8-close">{</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-8-open">}</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-1-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-1-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-9-close">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> m_value <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-9-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-10-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-template">template</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-void">void</span> <span class="token class-name">Storage</span><span class="token operator">&lt;</span><span class="token keyword keyword-double">double</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-2-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-2-open">)</span> <span class="token comment">// fully specialized for type double</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-11-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>scientific <span class="token operator">&lt;&lt;</span> m_value <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-11-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-3-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-3-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-14-close">{</span>
    <span class="token comment">// Define some storage units</span>
    Storage i <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-12-close">{</span> <span class="token number">5</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-12-open">}</span><span class="token punctuation">;</span>
    Storage d <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-13-close">{</span> <span class="token number">6.7</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-13-open">}</span><span class="token punctuation">;</span> <span class="token comment">// will cause Storage&lt;double&gt; to be implicitly instantiated</span>

    <span class="token comment">// Print out some values</span>
    i<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-4-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-4-open">)</span><span class="token punctuation">;</span> <span class="token comment">// calls Storage&lt;int&gt;::print (instantiated from Storage&lt;T&gt;)</span>
    d<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-5-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-5-open">)</span><span class="token punctuation">;</span> <span class="token comment">// calls Storage&lt;double&gt;::print (called from explicit specialization of Storage&lt;double&gt;::print())</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-14-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  However, as simple as this class is, it has a hidden flaw: it compiles but
  malfunctions when <code>T</code> is a pointer type. For example:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-15-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-15-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-20-close">{</span>
    <span class="token keyword keyword-double">double</span> d <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-17-close">{</span> <span class="token number">1.2</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-17-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-double">double</span> <span class="token operator">*</span>ptr <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-18-close">{</span> <span class="token operator">&amp;</span>d <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-18-open">}</span><span class="token punctuation">;</span>

    Storage s <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-19-close">{</span> ptr <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-19-open">}</span><span class="token punctuation">;</span>
    s<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-16-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-16-open">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-20-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>On the authors machine, this produced the result:</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_5_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_5"
        name="aswift_5"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3134951554&amp;adf=3659128598&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1750292172&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fpartial-template-specialization-for-pointers%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963706780&amp;bpp=1&amp;bdt=714&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600&amp;nras=2&amp;correlator=8598427158127&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=1383&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C95353387%2C95362655%2C95365225%2C95365235%2C95359265%2C95365122%2C95365797&amp;oid=2&amp;pvsid=3211854926301785&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=6&amp;uci=a!6&amp;btvi=1&amp;fsb=1&amp;dtd=12"
        data-google-container-id="a!6"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CN_Q47LtrI4DFdbwTAIdIiI4xw"
      ></iframe></div
  ></ins>
</div>
<pre>
0x7ffe164e0f50
</pre>
<p>
  What happened? Because <code>ptr</code> is a <code>double*</code>,
  <code>s</code> has type <code>Storage&lt;double*&gt;</code>, which means
  <code>m_value</code> has type <code>double*</code>. When the constructor is
  invoked, <code>m_value</code> receives a copy of the address that
  <code>ptr</code> is holding, and it is this address that is printed when the
  <code>print()</code> member function is called.
</p>
<p>So how do we fix this?</p>
<div class="code-block code-block-2" style="margin: 8px 0; clear: both"></div>

<p>
  One option would be to add a full specialization for type
  <code>double*</code>:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">Storage</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-32-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    T m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-28-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-28-open">}</span><span class="token punctuation">;</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Storage</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-21-close">(</span>T value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-21-open">)</span>
      <span class="token operator">:</span> m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-29-close">{</span> value <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-29-open">}</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-30-close">{</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-30-open">}</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-22-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-22-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-31-close">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> m_value <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-31-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-32-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-template">template</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-void">void</span> <span class="token class-name">Storage</span><span class="token operator">&lt;</span><span class="token keyword keyword-double">double</span><span class="token operator">*</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-23-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-23-open">)</span> <span class="token comment">// fully specialized for type double*</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-33-close">{</span>
    <span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-24-close">(</span>m_value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-24-open">)</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>scientific <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>m_value <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-33-open">}</span>

<span class="token keyword keyword-template">template</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-void">void</span> <span class="token class-name">Storage</span><span class="token operator">&lt;</span><span class="token keyword keyword-double">double</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-25-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-25-open">)</span> <span class="token comment">// fully specialized for type double (for comparison, not used)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-34-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>scientific <span class="token operator">&lt;&lt;</span> m_value <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-34-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-26-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-26-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-38-close">{</span>
    <span class="token keyword keyword-double">double</span> d <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-35-close">{</span> <span class="token number">1.2</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-35-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-double">double</span> <span class="token operator">*</span>ptr <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-36-close">{</span> <span class="token operator">&amp;</span>d <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-36-open">}</span><span class="token punctuation">;</span>

    Storage s <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-37-close">{</span> ptr <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-37-open">}</span><span class="token punctuation">;</span>
    s<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-27-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-27-open">)</span><span class="token punctuation">;</span> <span class="token comment">// calls Storage&lt;double*&gt;::print()</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-38-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>This now prints the correct result:</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_6_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_6"
        name="aswift_6"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3134951554&amp;adf=1732263375&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1750292172&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fpartial-template-specialization-for-pointers%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963706780&amp;bpp=1&amp;bdt=714&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280&amp;nras=3&amp;correlator=8598427158127&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=2606&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C95353387%2C95362655%2C95365225%2C95365235%2C95359265%2C95365122%2C95365797&amp;oid=2&amp;pvsid=3211854926301785&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=7&amp;uci=a!7&amp;btvi=2&amp;fsb=1&amp;dtd=13"
        data-google-container-id="a!7"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CN_w47LtrI4DFd_yTAIdMnoHbA"
      ></iframe></div
  ></ins>
</div>
<pre>
1.200000e+00
</pre>
<p>
  But this only solves the problem when <code>T</code> is of type
  <code>double*</code>. What about when <code>T</code> is <code>int*</code>, or
  <code>char*</code>, or any other pointer type?
</p>
<p>
  We really don’t want to have to create a full specialization for every pointer
  type. And in fact, it’s not even possible, because the user can always pass in
  a pointer to a program-defined type.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Partial template specialization for pointers
</p>
<div class="code-block code-block-3" style="margin: 8px 0; clear: both"></div>

<p>
  You might think to to try creating a template function overloaded on type
  <code>T*</code>:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token comment">// doesn't work</span>
<span class="token keyword keyword-template">template</span><span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-void">void</span> <span class="token class-name">Storage</span><span class="token operator">&lt;</span>T<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-39-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-39-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-41-close">{</span>
    <span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-40-close">(</span>m_value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-40-open">)</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>scientific <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>m_value <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-41-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Such a function is a partially specialized template function because it’s
  restricting what type <code>T</code> can be (to a pointer type), but
  <code>T</code> is still a type template parameter.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_7_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_7"
        name="aswift_7"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3134951554&amp;adf=4021600550&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1750292172&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fpartial-template-specialization-for-pointers%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963706780&amp;bpp=1&amp;bdt=713&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280&amp;nras=4&amp;correlator=8598427158127&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3315&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C95353387%2C95362655%2C95365225%2C95365235%2C95359265%2C95365122%2C95365797&amp;oid=2&amp;pvsid=3211854926301785&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=8&amp;uci=a!8&amp;btvi=3&amp;fsb=1&amp;dtd=14"
        data-google-container-id="a!8"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-google-query-id="CM7X47LtrI4DFUObuQUdTOkq_w"
        data-load-complete="true"
      ></iframe></div
  ></ins>
</div>
<p>
  Unfortunately, this doesn’t work for a simple reason: as of the time of
  writing (C++23) functions cannot be partially specialized. As we noted in
  lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/partial-template-specialization/"
    >26.5 -- Partial template specialization</a
  >, only classes can be partially specialized.
</p>
<p>So let’s partially specialize the <code>Storage</code> class instead:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">Storage</span> <span class="token comment">// This is our primary template class (same as previous)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-54-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    T m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-50-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-50-open">}</span><span class="token punctuation">;</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Storage</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-42-close">(</span>T value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-42-open">)</span>
      <span class="token operator">:</span> m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-51-close">{</span> value <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-51-open">}</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-52-close">{</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-52-open">}</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-43-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-43-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-53-close">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> m_value <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-53-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-54-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span> <span class="token comment">// we still have a type template parameter</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">Storage</span><span class="token operator">&lt;</span>T<span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token comment">// This is partially specialized for T*</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-58-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    T<span class="token operator">*</span> m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-55-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-55-open">}</span><span class="token punctuation">;</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Storage</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-44-close">(</span>T<span class="token operator">*</span> value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-44-open">)</span>
      <span class="token operator">:</span> m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-56-close">{</span> value <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-56-open">}</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-57-close">{</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-57-open">}</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-45-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-45-open">)</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-58-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-void">void</span> <span class="token class-name">Storage</span><span class="token operator">&lt;</span>T<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-46-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-46-open">)</span> <span class="token comment">// This is a non-specialized function of partially specialized class Storage&lt;T*&gt;</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-59-close">{</span>
    <span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-47-close">(</span>m_value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-47-open">)</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>scientific <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>m_value <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-59-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-48-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-48-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-63-close">{</span>
    <span class="token keyword keyword-double">double</span> d <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-60-close">{</span> <span class="token number">1.2</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-60-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-double">double</span> <span class="token operator">*</span>ptr <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-61-close">{</span> <span class="token operator">&amp;</span>d <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-61-open">}</span><span class="token punctuation">;</span>

    Storage s <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-62-close">{</span> ptr <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-62-open">}</span><span class="token punctuation">;</span> <span class="token comment">// instantiates Storage&lt;double*&gt; from partially specialized class</span>
    s<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-49-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-49-open">)</span><span class="token punctuation">;</span> <span class="token comment">// calls Storage&lt;double*&gt;::print()</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-63-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  We’ve defined <code>Storage&lt;T*&gt;::print()</code> outside the class just
  to show how it’s done, and to show that the definition is identical to the
  partially specialized function <code>Storage&lt;T*&gt;::print()</code> that
  did not work above. However, now that <code>Storage&lt;T*&gt;</code> is a
  partially specialized class, <code>Storage&lt;T*&gt;::print()</code> is no
  longer partially specialized -- it is a non-specialized function, which is why
  it is allowed.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_8_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_8"
        name="aswift_8"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3134951554&amp;adf=1097732645&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1750292172&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fpartial-template-specialization-for-pointers%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963706782&amp;bpp=1&amp;bdt=715&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280&amp;nras=5&amp;correlator=8598427158127&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3771&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C95353387%2C95362655%2C95365225%2C95365235%2C95359265%2C95365122%2C95365797&amp;oid=2&amp;pvsid=3211854926301785&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=9&amp;uci=a!9&amp;btvi=4&amp;fsb=1&amp;dtd=227"
        data-google-container-id="a!9"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CIHm8LLtrI4DFZiYuQUdEG0xfg"
      ></iframe></div
  ></ins>
</div>
<div class="code-block code-block-4" style="margin: 8px 0; clear: both"></div>

<p>
  It’s worth noting that our type template parameter is defined as
  <code>T</code>, not <code>T*</code>. This means that <code>T</code> will be
  deduced as the non-pointer type, so we have to use <code>T*</code> anywhere we
  want a pointer to <code>T</code>. It’s also worth a reminder that the partial
  specialization <code>Storage&lt;T*&gt;</code> needs to be defined after the
  primary template class <code>Storage&lt;T&gt;</code>.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Ownership and lifetime issues
</p>
<p>
  The above partially specialized class <code>Storage&lt;T*&gt;</code> has
  another potential issue. Because <code>m_value</code> is a <code>T*</code>, it
  is a pointer to the object that is passed in. If that object is then
  destroyed, our <code>Storage&lt;T*&gt;</code> will be left dangling.
</p>
<p>
  The core problem is that our implementation of
  <code>Storage&lt;T&gt;</code> has copy semantics (meaning it makes a copy of
  its initializer) but <code>Storage&lt;T*&gt;</code> has reference semantics
  (meaning it’s a reference to its initializer). This inconsistency is a recipe
  for bugs.
</p>
<p>
  There are a few different ways we can deal with such issues (in order of
  increasing complexity):
</p>
<ol start="1">
  <li>
    Make it clear really clear that <code>Storage&lt;T*&gt;</code> is a view
    class (with reference semantics), so it’s on the caller to ensure the object
    being pointed to stays valid for as long as the
    <code>Storage&lt;T*&gt;</code> does. Unfortunately, because this partially
    specialized class must have the same name as a the primary template class,
    we can’t give it a name like <code>StorageView</code>. So we’re restricted
    to using comments or other things that might be missed. Not a great option.
  </li>
  <li>
    Prevent use of <code>Storage&lt;T*&gt;</code> altogether. We probably don’t
    need <code>Storage&lt;T*&gt;</code> to exist, as the caller can always
    dereference the pointer at the point of instantiation to use
    <code>Storage&lt;T&gt;</code> and make a copy of the value (which is
    semantically appropriate for a storage class).
  </li>
</ol>
<p>
  However, while you can delete an overloaded function, C++ (as of C++23) won’t
  let you delete a class. The obvious solution is to partially specialize
  <code>Storage&lt;T*&gt;</code> and then do something to make it not compile
  (e.g. <code>static_assert</code>) when the template is instantiated, this
  approach has one major downside: <code>std::nullptr_t</code> is not a pointer
  type, so <code>Storage&lt;std::nullptr_t&gt;</code> won’t match
  <code>Storage&lt;T*&gt;</code>!
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_9_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<div class="code-block code-block-5" style="margin: 8px 0; clear: both"></div>

<p>
  A better solution is to avoid partial specialization altogether, and use a
  <code>static_assert</code> on our primary template to ensure <code>T</code> is
  a type that we’re okay with. Here’s an example of that approach:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;type_traits&gt;</span> <span class="token comment">// for std::is_pointer_v and std::is_null_pointer_v</span></span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">Storage</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-75-close">{</span>
    <span class="token comment">// Make sure T isn't a pointer or a std::nullptr_t</span>
    <span class="token keyword keyword-static_assert">static_assert</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-64-close">(</span><span class="token operator">!</span>std<span class="token double-colon punctuation">::</span>is_pointer_v<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>std<span class="token double-colon punctuation">::</span>is_null_pointer_v<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token string">"Storage&lt;T*&gt; and Storage&lt;nullptr&gt; disallowed"</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-64-open">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    T m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-71-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-71-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Storage</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-65-close">(</span>T value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-65-open">)</span>
      <span class="token operator">:</span> m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-72-close">{</span> value <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-72-open">}</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-73-close">{</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-73-open">}</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-66-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-66-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-74-close">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> m_value <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-74-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-75-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-67-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-67-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-80-close">{</span>
    <span class="token keyword keyword-double">double</span> d <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-76-close">{</span> <span class="token number">1.2</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-76-open">}</span><span class="token punctuation">;</span>

    Storage s1 <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-77-close">{</span> d <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-77-open">}</span><span class="token punctuation">;</span> <span class="token comment">// ok</span>
    s1<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-68-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-68-open">)</span><span class="token punctuation">;</span>

    Storage s2 <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-78-close">{</span> <span class="token operator">&amp;</span>d <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-78-open">}</span><span class="token punctuation">;</span> <span class="token comment">// static_assert because T is a pointer</span>
    s2<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-69-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-69-open">)</span><span class="token punctuation">;</span>

    Storage s3 <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-79-close">{</span> <span class="token keyword keyword-nullptr">nullptr</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-79-open">}</span><span class="token punctuation">;</span> <span class="token comment">// static_assert because T is a nullptr</span>
    s3<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-70-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-70-open">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-80-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<ol start="3">
  <li>
    Have <code>Storage&lt;T*&gt;</code> make a copy of the object on the heap.
    If you do all the heap memory management yourself, this requires overloading
    the constructor, copy constructor, copy assignment, and destructor. An
    easier alternative is to just use <code>std::unique_ptr</code> (which we
    cover in lesson
    <a href="https://www.learncpp.com/cpp-tutorial/stdunique_ptr/"
      >22.5 -- std::unique_ptr</a
    >):
  </li>
</ol>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;type_traits&gt;</span> <span class="token comment">// for std::is_pointer_v and std::is_null_pointer_v</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;memory&gt;</span></span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">Storage</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-95-close">{</span>
    <span class="token comment">// Make sure T isn't a pointer or a std::nullptr_t</span>
    <span class="token keyword keyword-static_assert">static_assert</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-81-close">(</span><span class="token operator">!</span>std<span class="token double-colon punctuation">::</span>is_pointer_v<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>std<span class="token double-colon punctuation">::</span>is_null_pointer_v<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token string">"Storage&lt;T*&gt; and Storage&lt;nullptr&gt; disallowed"</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-81-open">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    T m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-91-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-91-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Storage</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-82-close">(</span>T value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-82-open">)</span>
      <span class="token operator">:</span> m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-92-close">{</span> value <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-92-open">}</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-93-close">{</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-93-open">}</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-83-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-83-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-94-close">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> m_value <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-94-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-95-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">Storage</span><span class="token operator">&lt;</span>T<span class="token operator">*</span><span class="token operator">&gt;</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-100-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    std<span class="token double-colon punctuation">::</span>unique_ptr<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-96-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-96-open">}</span><span class="token punctuation">;</span> <span class="token comment">// use std::unique_ptr to automatically deallocate when Storage is destroyed</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Storage</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-84-close">(</span>T<span class="token operator">*</span> value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-84-open">)</span>
      <span class="token operator">:</span> m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-97-close">{</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">make_unique</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-85-close">(</span>value <span class="token operator">?</span> <span class="token operator">*</span>value <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-85-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-97-open">}</span> <span class="token comment">// or throw exception when !value</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-98-close">{</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-98-open">}</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-86-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-86-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-99-close">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-3" id="pair-87-close">(</span>m_value<span class="token punctuation brace-round brace-close brace-level-3" id="pair-87-open">)</span>
            std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>m_value <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-99-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-100-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-88-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-88-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-104-close">{</span>
    <span class="token keyword keyword-double">double</span> d <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-101-close">{</span> <span class="token number">1.2</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-101-open">}</span><span class="token punctuation">;</span>

    Storage s1 <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-102-close">{</span> d <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-102-open">}</span><span class="token punctuation">;</span> <span class="token comment">// ok</span>
    s1<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-89-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-89-open">)</span><span class="token punctuation">;</span>

    Storage s2 <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-103-close">{</span> <span class="token operator">&amp;</span>d <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-103-open">}</span><span class="token punctuation">;</span> <span class="token comment">// ok, copies d on heap</span>
    s2<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-90-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-90-open">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-104-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Using partial template class specialization to create separate pointer and
  non-pointer implementations of a class is extremely useful when you want a
  class to handle both differently, but in a way that’s completely transparent
  to the end-user.
</p>
<div class="prevnext">
  <div class="prevnext-inline">
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/chapter-26-summary-and-quiz/"
    >
      <div class="nav-button nav-button-next">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-right" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Next lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">26.x</span>Chapter 26 summary
            and quiz
          </div>
        </div>
      </div></a
    >
    <a class="nav-link" href="/">
      <div class="nav-button nav-button-index">
        <div class="nav-button-icon">
          <i class="fa fa-home" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Back to table of contents</div>
        </div>
      </div></a
    >
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/partial-template-specialization/"
    >
      <div class="nav-button nav-button-prev">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-left" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Previous lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">26.5</span>Partial template
            specialization
          </div>
        </div>
      </div></a
    >
  </div>
</div>
<div class="code-block code-block-10" style="margin: 8px 0; clear: both"></div>
