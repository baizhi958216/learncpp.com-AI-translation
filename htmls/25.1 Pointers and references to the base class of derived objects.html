<div
  class="code-block code-block-1"
  style="margin: 8px 8px 8px 0; float: left"
></div>
<p>
  In the previous chapter, you learned all about how to use inheritance to
  derive new classes from existing classes. In this chapter, we are going to
  focus on one of the most important and powerful aspects of inheritance --
  virtual functions.
</p>
<p>
  But before we discuss what virtual functions are, let’s first set the table
  for why we need them.
</p>
<p>
  In the chapter on
  <a
    href="https://www.learncpp.com/cpp-tutorial/113-order-of-construction-of-derived-classes/"
    >construction of derived classes</a
  >, you learned that when you create a derived class, it is composed of
  multiple parts: one part for each inherited class, and a part for itself.
</p>
<p>For example, here’s a simple case:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string_view&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Base</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-11-close">{</span>
<span class="token keyword keyword-protected">protected</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-6-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-6-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Base</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-0-close">(</span><span class="token keyword keyword-int">int</span> value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-0-open">)</span>
        <span class="token operator">:</span> m_value<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-7-close">{</span> value <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-7-open">}</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-8-close">{</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-8-open">}</span>

    std<span class="token double-colon punctuation">::</span>string_view <span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-1-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-1-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-9-close">{</span> <span class="token keyword keyword-return">return</span> <span class="token string">"Base"</span><span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-9-open">}</span>
    <span class="token keyword keyword-int">int</span> <span class="token function">getValue</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-2-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-2-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-10-close">{</span> <span class="token keyword keyword-return">return</span> m_value<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-10-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-11-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Derived</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Base</span></span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-16-close">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Derived</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-3-close">(</span><span class="token keyword keyword-int">int</span> value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-3-open">)</span>
        <span class="token operator">:</span> Base<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-12-close">{</span> value <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-12-open">}</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-13-close">{</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-13-open">}</span>

    std<span class="token double-colon punctuation">::</span>string_view <span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-4-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-4-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-14-close">{</span> <span class="token keyword keyword-return">return</span> <span class="token string">"Derived"</span><span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-14-open">}</span>
    <span class="token keyword keyword-int">int</span> <span class="token function">getValueDoubled</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-5-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-5-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-15-close">{</span> <span class="token keyword keyword-return">return</span> m_value <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-15-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-16-open">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  When we create a Derived object, it contains a Base part (which is constructed
  first), and a Derived part (which is constructed second). Remember that
  inheritance implies an is-a relationship between two classes. Since a Derived
  is-a Base, it is appropriate that Derived contain a Base part.
</p>
<div class="code-block code-block-2" style="margin: 8px 0; clear: both"></div>

<p><strong>Pointers, references, and derived classes</strong></p>
<p>
  It should be fairly intuitive that we can set Derived pointers and references
  to Derived objects:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-17-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-17-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-27-close">{</span>
    Derived derived<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-24-close">{</span> <span class="token number">5</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-24-open">}</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"derived is a "</span> <span class="token operator">&lt;&lt;</span> derived<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-18-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-18-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" and has value "</span> <span class="token operator">&lt;&lt;</span> derived<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-19-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-19-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    Derived<span class="token operator">&amp;</span> rDerived<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-25-close">{</span> derived <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-25-open">}</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"rDerived is a "</span> <span class="token operator">&lt;&lt;</span> rDerived<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-20-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-20-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" and has value "</span> <span class="token operator">&lt;&lt;</span> rDerived<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-21-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-21-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    Derived<span class="token operator">*</span> pDerived<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-26-close">{</span> <span class="token operator">&amp;</span>derived <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-26-open">}</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"pDerived is a "</span> <span class="token operator">&lt;&lt;</span> pDerived<span class="token operator">-&gt;</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-22-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-22-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" and has value "</span> <span class="token operator">&lt;&lt;</span> pDerived<span class="token operator">-&gt;</span><span class="token function">getValue</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-23-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-23-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-27-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>This produces the following output:</p>
<pre>
derived is a Derived and has value 5
rDerived is a Derived and has value 5
pDerived is a Derived and has value 5
</pre>
<p>
  However, since Derived has a Base part, a more interesting question is whether
  C++ will let us set a Base pointer or reference to a Derived object. It turns
  out, we can!
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_5_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_5"
        name="aswift_5"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3492911308&amp;adf=3147375949&amp;pi=t.aa~a.3048083739~i.26~rp.4&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751576314&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fpointers-and-references-to-the-base-class-of-derived-objects%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963594157&amp;bpp=1&amp;bdt=676&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600&amp;nras=2&amp;correlator=7797811608906&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=1580&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093234%2C42532524%2C95353386%2C95362655%2C95365226%2C95365234%2C95365112%2C95359266%2C95365119%2C95365797%2C31092548&amp;oid=2&amp;pvsid=5630774757522246&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=6&amp;uci=a!6&amp;btvi=1&amp;fsb=1&amp;dtd=11"
        data-google-container-id="a!6"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CPDQif3srI4DFdmS6QUdLskCAg"
      ></iframe></div
  ></ins>
</div>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-28-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-28-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-38-close">{</span>
    Derived derived<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-35-close">{</span> <span class="token number">5</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-35-open">}</span><span class="token punctuation">;</span>

    <span class="token comment">// These are both legal!</span>
    Base<span class="token operator">&amp;</span> rBase<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-36-close">{</span> derived <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-36-open">}</span><span class="token punctuation">;</span> <span class="token comment">// rBase is an lvalue reference (not an rvalue reference)</span>
    Base<span class="token operator">*</span> pBase<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-37-close">{</span> <span class="token operator">&amp;</span>derived <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-37-open">}</span><span class="token punctuation">;</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"derived is a "</span> <span class="token operator">&lt;&lt;</span> derived<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-29-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-29-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" and has value "</span> <span class="token operator">&lt;&lt;</span> derived<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-30-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-30-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"rBase is a "</span> <span class="token operator">&lt;&lt;</span> rBase<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-31-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-31-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" and has value "</span> <span class="token operator">&lt;&lt;</span> rBase<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-32-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-32-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"pBase is a "</span> <span class="token operator">&lt;&lt;</span> pBase<span class="token operator">-&gt;</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-33-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-33-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" and has value "</span> <span class="token operator">&lt;&lt;</span> pBase<span class="token operator">-&gt;</span><span class="token function">getValue</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-34-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-34-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-38-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>This produces the result:</p>
<pre>
derived is a Derived and has value 5
rBase is a Base and has value 5
pBase is a Base and has value 5
</pre>
<p>This result may not be quite what you were expecting at first!</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_6_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_6"
        name="aswift_6"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3492911308&amp;adf=291799184&amp;pi=t.aa~a.3048083739~i.34~rp.4&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751576314&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fpointers-and-references-to-the-base-class-of-derived-objects%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963594157&amp;bpp=1&amp;bdt=676&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280&amp;nras=3&amp;correlator=7797811608906&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=2343&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093234%2C42532524%2C95353386%2C95362655%2C95365226%2C95365234%2C95365112%2C95359266%2C95365119%2C95365797%2C31092548&amp;oid=2&amp;pvsid=5630774757522246&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=7&amp;uci=a!7&amp;btvi=2&amp;fsb=1&amp;dtd=13"
        data-google-container-id="a!7"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-google-query-id="CKTeif3srI4DFZWH6QUdq60DXA"
        data-load-complete="true"
      ></iframe></div
  ></ins>
</div>
<div class="code-block code-block-3" style="margin: 8px 0; clear: both"></div>

<p>
  It turns out that because rBase and pBase are a Base reference and pointer,
  they can only see members of Base (or any classes that Base inherited). So
  even though Derived::getName() shadows (hides) Base::getName() for Derived
  objects, the Base pointer/reference can not see Derived::getName().
  Consequently, they call Base::getName(), which is why rBase and pBase report
  that they are a Base rather than a Derived.
</p>
<p>
  Note that this also means it is not possible to call
  Derived::getValueDoubled() using rBase or pBase. They are unable to see
  anything in Derived.
</p>
<p>
  Here’s another slightly more complex example that we’ll build on in the next
  lesson:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string_view&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Animal</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-61-close">{</span>
<span class="token keyword keyword-protected">protected</span><span class="token operator">:</span>
    std<span class="token double-colon punctuation">::</span>string m_name<span class="token punctuation">;</span>

    <span class="token comment">// We're making this constructor protected because</span>
    <span class="token comment">// we don't want people creating Animal objects directly,</span>
    <span class="token comment">// but we still want derived classes to be able to use it.</span>
    <span class="token function">Animal</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-39-close">(</span>std<span class="token double-colon punctuation">::</span>string_view name<span class="token punctuation brace-round brace-close brace-level-2" id="pair-39-open">)</span>
        <span class="token operator">:</span> m_name<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-57-close">{</span> name <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-57-open">}</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-58-close">{</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-58-open">}</span>

    <span class="token comment">// To prevent slicing (covered later)</span>
    <span class="token function">Animal</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-40-close">(</span><span class="token keyword keyword-const">const</span> Animal<span class="token operator">&amp;</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-40-open">)</span> <span class="token operator">=</span> <span class="token keyword keyword-delete">delete</span><span class="token punctuation">;</span>
    Animal<span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">=</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-41-close">(</span><span class="token keyword keyword-const">const</span> Animal<span class="token operator">&amp;</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-41-open">)</span> <span class="token operator">=</span> <span class="token keyword keyword-delete">delete</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    std<span class="token double-colon punctuation">::</span>string_view <span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-42-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-42-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-59-close">{</span> <span class="token keyword keyword-return">return</span> m_name<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-59-open">}</span>
    std<span class="token double-colon punctuation">::</span>string_view <span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-43-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-43-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-60-close">{</span> <span class="token keyword keyword-return">return</span> <span class="token string">"???"</span><span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-60-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-61-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Cat</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Animal</span></span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-65-close">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Cat</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-44-close">(</span>std<span class="token double-colon punctuation">::</span>string_view name<span class="token punctuation brace-round brace-close brace-level-2" id="pair-44-open">)</span>
        <span class="token operator">:</span> Animal<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-62-close">{</span> name <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-62-open">}</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-63-close">{</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-63-open">}</span>

    std<span class="token double-colon punctuation">::</span>string_view <span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-45-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-45-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-64-close">{</span> <span class="token keyword keyword-return">return</span> <span class="token string">"Meow"</span><span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-64-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-65-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Dog</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Animal</span></span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-69-close">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Dog</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-46-close">(</span>std<span class="token double-colon punctuation">::</span>string_view name<span class="token punctuation brace-round brace-close brace-level-2" id="pair-46-open">)</span>
        <span class="token operator">:</span> Animal<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-66-close">{</span> name <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-66-open">}</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-67-close">{</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-67-open">}</span>

    std<span class="token double-colon punctuation">::</span>string_view <span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-47-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-47-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-68-close">{</span> <span class="token keyword keyword-return">return</span> <span class="token string">"Woof"</span><span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-68-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-69-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-48-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-48-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-73-close">{</span>
    <span class="token keyword keyword-const">const</span> Cat cat<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-70-close">{</span> <span class="token string">"Fred"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-70-open">}</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"cat is named "</span> <span class="token operator">&lt;&lt;</span> cat<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-49-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-49-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">", and it says "</span> <span class="token operator">&lt;&lt;</span> cat<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-50-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-50-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-const">const</span> Dog dog<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-71-close">{</span> <span class="token string">"Garbo"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-71-open">}</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"dog is named "</span> <span class="token operator">&lt;&lt;</span> dog<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-51-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-51-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">", and it says "</span> <span class="token operator">&lt;&lt;</span> dog<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-52-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-52-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-const">const</span> Animal<span class="token operator">*</span> pAnimal<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-72-close">{</span> <span class="token operator">&amp;</span>cat <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-72-open">}</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"pAnimal is named "</span> <span class="token operator">&lt;&lt;</span> pAnimal<span class="token operator">-&gt;</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-53-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-53-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">", and it says "</span> <span class="token operator">&lt;&lt;</span> pAnimal<span class="token operator">-&gt;</span><span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-54-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-54-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    pAnimal <span class="token operator">=</span> <span class="token operator">&amp;</span>dog<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"pAnimal is named "</span> <span class="token operator">&lt;&lt;</span> pAnimal<span class="token operator">-&gt;</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-55-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-55-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">", and it says "</span> <span class="token operator">&lt;&lt;</span> pAnimal<span class="token operator">-&gt;</span><span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-56-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-56-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-73-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>This produces the result:</p>
<pre>
cat is named Fred, and it says Meow
dog is named Garbo, and it says Woof
pAnimal is named Fred, and it says ???
pAnimal is named Garbo, and it says ???
</pre>
<p>
  We see the same issue here. Because pAnimal is an Animal pointer, it can only
  see the Animal portion of the class. Consequently,
  <code>pAnimal-&gt;speak()</code> calls Animal::speak() rather than the
  Dog::Speak() or Cat::speak() function.
</p>
<p><strong>Use for pointers and references to base classes</strong></p>
<div class="code-block code-block-4" style="margin: 8px 0; clear: both"></div>

<p>
  Now you might be saying, “The above examples seem kind of silly. Why would I
  set a pointer or reference to the base class of a derived object when I can
  just use the derived object?” It turns out that there are quite a few good
  reasons.
</p>
<p>
  First, let’s say you wanted to write a function that printed an animal’s name
  and sound. Without using a pointer to a base class, you’d have to write it
  using overloaded functions, like this:
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_7_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_7"
        name="aswift_7"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3492911308&amp;adf=404562635&amp;pi=t.aa~a.3048083739~i.56~rp.4&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751576314&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fpointers-and-references-to-the-base-class-of-derived-objects%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963594159&amp;bpp=1&amp;bdt=678&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280&amp;nras=4&amp;correlator=7797811608906&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3932&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093234%2C42532524%2C95353386%2C95362655%2C95365226%2C95365234%2C95365112%2C95359266%2C95365119%2C95365797%2C31092548&amp;oid=2&amp;pvsid=5630774757522246&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=8&amp;uci=a!8&amp;btvi=3&amp;fsb=1&amp;dtd=163"
        data-google-container-id="a!8"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CK-Ik_3srI4DFUaG6QUdaE8jxQ"
      ></iframe></div
  ></ins>
</div>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-void">void</span> <span class="token function">report</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-74-close">(</span><span class="token keyword keyword-const">const</span> Cat<span class="token operator">&amp;</span> cat<span class="token punctuation brace-round brace-close brace-level-1" id="pair-74-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-80-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> cat<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-75-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-75-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" says "</span> <span class="token operator">&lt;&lt;</span> cat<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-76-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-76-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-80-open">}</span>

<span class="token keyword keyword-void">void</span> <span class="token function">report</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-77-close">(</span><span class="token keyword keyword-const">const</span> Dog<span class="token operator">&amp;</span> dog<span class="token punctuation brace-round brace-close brace-level-1" id="pair-77-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-81-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> dog<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-78-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-78-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" says "</span> <span class="token operator">&lt;&lt;</span> dog<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-79-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-79-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-81-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Not too difficult, but consider what would happen if we had 30 different
  animal types instead of 2. You’d have to write 30 almost identical functions!
  Plus, if you ever added a new type of animal, you’d have to write a new
  function for that one too. This is a huge waste of time considering the only
  real difference is the type of the parameter.
</p>
<p>
  However, because Cat and Dog are derived from Animal, Cat and Dog have an
  Animal part. Therefore, it makes sense that we should be able to do something
  like this:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-void">void</span> <span class="token function">report</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-82-close">(</span><span class="token keyword keyword-const">const</span> Animal<span class="token operator">&amp;</span> rAnimal<span class="token punctuation brace-round brace-close brace-level-1" id="pair-82-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-85-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> rAnimal<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-83-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-83-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" says "</span> <span class="token operator">&lt;&lt;</span> rAnimal<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-84-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-84-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-85-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  This would let us pass in any class derived from Animal, even ones that we
  created after we wrote the function! Instead of one function per derived
  class, we get one function that works with all classes derived from Animal!
</p>
<div class="code-block code-block-5" style="margin: 8px 0; clear: both"></div>

<p>
  The problem is, of course, that because rAnimal is an Animal reference,
  <code>rAnimal.speak()</code> will call Animal::speak() instead of the derived
  version of speak().
</p>
<div class="cpp-note cpp-lightgraybackground">
  <p class="cpp-note-title cpp-bottomline">As an aside…</p>
  <p>
    We could also use a template function to reduce the number of overloaded
    functions we need to write:
  </p>
  <div class="code-toolbar">
    <pre
      class="line-numbers language-cpp"
      tabindex="0"
    ><code class="match-braces language-cpp"><span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-void">void</span> <span class="token function">report</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-86-close">(</span><span class="token keyword keyword-const">const</span> T<span class="token operator">&amp;</span> rAnimal<span class="token punctuation brace-round brace-close brace-level-1" id="pair-86-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-89-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> rAnimal<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-87-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-87-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" says "</span> <span class="token operator">&lt;&lt;</span> rAnimal<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-88-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-88-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-89-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
    <div class="toolbar">
      <div class="toolbar-item">
        <button
          class="copy-to-clipboard-button"
          type="button"
          data-copy-state="copy"
        >
          <span>Copy</span>
        </button>
      </div>
    </div>
  </div>
  <p>And while this works, it has its own issues:</p>
  <ol start="1">
    <li>
      It’s not clear what type <code>T</code> is supposed to be, as we’ve lost
      the documentation that <code>T</code> is intended to be an
      <code>Animal</code>.
    </li>
    <li>
      This function does not enforce that <code>T</code> is an
      <code>Animal</code>. Rather, it will accept an object of any type that
      contains a <code>getName()</code> and <code>speak()</code> member
      function, whether that makes sense or not.
    </li>
  </ol>
</div>
<p>
  Second, let’s say you had 3 cats and 3 dogs that you wanted to keep in an
  array for easy access. Because arrays can only hold objects of one type,
  without a pointer or reference to a base class, you’d have to create a
  different array for each derived type, like this:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;array&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token comment">// Cat and Dog from the example above</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-90-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-90-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-111-close">{</span>
    <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-auto">auto</span><span class="token operator">&amp;</span> cats<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-103-close">{</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">to_array</span><span class="token generic class-name"><span class="token operator">&lt;</span>Cat<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-91-close">(</span><span class="token punctuation brace-curly brace-open brace-level-4" id="pair-102-close">{</span><span class="token punctuation brace-curly brace-open brace-level-5" id="pair-99-close">{</span> <span class="token string">"Fred"</span> <span class="token punctuation brace-curly brace-close brace-level-5" id="pair-99-open">}</span><span class="token punctuation">,</span> <span class="token punctuation brace-curly brace-open brace-level-5" id="pair-100-close">{</span> <span class="token string">"Misty"</span> <span class="token punctuation brace-curly brace-close brace-level-5" id="pair-100-open">}</span><span class="token punctuation">,</span> <span class="token punctuation brace-curly brace-open brace-level-5" id="pair-101-close">{</span> <span class="token string">"Zeke"</span> <span class="token punctuation brace-curly brace-close brace-level-5" id="pair-101-open">}</span><span class="token punctuation brace-curly brace-close brace-level-4" id="pair-102-open">}</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-91-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-103-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-auto">auto</span><span class="token operator">&amp;</span> dogs<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-108-close">{</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">to_array</span><span class="token generic class-name"><span class="token operator">&lt;</span>Dog<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-92-close">(</span><span class="token punctuation brace-curly brace-open brace-level-4" id="pair-107-close">{</span><span class="token punctuation brace-curly brace-open brace-level-5" id="pair-104-close">{</span> <span class="token string">"Garbo"</span> <span class="token punctuation brace-curly brace-close brace-level-5" id="pair-104-open">}</span><span class="token punctuation">,</span> <span class="token punctuation brace-curly brace-open brace-level-5" id="pair-105-close">{</span> <span class="token string">"Pooky"</span> <span class="token punctuation brace-curly brace-close brace-level-5" id="pair-105-open">}</span><span class="token punctuation">,</span> <span class="token punctuation brace-curly brace-open brace-level-5" id="pair-106-close">{</span> <span class="token string">"Truffle"</span> <span class="token punctuation brace-curly brace-close brace-level-5" id="pair-106-open">}</span><span class="token punctuation brace-curly brace-close brace-level-4" id="pair-107-open">}</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-92-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-108-open">}</span><span class="token punctuation">;</span>

    <span class="token comment">// Before C++20</span>
    <span class="token comment">// const std::array&lt;Cat, 3&gt; cats{{ { "Fred" }, { "Misty" }, { "Zeke" } }};</span>
    <span class="token comment">// const std::array&lt;Dog, 3&gt; dogs{{ { "Garbo" }, { "Pooky" }, { "Truffle" } }};</span>

    <span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-93-close">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-auto">auto</span><span class="token operator">&amp;</span> cat <span class="token operator">:</span> cats<span class="token punctuation brace-round brace-close brace-level-2" id="pair-93-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-109-close">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> cat<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-94-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-94-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" says "</span> <span class="token operator">&lt;&lt;</span> cat<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-95-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-95-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-109-open">}</span>

    <span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-96-close">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-auto">auto</span><span class="token operator">&amp;</span> dog <span class="token operator">:</span> dogs<span class="token punctuation brace-round brace-close brace-level-2" id="pair-96-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-110-close">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> dog<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-97-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-97-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" says "</span> <span class="token operator">&lt;&lt;</span> dog<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-98-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-98-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-110-open">}</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-111-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_8_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<p>
  Now, consider what would happen if you had 30 different types of animals.
  You’d need 30 arrays, one for each type of animal!
</p>
<p>
  However, because both Cat and Dog are derived from Animal, it makes sense that
  we should be able to do something like this:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;array&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token comment">// Cat and Dog from the example above</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-112-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-112-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-126-close">{</span>
    <span class="token keyword keyword-const">const</span> Cat fred<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-117-close">{</span> <span class="token string">"Fred"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-117-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> Cat misty<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-118-close">{</span> <span class="token string">"Misty"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-118-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> Cat zeke<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-119-close">{</span> <span class="token string">"Zeke"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-119-open">}</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-const">const</span> Dog garbo<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-120-close">{</span> <span class="token string">"Garbo"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-120-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> Dog pooky<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-121-close">{</span> <span class="token string">"Pooky"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-121-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> Dog truffle<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-122-close">{</span> <span class="token string">"Truffle"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-122-open">}</span><span class="token punctuation">;</span>

    <span class="token comment">// Set up an array of pointers to animals, and set those pointers to our Cat and Dog objects</span>
    <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-auto">auto</span> animals<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-124-close">{</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">to_array</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword keyword-const">const</span> Animal<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-113-close">(</span><span class="token punctuation brace-curly brace-open brace-level-4" id="pair-123-close">{</span><span class="token operator">&amp;</span>fred<span class="token punctuation">,</span> <span class="token operator">&amp;</span>garbo<span class="token punctuation">,</span> <span class="token operator">&amp;</span>misty<span class="token punctuation">,</span> <span class="token operator">&amp;</span>pooky<span class="token punctuation">,</span> <span class="token operator">&amp;</span>truffle<span class="token punctuation">,</span> <span class="token operator">&amp;</span>zeke <span class="token punctuation brace-curly brace-close brace-level-4" id="pair-123-open">}</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-113-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-124-open">}</span><span class="token punctuation">;</span>

    <span class="token comment">// Before C++20, with the array size being explicitly specified</span>
    <span class="token comment">// const std::array&lt;const Animal*, 6&gt; animals{ &amp;fred, &amp;garbo, &amp;misty, &amp;pooky, &amp;truffle, &amp;zeke };</span>

    <span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-114-close">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-auto">auto</span> animal <span class="token operator">:</span> animals<span class="token punctuation brace-round brace-close brace-level-2" id="pair-114-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-125-close">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> animal<span class="token operator">-&gt;</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-115-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-115-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" says "</span> <span class="token operator">&lt;&lt;</span> animal<span class="token operator">-&gt;</span><span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-116-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-116-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-125-open">}</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-126-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  While this compiles and executes, unfortunately the fact that each element of
  array “animals” is a pointer to an Animal means that
  <code>animal-&gt;speak()</code> will call Animal::speak() instead of the
  derived class version of speak() that we want. The output is
</p>
<div class="code-block code-block-6" style="margin: 8px 0; clear: both"></div>

<pre>
Fred says ???
Garbo says ???
Misty says ???
Pooky says ???
Truffle says ???
Zeke says ???
</pre>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_9_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<p>
  Although both of these techniques could save us a lot of time and energy, they
  have the same problem. The pointer or reference to the base class calls the
  base version of the function rather than the derived version. If only there
  was some way to make those base pointers call the derived version of a
  function instead of the base version…
</p>
<p>Want to take a guess what virtual functions are for? :)</p>
<p><strong>Quiz time</strong></p>
<ol start="1">
  <li>
    Our Animal/Cat/Dog example above doesn’t work like we want because a
    reference or pointer to an Animal can’t access the derived version of
    speak() needed to return the right value for the Cat or Dog. One way to work
    around this issue would be to make the data returned by the speak() function
    accessible as part of the Animal base class (much like the Animal’s name is
    accessible via member m_name).
  </li>
</ol>
<p>
  Update the Animal, Cat, and Dog classes in the lesson above by adding a new
  member to Animal named m_speak. Initialize it appropriately. The following
  program should work properly:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;array&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-127-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-127-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-141-close">{</span>
    <span class="token keyword keyword-const">const</span> Cat fred<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-132-close">{</span> <span class="token string">"Fred"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-132-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> Cat misty<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-133-close">{</span> <span class="token string">"Misty"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-133-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> Cat zeke<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-134-close">{</span> <span class="token string">"Zeke"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-134-open">}</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-const">const</span> Dog garbo<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-135-close">{</span> <span class="token string">"Garbo"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-135-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> Dog pooky<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-136-close">{</span> <span class="token string">"Pooky"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-136-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> Dog truffle<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-137-close">{</span> <span class="token string">"Truffle"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-137-open">}</span><span class="token punctuation">;</span>

    <span class="token comment">// Set up an array of pointers to animals, and set those pointers to our Cat and Dog objects</span>
    <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-auto">auto</span> animals<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-139-close">{</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">to_array</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword keyword-const">const</span> Animal<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-128-close">(</span><span class="token punctuation brace-curly brace-open brace-level-4" id="pair-138-close">{</span> <span class="token operator">&amp;</span>fred<span class="token punctuation">,</span> <span class="token operator">&amp;</span>garbo<span class="token punctuation">,</span> <span class="token operator">&amp;</span>misty<span class="token punctuation">,</span> <span class="token operator">&amp;</span>pooky<span class="token punctuation">,</span> <span class="token operator">&amp;</span>truffle<span class="token punctuation">,</span> <span class="token operator">&amp;</span>zeke <span class="token punctuation brace-curly brace-close brace-level-4" id="pair-138-open">}</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-128-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-139-open">}</span><span class="token punctuation">;</span>

    <span class="token comment">// Before C++20, with the array size being explicitly specified</span>
    <span class="token comment">// const std::array&lt;const Animal*, 6&gt; animals{ &amp;fred, &amp;garbo, &amp;misty, &amp;pooky, &amp;truffle, &amp;zeke };</span>

    <span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-129-close">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-auto">auto</span> animal <span class="token operator">:</span> animals<span class="token punctuation brace-round brace-close brace-level-2" id="pair-129-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-140-close">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> animal<span class="token operator">-&gt;</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-130-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-130-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" says "</span> <span class="token operator">&lt;&lt;</span> animal<span class="token operator">-&gt;</span><span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-131-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-131-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-140-open">}</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-141-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  <a
    class="solution_link_show"
    href="javascript:void(0)"
    onclick="cppSolutionToggle(document.getElementById('cpp_solution_id_0'), this, 'Show Solution', 'Hide Solution')"
    >Show Solution</a
  >
</p>
<div class="wpsolution" id="cpp_solution_id_0" style="display: none">
  <div class="code-toolbar">
    <pre
      class="line-numbers language-cpp"
      tabindex="0"
    ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;array&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string_view&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Animal</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-159-close">{</span>
<span class="token keyword keyword-protected">protected</span><span class="token operator">:</span>
    std<span class="token double-colon punctuation">::</span>string m_name<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>string m_speak<span class="token punctuation">;</span>

    <span class="token comment">// We're making this constructor protected because</span>
    <span class="token comment">// we don't want people creating Animal objects directly,</span>
    <span class="token comment">// but we still want derived classes to be able to use it.</span>
    <span class="token function">Animal</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-142-close">(</span>std<span class="token double-colon punctuation">::</span>string_view name<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>string_view speak<span class="token punctuation brace-round brace-close brace-level-2" id="pair-142-open">)</span>
        <span class="token operator">:</span> m_name<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-154-close">{</span> name <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-154-open">}</span><span class="token punctuation">,</span> m_speak<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-155-close">{</span> speak <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-155-open">}</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-156-close">{</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-156-open">}</span>

    <span class="token comment">// To prevent slicing (covered later)</span>
    <span class="token function">Animal</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-143-close">(</span><span class="token keyword keyword-const">const</span> Animal<span class="token operator">&amp;</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-143-open">)</span> <span class="token operator">=</span> <span class="token keyword keyword-delete">delete</span><span class="token punctuation">;</span>
    Animal<span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token operator">=</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-144-close">(</span><span class="token keyword keyword-const">const</span> Animal<span class="token operator">&amp;</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-144-open">)</span> <span class="token operator">=</span> <span class="token keyword keyword-delete">delete</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    std<span class="token double-colon punctuation">::</span>string_view <span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-145-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-145-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-157-close">{</span> <span class="token keyword keyword-return">return</span> m_name<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-157-open">}</span>
    std<span class="token double-colon punctuation">::</span>string_view <span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-146-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-146-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-158-close">{</span> <span class="token keyword keyword-return">return</span> m_speak<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-158-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-159-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Cat</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Animal</span></span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-162-close">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Cat</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-147-close">(</span>std<span class="token double-colon punctuation">::</span>string_view name<span class="token punctuation brace-round brace-close brace-level-2" id="pair-147-open">)</span>
        <span class="token operator">:</span> Animal<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-160-close">{</span> name<span class="token punctuation">,</span> <span class="token string">"Meow"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-160-open">}</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-161-close">{</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-161-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-162-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Dog</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Animal</span></span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-165-close">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Dog</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-148-close">(</span>std<span class="token double-colon punctuation">::</span>string_view name<span class="token punctuation brace-round brace-close brace-level-2" id="pair-148-open">)</span>
        <span class="token operator">:</span> Animal<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-163-close">{</span> name<span class="token punctuation">,</span> <span class="token string">"Woof"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-163-open">}</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-164-close">{</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-164-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-165-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-149-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-149-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-175-close">{</span>
    <span class="token keyword keyword-const">const</span> Cat fred<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-166-close">{</span> <span class="token string">"Fred"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-166-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> Cat misty<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-167-close">{</span> <span class="token string">"Misty"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-167-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> Cat zeke<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-168-close">{</span> <span class="token string">"Zeke"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-168-open">}</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-const">const</span> Dog garbo<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-169-close">{</span> <span class="token string">"Garbo"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-169-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> Dog pooky<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-170-close">{</span> <span class="token string">"Pooky"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-170-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> Dog truffle<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-171-close">{</span> <span class="token string">"Truffle"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-171-open">}</span><span class="token punctuation">;</span>

    <span class="token comment">// Set up an array of pointers to animals, and set those pointers to our Cat and Dog objects</span>
    <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-auto">auto</span> animals<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-173-close">{</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">to_array</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword keyword-const">const</span> Animal<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-150-close">(</span><span class="token punctuation brace-curly brace-open brace-level-4" id="pair-172-close">{</span> <span class="token operator">&amp;</span>fred<span class="token punctuation">,</span> <span class="token operator">&amp;</span>garbo<span class="token punctuation">,</span> <span class="token operator">&amp;</span>misty<span class="token punctuation">,</span> <span class="token operator">&amp;</span>pooky<span class="token punctuation">,</span> <span class="token operator">&amp;</span>truffle<span class="token punctuation">,</span> <span class="token operator">&amp;</span>zeke <span class="token punctuation brace-curly brace-close brace-level-4" id="pair-172-open">}</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-150-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-173-open">}</span><span class="token punctuation">;</span>

    <span class="token comment">// Before C++20, with the array size being explicitly specified</span>
    <span class="token comment">// const std::array&lt;const Animal*, 6&gt; animals{ &amp;fred, &amp;garbo, &amp;misty, &amp;pooky, &amp;truffle, &amp;zeke };</span>

    <span class="token comment">// animal is not a reference, because we're looping over pointers</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-151-close">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-auto">auto</span> animal <span class="token operator">:</span> animals<span class="token punctuation brace-round brace-close brace-level-2" id="pair-151-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-174-close">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> animal<span class="token operator">-&gt;</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-152-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-152-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" says "</span> <span class="token operator">&lt;&lt;</span> animal<span class="token operator">-&gt;</span><span class="token function">speak</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-153-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-153-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-174-open">}</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-175-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
    <div class="toolbar">
      <div class="toolbar-item">
        <button
          class="copy-to-clipboard-button"
          type="button"
          data-copy-state="copy"
        >
          <span>Copy</span>
        </button>
      </div>
    </div>
  </div>
</div>
<ol start="2">
  <li>Why is the above solution non-optimal?</li>
</ol>
<p>
  Hint: Think about the future state of Cat and Dog where we want to
  differentiate Cats and Dogs in more ways.<br />
  Hint: Think about the ways in which having a member that needs to be set at
  initialization limits you.
</p>
<p>
  <a
    class="solution_link_show"
    href="javascript:void(0)"
    onclick="cppSolutionToggle(document.getElementById('cpp_solution_id_1'), this, 'Show Solution', 'Hide Solution')"
    >Show Solution</a
  >
</p>
<div class="wpsolution" id="cpp_solution_id_1" style="display: none">
  The current solution is non-optimal for a number of reasons.
  <p></p>
  <p>
    First, we need to add a member to Animal for each way we want to
    differentiate Cat and Dog. Over time, our Animal class could become quite
    large memory-wise, and complicated!
  </p>
  <p>
    Second, this solution only works if the base class member can be determined
    at initialization time. For example, if speak() returned a randomized result
    for each Animal (e.g. calling Dog::speak() could return “woof”, “arf”, or
    “yip”), this kind of solution starts to get awkward and fall apart.
  </p>
  <p>
    Third, because speak() is a member of Animal, speak() will have the same
    behavior for Cats and Dogs (that is, it will always return m_speak). If we
    wanted <code>speak()</code> to have different behavior for Cats and Dogs
    (e.g. have Dogs return a random sound), we’d have to put all that extra
    logic in Animal, which makes Animal even more complex.
  </p>
</div>
<div class="prevnext">
  <div class="prevnext-inline">
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/virtual-functions/"
    >
      <div class="nav-button nav-button-next">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-right" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Next lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">25.2</span>Virtual functions
            and polymorphism
          </div>
        </div>
      </div></a
    >
    <a class="nav-link" href="/">
      <div class="nav-button nav-button-index">
        <div class="nav-button-icon">
          <i class="fa fa-home" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Back to table of contents</div>
        </div>
      </div></a
    >
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/chapter-24-summary-and-quiz/"
    >
      <div class="nav-button nav-button-prev">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-left" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Previous lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">24.x</span>Chapter 24 summary
            and quiz
          </div>
        </div>
      </div></a
    >
  </div>
</div>
<div class="code-block code-block-10" style="margin: 8px 0; clear: both"></div>
