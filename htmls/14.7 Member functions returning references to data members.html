<div
  class="code-block code-block-1"
  style="margin: 8px 8px 8px 0; float: left"
></div>
<p>
  In lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/return-by-reference-and-return-by-address/"
    >12.12 -- Return by reference and return by address</a
  >, we covered return by reference. In particular, we noted, “The object being
  returned by reference must exist after the function returns”. This means we
  should not return local variables by reference, as the reference will be left
  dangling after the local variable is destroyed. However, it is generally okay
  to return by reference either function parameters passed by reference, or
  variables with static duration (either static local variables or global
  variables), as they will generally not be destroyed after the function
  returns.
</p>
<p>For example:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token comment">// Takes two std::string objects, returns the one that comes first alphabetically</span>
<span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> <span class="token function">firstAlphabetical</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-0-close">(</span><span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> a<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> b<span class="token punctuation brace-round brace-close brace-level-1" id="pair-0-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-4-close">{</span>
	<span class="token keyword keyword-return">return</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-1-close">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation brace-round brace-close brace-level-2" id="pair-1-open">)</span> <span class="token operator">?</span> a <span class="token operator">:</span> b<span class="token punctuation">;</span> <span class="token comment">// We can use operator&lt; on std::string to determine which comes first alphabetically</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-4-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-2-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-2-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-7-close">{</span>
	std<span class="token double-colon punctuation">::</span>string hello <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-5-close">{</span> <span class="token string">"Hello"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-5-open">}</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string world <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-6-close">{</span> <span class="token string">"World"</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-6-open">}</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">firstAlphabetical</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-3-close">(</span>hello<span class="token punctuation">,</span> world<span class="token punctuation brace-round brace-close brace-level-2" id="pair-3-open">)</span><span class="token punctuation">;</span> <span class="token comment">// either hello or world will be returned by reference</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-7-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Member functions can also return by reference, and they follow the same rules
  for when it is safe to return by reference as non-member functions. However,
  member functions have one additional case we need to discuss: member functions
  that return data members by reference.
</p>
<p>
  This is most commonly seen with getter access functions, so we’ll illustrate
  this topic using getter member functions. But note that this topic applies to
  any member function returning a reference to a data member.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Returning data members by value can be expensive
</p>
<p>Consider the following example:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Employee</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-16-close">{</span>
	std<span class="token double-colon punctuation">::</span>string m_name<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-13-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-13-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
	<span class="token keyword keyword-void">void</span> <span class="token function">setName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-8-close">(</span>std<span class="token double-colon punctuation">::</span>string_view name<span class="token punctuation brace-round brace-close brace-level-2" id="pair-8-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-14-close">{</span> m_name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-14-open">}</span>
	std<span class="token double-colon punctuation">::</span>string <span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-9-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-9-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-15-close">{</span> <span class="token keyword keyword-return">return</span> m_name<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-15-open">}</span> <span class="token comment">//  getter returns by value</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-16-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-10-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-10-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-18-close">{</span>
	Employee joe<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-17-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-17-open">}</span><span class="token punctuation">;</span>
	joe<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-11-close">(</span><span class="token string">"Joe"</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-11-open">)</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> joe<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-12-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-12-open">)</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-18-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In this example, the <code>getName()</code> access function returns
  <code>std::string m_name</code> by value.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_5_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_5"
        name="aswift_5"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=776668206&amp;adf=2032543435&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1750719163&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fmember-functions-returning-references-to-data-members%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751962933440&amp;bpp=1&amp;bdt=938&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600&amp;nras=2&amp;correlator=4479517652995&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=1381&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C31093273%2C95353386%2C95362656%2C95365226%2C95365235%2C95344787%2C95359265%2C95365116%2C95365798&amp;oid=2&amp;pvsid=6633029281879700&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=6&amp;uci=a!6&amp;btvi=1&amp;fsb=1&amp;dtd=17"
        data-google-container-id="a!6"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CK7_gsLqrI4DFYxbDwIdyoAoDA"
      ></iframe></div
  ></ins>
</div>
<div class="code-block code-block-2" style="margin: 8px 0; clear: both"></div>

<p>
  While this is the safest thing to do, it also means that an expensive copy of
  <code>m_name</code> will be made every time <code>getName()</code> is called.
  Since access functions tend to be called a lot, this is generally not the best
  choice.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Returning data members by lvalue reference
</p>
<p>
  Member functions can also return data members by (const) lvalue reference.
</p>
<p>
  Data members have the same lifetime as the object containing them. Since
  member functions are always called on an object, and that object must exist in
  the scope of the caller, it is generally safe for a member function to return
  a data member by (const) lvalue reference (as the member being returned by
  reference will still exist in the scope of the caller when the function
  returns).
</p>
<p>
  Let’s update the example above so that <code>getName()</code> returns
  <code>m_name</code> by const lvalue reference:
</p>
<div class="code-block code-block-3" style="margin: 8px 0; clear: both"></div>

<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Employee</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-27-close">{</span>
	std<span class="token double-colon punctuation">::</span>string m_name<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-24-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-24-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
	<span class="token keyword keyword-void">void</span> <span class="token function">setName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-19-close">(</span>std<span class="token double-colon punctuation">::</span>string_view name<span class="token punctuation brace-round brace-close brace-level-2" id="pair-19-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-25-close">{</span> m_name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-25-open">}</span>
	<span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> <span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-20-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-20-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-26-close">{</span> <span class="token keyword keyword-return">return</span> m_name<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-26-open">}</span> <span class="token comment">//  getter returns by const reference</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-27-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-21-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-21-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-29-close">{</span>
	Employee joe<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-28-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-28-open">}</span><span class="token punctuation">;</span> <span class="token comment">// joe exists until end of function</span>
	joe<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-22-close">(</span><span class="token string">"Joe"</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-22-open">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> joe<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-23-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-23-open">)</span><span class="token punctuation">;</span> <span class="token comment">// returns joe.m_name by reference</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-29-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Now when <code>joe.getName()</code> is invoked, <code>joe.m_name</code> is
  returned by reference to the caller, avoiding having to make a copy. The
  caller then uses this reference to print <code>joe.m_name</code> to the
  console.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_6_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_6"
        name="aswift_6"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=776668206&amp;adf=1578682972&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1750719163&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fmember-functions-returning-references-to-data-members%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751962933440&amp;bpp=1&amp;bdt=938&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280&amp;nras=3&amp;correlator=4479517652995&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=2359&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C31093273%2C95353386%2C95362656%2C95365226%2C95365235%2C95344787%2C95359265%2C95365116%2C95365798&amp;oid=2&amp;pvsid=6633029281879700&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=7&amp;uci=a!7&amp;btvi=2&amp;fsb=1&amp;dtd=18"
        data-google-container-id="a!7"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-google-query-id="COmhg8LqrI4DFV1gDwId97YJrg"
        data-load-complete="true"
      ></iframe></div
  ></ins>
</div>
<p>
  Because <code>joe</code> exists in the scope of the caller until the end of
  the <code>main()</code> function, the reference to <code>joe.m_name</code> is
  also valid for the same duration.
</p>
<div class="cpp-note cpp-lightbluebackground">
  <p class="cpp-note-title cpp-bottomline">Key insight</p>
  <p>
    It is okay to return a (const) lvalue reference to a data member. The
    implicit object (containing the data member) still exists in the scope of
    the caller after the function returns, so any returned references will be
    valid.
  </p>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  The return type of a member function returning a reference to a data member
  should match the data member’s type
</p>
<p>
  In general, the return type of a member function returning by reference should
  match the type of the data member being returned. In the above example,
  <code>m_name</code> is of type <code>std::string</code>, so
  <code>getName()</code> returns <code>const std::string&amp;</code>.
</p>
<p>
  Returning a <code>std::string_view</code> would require a temporary
  <code>std::string_view</code> to be created and returned every time the
  function was called. That’s needlessly inefficient. If the caller wants a
  <code>std::string_view</code>, they can do the conversion themselves.
</p>
<div class="code-block code-block-4" style="margin: 8px 0; clear: both"></div>

<div class="cpp-note cpp-lightgreenbackground" style="height: auto !important">
  <p class="cpp-note-title cpp-bottomline">Best practice</p>
  <div
    class="google-auto-placed ap_container"
    style="width: 100%; height: auto; clear: both; text-align: center"
  >
    <ins
      data-ad-format="auto"
      class="adsbygoogle adsbygoogle-noablate"
      data-ad-client="ca-pub-0588844875925051"
      data-adsbygoogle-status="done"
      style="
        display: block;
        margin: auto;
        background-color: transparent;
        height: 0px;
      "
      data-ad-status="unfilled"
      ><div
        id="aswift_7_host"
        style="
          border: none;
          height: 0px;
          width: 995px;
          margin: 0px;
          padding: 0px;
          position: relative;
          visibility: visible;
          background-color: transparent;
          display: inline-block;
          overflow: hidden;
          opacity: 0;
        "
      >
        <iframe
          id="aswift_7"
          name="aswift_7"
          browsingtopics="true"
          style="
            left: 0px;
            position: absolute;
            top: 0px;
            border: 0px;
            width: 995px;
            height: 0px;
            min-height: auto;
            max-height: none;
            min-width: auto;
            max-width: none;
          "
          sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
          width="995"
          height="0"
          frameborder="0"
          marginwidth="0"
          marginheight="0"
          vspace="0"
          hspace="0"
          allowtransparency="true"
          scrolling="no"
          allow="attribution-reporting; run-ad-auction"
          src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3795373264&amp;adf=2313908452&amp;w=995&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1750719163&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=995x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fmember-functions-returning-references-to-data-members%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=994&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751962933440&amp;bpp=1&amp;bdt=937&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280&amp;nras=4&amp;correlator=4479517652995&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=43&amp;ady=3034&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C31093273%2C95353386%2C95362656%2C95365226%2C95365235%2C95344787%2C95359265%2C95365116%2C95365798&amp;oid=2&amp;pvsid=6633029281879700&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=8&amp;uci=a!8&amp;btvi=3&amp;fsb=1&amp;dtd=19"
          data-google-container-id="a!8"
          tabindex="0"
          title="Advertisement"
          aria-label="Advertisement"
          data-load-complete="true"
          data-google-query-id="CMfBg8LqrI4DFTdfDwIdn1sAvA"
        ></iframe></div
    ></ins>
  </div>
  <p>
    A member function returning a reference should return a reference of the
    same type as the data member being returned, to avoid unnecessary
    conversions.
  </p>
</div>
<p>
  For getters, using <code>auto</code> to have the compiler deduce the return
  type from the member being returned is a useful way to ensure that no
  conversions occur:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Employee</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-38-close">{</span>
	std<span class="token double-colon punctuation">::</span>string m_name<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-35-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-35-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
	<span class="token keyword keyword-void">void</span> <span class="token function">setName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-30-close">(</span>std<span class="token double-colon punctuation">::</span>string_view name<span class="token punctuation brace-round brace-close brace-level-2" id="pair-30-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-36-close">{</span> m_name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-36-open">}</span>
	<span class="token keyword keyword-const">const</span> <span class="token keyword keyword-auto">auto</span><span class="token operator">&amp;</span> <span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-31-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-31-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-37-close">{</span> <span class="token keyword keyword-return">return</span> m_name<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-37-open">}</span> <span class="token comment">// uses `auto` to deduce return type from m_name</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-38-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-32-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-32-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-40-close">{</span>
	Employee joe<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-39-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-39-open">}</span><span class="token punctuation">;</span> <span class="token comment">// joe exists until end of function</span>
	joe<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-33-close">(</span><span class="token string">"Joe"</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-33-open">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> joe<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-34-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-34-open">)</span><span class="token punctuation">;</span> <span class="token comment">// returns joe.m_name by reference</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-40-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div class="cpp-note cpp-lightgraybackground">
  <p class="cpp-note-title cpp-bottomline">Related content</p>
  <p>
    We cover <code>auto</code> return types in lesson
    <a
      href="https://www.learncpp.com/cpp-tutorial/type-deduction-for-functions/"
      >10.9 -- Type deduction for functions</a
    >.
  </p>
</div>
<p>
  However, using an <code>auto</code> return type obscures the return type of
  the getter from a documentation perspective. For example:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-auto">auto</span><span class="token operator">&amp;</span> <span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-41-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-41-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-1" id="pair-42-close">{</span> <span class="token keyword keyword-return">return</span> m_name<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-1" id="pair-42-open">}</span> <span class="token comment">// uses `auto` to deduce return type from m_name</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  It’s unclear what kind of string this function actually returns (it could be a
  <code>std::string</code>, <code>std::string_view</code>,
  <code>C-style string</code>, or something else entirely!).
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_8_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_8"
        name="aswift_8"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=776668206&amp;adf=388096209&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1750719163&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fmember-functions-returning-references-to-data-members%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751962933440&amp;bpp=1&amp;bdt=938&amp;idt=1&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C995x280&amp;nras=5&amp;correlator=4479517652995&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=4013&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C31093273%2C95353386%2C95362656%2C95365226%2C95365235%2C95344787%2C95359265%2C95365116%2C95365798&amp;oid=2&amp;pvsid=6633029281879700&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=9&amp;uci=a!9&amp;btvi=4&amp;fsb=1&amp;dtd=20"
        data-google-container-id="a!9"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CPL7g8LqrI4DFVtbDwId7SkV1Q"
      ></iframe></div
  ></ins>
</div>
<p>For this reason, we’ll generally prefer explicit return types.</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Rvalue implicit objects and return by reference
</p>
<div class="code-block code-block-5" style="margin: 8px 0; clear: both"></div>

<p>
  There’s one case we need to be a little careful with. In the above example,
  <code>joe</code> is an lvalue object that exists until the end of the
  function. Therefore, the reference returned by <code>joe.getName()</code> will
  also be valid until the end of the function.
</p>
<p>
  But what if our implicit object is an rvalue instead (such as the return value
  of some function that returns by value)? Rvalue objects are destroyed at the
  end of the full expression in which they are created. When an rvalue object is
  destroyed, any references to members of that rvalue will be invalidated and
  left dangling, and use of such references will produce undefined behavior.
</p>
<p>
  Therefore, a reference to a member of an rvalue object can only be safely used
  within the full expression where the rvalue object is created.
</p>
<div class="cpp-note cpp-lightbluebackground">
  <p class="cpp-note-title cpp-bottomline">Tip</p>
  <p>
    We covered what a full expression is in lesson
    <a href="https://www.learncpp.com/cpp-tutorial/introduction-to-expressions/"
      >1.10 -- Introduction to expressions</a
    >.
  </p>
</div>
<div class="cpp-note cpp-lightredbackground" style="height: auto !important">
  <p class="cpp-note-title cpp-bottomline">Warning</p>
  <div
    class="google-auto-placed ap_container"
    style="width: 100%; height: auto; clear: both; text-align: center"
  >
    <ins
      data-ad-format="auto"
      class="adsbygoogle adsbygoogle-noablate"
      data-ad-client="ca-pub-0588844875925051"
      data-adsbygoogle-status="done"
      style="
        display: block;
        margin: auto;
        background-color: transparent;
        height: 0px;
      "
      ><div
        id="aswift_9_host"
        style="
          border: none;
          height: 0px;
          width: 995px;
          margin: 0px;
          padding: 0px;
          position: relative;
          visibility: visible;
          background-color: transparent;
          display: inline-block;
          overflow: hidden;
          opacity: 0;
        "
      >
        <iframe
          id="aswift_9"
          name="aswift_9"
          browsingtopics="true"
          style="
            left: 0px;
            position: absolute;
            top: 0px;
            border: 0px;
            width: 995px;
            height: 0px;
            min-height: auto;
            max-height: none;
            min-width: auto;
            max-width: none;
          "
          sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
          width="995"
          height="0"
          frameborder="0"
          marginwidth="0"
          marginheight="0"
          vspace="0"
          hspace="0"
          allowtransparency="true"
          scrolling="no"
          allow="attribution-reporting; run-ad-auction"
          src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3795373264&amp;adf=546570144&amp;w=995&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1750719163&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=995x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fmember-functions-returning-references-to-data-members%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=994&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751962933443&amp;bpp=1&amp;bdt=941&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C995x280%2C1027x280&amp;nras=6&amp;correlator=4479517652995&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=43&amp;ady=3567&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C31093273%2C95353386%2C95362656%2C95365226%2C95365235%2C95344787%2C95359265%2C95365116%2C95365798&amp;oid=2&amp;pvsid=6633029281879700&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=10&amp;uci=a!a&amp;btvi=5&amp;fsb=1&amp;dtd=589"
          data-google-container-id="a!a"
          tabindex="0"
          title="Advertisement"
          aria-label="Advertisement"
          data-load-complete="true"
          data-google-query-id="CMSgpsLqrI4DFe5kDwIdHBEPrw"
        ></iframe></div
    ></ins>
  </div>
  <p>
    An rvalue object is destroyed at the end of the full expression in which it
    is created. Any references to members of the rvalue object are left dangling
    at that point.
  </p>
  <p>
    A reference to a member of an rvalue object can only be safely used within
    the full expression where the rvalue object is created.
  </p>
</div>
<p>Let’s explore some cases related to this:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string_view&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Employee</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-57-close">{</span>
	std<span class="token double-colon punctuation">::</span>string m_name<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-54-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-54-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
	<span class="token keyword keyword-void">void</span> <span class="token function">setName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-43-close">(</span>std<span class="token double-colon punctuation">::</span>string_view name<span class="token punctuation brace-round brace-close brace-level-2" id="pair-43-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-55-close">{</span> m_name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-55-open">}</span>
	<span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> <span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-44-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-44-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-56-close">{</span> <span class="token keyword keyword-return">return</span> m_name<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-56-open">}</span> <span class="token comment">//  getter returns by const reference</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-57-open">}</span><span class="token punctuation">;</span>

<span class="token comment">// createEmployee() returns an Employee by value (which means the returned value is an rvalue)</span>
Employee <span class="token function">createEmployee</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-45-close">(</span>std<span class="token double-colon punctuation">::</span>string_view name<span class="token punctuation brace-round brace-close brace-level-1" id="pair-45-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-58-close">{</span>
	Employee e<span class="token punctuation">;</span>
	e<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-46-close">(</span>name<span class="token punctuation brace-round brace-close brace-level-2" id="pair-46-open">)</span><span class="token punctuation">;</span>
	<span class="token keyword keyword-return">return</span> e<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-58-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-47-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-47-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-61-close">{</span>
	<span class="token comment">// Case 1: okay: use returned reference to member of rvalue class object in same expression</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">createEmployee</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-48-close">(</span><span class="token string">"Frank"</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-48-open">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-49-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-49-open">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Case 2: bad: save returned reference to member of rvalue class object for use later</span>
	<span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> ref <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-59-close">{</span> <span class="token function">createEmployee</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-50-close">(</span><span class="token string">"Garbo"</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-50-open">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-51-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-51-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-59-open">}</span><span class="token punctuation">;</span> <span class="token comment">// reference becomes dangling when return value of createEmployee() is destroyed</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> ref<span class="token punctuation">;</span> <span class="token comment">// undefined behavior</span>

	<span class="token comment">// Case 3: okay: copy referenced value to local variable for use later</span>
	std<span class="token double-colon punctuation">::</span>string val <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-60-close">{</span> <span class="token function">createEmployee</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-52-close">(</span><span class="token string">"Hans"</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-52-open">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-53-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-53-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-60-open">}</span><span class="token punctuation">;</span> <span class="token comment">// makes copy of referenced member</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> val<span class="token punctuation">;</span> <span class="token comment">// okay: val is independent of referenced member</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-61-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 32px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  When <code>createEmployee()</code> is called, it will return an
  <code>Employee</code> object by value. This returned
  <code>Employee</code> object is an rvalue that will exist until the end of the
  full expression containing the call to <code>createEmployee()</code>. When
  that rvalue object is destroyed, any references to members of that object will
  become dangling.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_10_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<div class="code-block code-block-6" style="margin: 8px 0; clear: both"></div>

<p>
  In case 1, we call <code>createEmployee("Frank")</code>, which returns an
  rvalue <code>Employee</code> object. We then call <code>getName()</code> on
  this rvalue object, which returns a reference to <code>m_name</code>. This
  reference is then used immediately to print the name to the console. At this
  point, the full expression containing the call to
  <code>createEmployee("Frank")</code> ends, and the rvalue object and its
  members are destroyed. Since neither the rvalue object or its members are used
  beyond this point, this case is fine.
</p>
<p>
  In case 2, we run into problems. First,
  <code>createEmployee("Garbo")</code> returns an rvalue object. We then call
  <code>getName()</code> to get a reference to the <code>m_name</code> member of
  this rvalue. This <code>m_name</code> member is then used to initialize
  <code>ref</code>. At this point, the full expression containing the call to
  <code>createEmployee("Garbo")</code> ends, and the rvalue object and its
  members are destroyed. This leaves <code>ref</code> dangling. Thus, when we
  use <code>ref</code> in the subsequent statement, we’re accessing a dangling
  reference, and undefined behavior results.
</p>
<div class="cpp-note cpp-lightbluebackground">
  <p class="cpp-note-title cpp-bottomline">Key insight</p>
  <p>
    The evaluation of a full expression ends <em>after</em> any uses of that
    full expression as an initializer. This allows objects to be initialized
    with an rvalue of the same type (as the rvalue won’t be destroyed until
    after initialization occurs).
  </p>
</div>
<p>
  But what if we want to save a value from a function that returns a member by
  reference for use later? Instead of using the returned reference to initialize
  a local reference variable, we can instead use the returned reference to
  initialize a non-reference local variable.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_11_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<p>
  In case 3, we’re using the returned reference to initialize non-reference
  local variable <code>val</code>. This will cause the member being referenced
  to be copied into <code>val</code>. After initialization,
  <code>val</code> exists independently of the reference. So when the rvalue
  object is subsequently destroyed, <code>val</code> is not impacted by this.
  Thus <code>val</code> can be output in future statements without issue.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Using member functions that return by reference safely
</p>
<div class="code-block code-block-7" style="margin: 8px 0; clear: both"></div>

<p>
  Despite the potential danger with rvalue implicit objects, it is conventional
  for getters to return types that are expensive to copy by const reference, not
  by value.
</p>
<p>
  Given that, let’s talk about how we can use the return values from such
  functions safely. The three cases in the example above illustrate the three
  key points:
</p>
<ul>
  <li>
    Prefer to use the return value of a member function that returns by
    reference immediately (illustrated in case 1). Since this works with both
    lvalue and rvalue objects, if you always do this, you will avoid trouble.
  </li>
  <li>
    Do not “save” a returned reference to use later (illustrated in case 2),
    unless you are sure the implicit object is an lvalue. If you do this with an
    rvalue implicit object, undefined behavior will result when you use the
    now-dangling reference.
  </li>
  <li>
    If you do need to persist a returned reference for use later and aren’t sure
    that the implicit object is an lvalue, using the returned reference as the
    initializer for a non-reference local variable, which will make a copy of
    the member being referenced into the local variable (illustrated in case 3).
  </li>
</ul>
<div class="cpp-note cpp-lightgreenbackground">
  <p class="cpp-note-title cpp-bottomline">Best practice</p>
  <div
    class="google-auto-placed ap_container"
    style="width: 100%; height: auto; clear: both; text-align: center"
  >
    <ins
      data-ad-format="auto"
      class="adsbygoogle adsbygoogle-noablate"
      data-ad-client="ca-pub-0588844875925051"
      data-adsbygoogle-status="done"
      style="
        display: block;
        margin: auto;
        background-color: transparent;
        height: 280px;
      "
      ><div
        id="aswift_12_host"
        style="
          border: none;
          height: 280px;
          width: 995px;
          margin: 0px;
          padding: 0px;
          position: relative;
          visibility: visible;
          background-color: transparent;
          display: inline-block;
        "
      ></div
    ></ins>
  </div>
  <p>
    Prefer to use the return value of a member function that returns by
    reference immediately, to avoid issues with dangling references when the
    implicit object is an rvalue.
  </p>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Do not return non-const references to private data members
</p>
<p>
  Because a reference acts just like the object being referenced, a member
  function that returns a non-const reference provides direct access to that
  member (even if the member is private).
</p>
<p>For example:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Foo</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-68-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_value<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-66-close">{</span> <span class="token number">4</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-66-open">}</span><span class="token punctuation">;</span> <span class="token comment">// private member</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> <span class="token function">value</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-62-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-62-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-67-close">{</span> <span class="token keyword keyword-return">return</span> m_value<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-67-open">}</span> <span class="token comment">// returns a non-const reference (don't do this)</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-68-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-63-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-63-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-70-close">{</span>
    Foo f<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-69-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-69-open">}</span><span class="token punctuation">;</span>                <span class="token comment">// f.m_value is initialized to default value 4</span>
    f<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-64-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-64-open">)</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>          <span class="token comment">// The equivalent of m_value = 5</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> f<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-65-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-65-open">)</span><span class="token punctuation">;</span> <span class="token comment">// prints 5</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-70-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Because <code>value()</code> returns a non-const reference to
  <code>m_value</code>, the caller is able to use that reference to directly
  access (and change the value of) <code>m_value</code>.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_13_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<div class="code-block code-block-8" style="margin: 8px 0; clear: both"></div>

<p>This allows the caller to subvert the access control system.</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Const member functions can’t return non-const references to data members
</p>
<p>
  A const member function is not allowed to return a non-const reference to
  members. This makes sense -- a const member function is not allowed to modify
  the state of the object, nor is it allowed to call functions that would modify
  the state of the object. It should not be doing anything that might lead to
  the modification of the object.
</p>
<p>
  If a const member function was allowed to return a non-const reference to a
  member, it would be handing the caller a way to directly modify that member.
  This violates the intent of a const member function.
</p>
<div class="prevnext">
  <div class="prevnext-inline">
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/the-benefits-of-data-hiding-encapsulation/"
    >
      <div class="nav-button nav-button-next">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-right" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Next lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">14.8</span>The benefits of
            data hiding (encapsulation)
          </div>
        </div>
      </div></a
    >
    <a class="nav-link" href="/">
      <div class="nav-button nav-button-index">
        <div class="nav-button-icon">
          <i class="fa fa-home" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Back to table of contents</div>
        </div>
      </div></a
    >
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/access-functions/"
    >
      <div class="nav-button nav-button-prev">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-left" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Previous lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">14.6</span>Access functions
          </div>
        </div>
      </div></a
    >
  </div>
</div>
<div class="code-block code-block-10" style="margin: 8px 0; clear: both"></div>
