<div
  class="code-block code-block-1"
  style="margin: 8px 8px 8px 0; float: left"
></div>
<p>
  In the previous lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/introduction-to-random-number-generation/"
    >8.13 -- Introduction to random number generation</a
  >, we introduced the concept of random number generation, and discussed how
  PRNG algorithms are typically used to simulate randomness in programs.
</p>
<p>
  In this lesson, we’ll take a look at how to generate random numbers in your
  programs. To access any of the randomization capabilities in C++, we include
  the <code>&lt;random&gt;</code> header of the standard library.
</p>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Generating random numbers in C++ using Mersenne Twister
</p>
<p>
  The Mersenne Twister PRNG, besides having a great name, is probably the most
  popular PRNG across all programming languages. Although it is a bit old by
  today’s standards, it generally produces quality results and has decent
  performance. The random library has support for two Mersenne Twister types:
</p>
<ul>
  <li>
    <code>mt19937</code> is a Mersenne Twister that generates 32-bit unsigned
    integers
  </li>
  <li>
    <code>mt19937_64</code> is a Mersenne Twister that generates 64-bit unsigned
    integers
  </li>
</ul>
<p>Using Mersenne Twister is straightforward:</p>
<div class="code-block code-block-2" style="margin: 8px 0; clear: both"></div>

<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;random&gt;</span> <span class="token comment">// for std::mt19937</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-173-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-173-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-180-close">{</span>
	std<span class="token double-colon punctuation">::</span>mt19937 mt<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-177-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-177-open">}</span><span class="token punctuation">;</span> <span class="token comment">// Instantiate a 32-bit Mersenne Twister</span>

	<span class="token comment">// Print a bunch of random numbers</span>
	<span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-174-close">(</span><span class="token keyword keyword-int">int</span> count<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-178-close">{</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-178-open">}</span><span class="token punctuation">;</span> count <span class="token operator">&lt;=</span> <span class="token number">40</span><span class="token punctuation">;</span> <span class="token operator">++</span>count<span class="token punctuation brace-round brace-close brace-level-2" id="pair-174-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-179-close">{</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">mt</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-175-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-175-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\t'</span><span class="token punctuation">;</span> <span class="token comment">// generate a random number</span>

		<span class="token comment">// If we've printed 5 numbers, start a new row</span>
		<span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-3" id="pair-176-close">(</span>count <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-176-open">)</span>
			std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-179-open">}</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-180-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>This produces the result:</p>
<pre>
3499211612      581869302       3890346734      3586334585      545404204
4161255391      3922919429      949333985       2715962298      1323567403
418932835       2350294565      1196140740      809094426       2348838239
4264392720      4112460519      4279768804      4144164697      4156218106
676943009       3117454609      4168664243      4213834039      4111000746
471852626       2084672536      3427838553      3437178460      1275731771
609397212       20544909        1811450929      483031418       3933054126
2747762695      3402504553      3772830893      4120988587      2163214728
</pre>
<p>
  First, we include the &lt;random&gt; header, since that’s where all the random
  number capabilities live. Next, we instantiate a 32-bit Mersenne Twister
  engine via the statement <code>std::mt19937 mt</code>. Then, each time we want
  to generate a random 32-bit unsigned integer, we call <code>mt()</code>.
</p>
<div class="cpp-note cpp-lightgraybackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">As an aside…</p>
  <p>
    Since <code>mt</code> is a variable, you may be wondering what
    <code>mt()</code> means.
  </p>
  <p>
    In lesson
    <a href="https://www.learncpp.com/cpp-tutorial/introduction-to-stdstring/"
      >5.7 -- Introduction to std::string</a
    >, we showed an example where we called the function
    <code>name.length()</code>, which invoked the <code>length()</code> function
    on <code>std::string</code> variable <code>name</code>.
  </p>
  <p>
    <code>mt()</code> is a concise syntax for calling the function
    <code>mt.operator()</code>, which for these PRNG types has been defined to
    return the next random result in the sequence. The advantage of using
    <code>operator()</code> instead of a named function is that we don’t need to
    remember the function’s name, and the concise syntax is less typing.
  </p>
</div>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Rolling a dice using Mersenne Twister
</p>
<p>
  A 32-bit PRNG will generate random numbers between 0 and 4,294,967,295, but we
  do not always want numbers in that range. If our program was simulating a
  board game or a dice game, we’d probably want to simulate the roll of a
  6-sided dice by generating random numbers between 1 and 6. If our program was
  a dungeon adventure, and the player had a sword that did between 7 and 11
  damage to monsters, then we’d want to generate random numbers between 7 and 11
  whenever the player hit a monster.
</p>
<p>
  Unfortunately, PRNGs can’t do this. They can only generate numbers that use
  the full range. What we need is some way to convert a number that is output
  from our PRNG into a value in the smaller range we want (with an even
  probability of each value occurring). While we could write a function to do
  this ourselves, doing so in a way that produces non-biased results is
  non-trivial.
</p>
<p>
  Fortunately, the random library can help us here, in the form of random number
  distributions. A <strong>random number distribution</strong> converts the
  output of a PRNG into some other distribution of numbers.
</p>
<div class="code-block code-block-3" style="margin: 8px 0; clear: both"></div>

<div class="cpp-note cpp-lightgraybackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">As an aside…</p>
  <p>
    For the stats geeks: a random number distribution is just a probability
    distribution designed to take PRNG values as input.
  </p>
</div>
<p>
  The random library has many random numbers distributions, most of which you
  will never use unless you’re doing some kind of statistical analysis. But
  there’s one random number distribution that’s extremely useful: a
  <strong>uniform distribution</strong> is a random number distribution that
  produces outputs between two numbers X and Y (inclusive) with equal
  probability.
</p>
<p>
  Here’s a similar program to the one above, using a uniform distribution to
  simulate the roll of a 6-sided dice:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;random&gt;</span> <span class="token comment">// for std::mt19937 and std::uniform_int_distribution</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-181-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-181-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-189-close">{</span>
	std<span class="token double-colon punctuation">::</span>mt19937 mt<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-185-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-185-open">}</span><span class="token punctuation">;</span>

	<span class="token comment">// Create a reusable random number generator that generates uniform numbers between 1 and 6</span>
	std<span class="token double-colon punctuation">::</span>uniform_int_distribution die6<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-186-close">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-186-open">}</span><span class="token punctuation">;</span> <span class="token comment">// for C++14, use std::uniform_int_distribution&lt;&gt; die6{ 1, 6 };</span>

	<span class="token comment">// Print a bunch of random numbers</span>
	<span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-182-close">(</span><span class="token keyword keyword-int">int</span> count<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-187-close">{</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-187-open">}</span><span class="token punctuation">;</span> count <span class="token operator">&lt;=</span> <span class="token number">40</span><span class="token punctuation">;</span> <span class="token operator">++</span>count<span class="token punctuation brace-round brace-close brace-level-2" id="pair-182-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-188-close">{</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">die6</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-183-close">(</span>mt<span class="token punctuation brace-round brace-close brace-level-3" id="pair-183-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\t'</span><span class="token punctuation">;</span> <span class="token comment">// generate a roll of the die here</span>

		<span class="token comment">// If we've printed 10 numbers, start a new row</span>
		<span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-3" id="pair-184-close">(</span>count <span class="token operator">%</span> <span class="token number">10</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-184-open">)</span>
			std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-188-open">}</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-189-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>This produces the result:</p>
<pre>
3       1       3       6       5       2       6       6       1       2
2       6       1       1       6       1       4       5       2       5
6       2       6       2       1       3       5       4       5       6
1       4       2       3       1       2       2       6       2       1
</pre>
<p>
  There are only two noteworthy differences in this example compared to the
  previous one. First, we’ve created a uniform distribution variable (named
  <code>die6</code>) to generate numbers between 1 and 6. Second, instead of
  calling <code>mt()</code> to generate 32-bit unsigned integer random numbers,
  we’re now calling <code>die6(mt)</code> to generate a value between 1 and 6.
</p>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  The above program isn’t as random as it seems
</p>
<div class="code-block code-block-4" style="margin: 8px 0; clear: both"></div>

<p>
  Although the results of our dice rolling example above are pretty random,
  there’s a major flaw with the program. Run the program 3 times and see if you
  can figure out what it is. Go ahead, we’ll wait.
</p>
<p><em>Jeopardy music</em></p>
<p>
  If you run the program multiple times, you will note that it prints the same
  numbers every time! While each number in the sequence is random with regards
  to the previous one, the entire sequence is not random at all! Each run of our
  program produces the exact same result.
</p>
<p>
  Imagine that you’re writing a game of hi-lo, where the user has 10 tries to
  guess a number that has been picked randomly, and the computer tells the user
  whether their guess is too high or too low. If the computer picks the same
  random number every time, the game won’t be interesting past the first time it
  is played. So let’s take a deeper look at why this is happening, and how we
  can fix it.
</p>
<p>
  In the prior lesson (<a
    href="https://www.learncpp.com/cpp-tutorial/introduction-to-random-number-generation/"
    >8.13 -- Introduction to random number generation</a
  >), we covered that each number in a PRNG sequence is in a deterministic way.
  And that the state of the PRNG is initialized from the seed value. Thus, given
  any starting seed number, PRNGs will always generate the same sequence of
  numbers from that seed as a result.
</p>
<p>
  Because we are value initializing our Mersenne Twister, it is being
  initialized with the same seed every time the program is run. And because the
  seed is the same, the random numbers being generated are also the same.
</p>
<div class="code-block code-block-5" style="margin: 8px 0; clear: both"></div>

<p>
  In order to make our entire sequence randomized differently each time the
  program is run, we need to pick a seed that’s not a fixed number. The first
  answer that probably comes to mind is that we need a random number for our
  seed! That’s a good thought, but if we need a random number to generate random
  numbers, then we’re in a catch-22. It turns out, we really don’t need our seed
  to be a random number -- we just need to pick something that changes each time
  the program is run. Then we can use our PRNG to generate a unique sequence of
  pseudo-random numbers from that seed.
</p>
<p>There are two methods that are commonly used to do this:</p>
<ul>
  <li>Use the system clock</li>
  <li>Use the system’s random device</li>
</ul>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Seeding with the system clock
</p>
<p>
  What’s one thing that’s different every time you run your program? Unless you
  manage to run your program twice at exactly the same moment in time, the
  answer is that the current time is different. Therefore, if we use the current
  time as our seed value, then our program will produce a different set of
  random numbers each time it is run. C and C++ have a long history of PRNGs
  being seeded using the current time (using the
  <code>std::time()</code> function), so you will probably see this in a lot of
  existing code.
</p>
<p>
  Fortunately, C++ has a chrono library containing various clocks that we can
  use to generate a seed value. To minimize the chance of two time values being
  identical if the program is run quickly in succession, we want to use some
  time measure that changes as quickly as possible. For this, we’ll ask the
  clock how much time has passed since the earliest time it can measure. This
  time is measured in “ticks”, which is a very small unit of time (usually
  nanoseconds, but could be milliseconds).
</p>
<div class="code-block code-block-6" style="margin: 8px 0; clear: both"></div>

<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;random&gt;</span> <span class="token comment">// for std::mt19937</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;chrono&gt;</span> <span class="token comment">// for std::chrono</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-190-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-190-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-202-close">{</span>
	<span class="token comment">// Seed our Mersenne Twister using steady_clock</span>
	std<span class="token double-colon punctuation">::</span>mt19937 mt<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-198-close">{</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>mt19937<span class="token double-colon punctuation">::</span>result_type<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-194-close">(</span>
		std<span class="token double-colon punctuation">::</span>chrono<span class="token double-colon punctuation">::</span>steady_clock<span class="token double-colon punctuation">::</span><span class="token function">now</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-191-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-191-open">)</span><span class="token punctuation">.</span><span class="token function">time_since_epoch</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-192-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-192-open">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-193-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-193-open">)</span>
		<span class="token punctuation brace-round brace-close brace-level-3" id="pair-194-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-198-open">}</span><span class="token punctuation">;</span>

	<span class="token comment">// Create a reusable random number generator that generates uniform numbers between 1 and 6</span>
	std<span class="token double-colon punctuation">::</span>uniform_int_distribution die6<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-199-close">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-199-open">}</span><span class="token punctuation">;</span> <span class="token comment">// for C++14, use std::uniform_int_distribution&lt;&gt; die6{ 1, 6 };</span>

	<span class="token comment">// Print a bunch of random numbers</span>
	<span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-195-close">(</span><span class="token keyword keyword-int">int</span> count<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-200-close">{</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-200-open">}</span><span class="token punctuation">;</span> count <span class="token operator">&lt;=</span> <span class="token number">40</span><span class="token punctuation">;</span> <span class="token operator">++</span>count<span class="token punctuation brace-round brace-close brace-level-2" id="pair-195-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-201-close">{</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">die6</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-196-close">(</span>mt<span class="token punctuation brace-round brace-close brace-level-3" id="pair-196-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\t'</span><span class="token punctuation">;</span> <span class="token comment">// generate a roll of the die here</span>

		<span class="token comment">// If we've printed 10 numbers, start a new row</span>
		<span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-3" id="pair-197-close">(</span>count <span class="token operator">%</span> <span class="token number">10</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-197-open">)</span>
			std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-201-open">}</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-202-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  The above program has only two changes from the prior. First, we’re including
  &lt;chrono&gt;, which gives us access to the clock. Second, we’re using the
  current time from the clock as a seed value for our Mersenne Twister.
</p>
<p>
  The results generated by this program should now be different each time it is
  run, which you can verify experimentally by running it several times.
</p>
<p>
  The downside of this approach is that if the program is run several times in
  quick succession, the seeds generated for each run won’t be that different,
  which can impact the quality of the random results from a statistical
  standpoint. For normal programs, this doesn’t matter, but for programs that
  require high quality, independent results, this method of seeding may be
  insufficient.
</p>
<div class="cpp-note cpp-lightbluebackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">Tip</p>
  <p>
    <code>std::chrono::high_resolution_clock</code> is a popular choice instead
    of <code>std::chrono::steady_clock</code>.
    <code>std::chrono::high_resolution_clock</code> is the clock that uses the
    most granular unit of time, but it may use the system clock for the current
    time, which can be changed or rolled back by users.
    <code>std::chrono::steady_clock</code> may have a less granular tick time,
    but is the only clock with a guarantee that users cannot adjust it.
  </p>
</div>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Seeding with the random device
</p>
<p>
  The random library contains a type called <code>std::random_device</code> that
  is an implementation-defined PRNG. Normally we avoid implementation-defined
  capabilities because they have no guarantees about quality or portability, but
  this is one of the exception cases. Typically
  <code>std::random_device</code> will ask the OS for a pseudo-random number
  (how it does this depends on the OS).
</p>
<div class="code-block code-block-7" style="margin: 8px 0; clear: both"></div>

<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;random&gt;</span> <span class="token comment">// for std::mt19937 and std::random_device</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-203-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-203-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-213-close">{</span>
	std<span class="token double-colon punctuation">::</span>mt19937 mt<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-209-close">{</span> std<span class="token double-colon punctuation">::</span>random_device<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-208-close">{</span><span class="token punctuation brace-curly brace-close brace-level-3" id="pair-208-open">}</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-204-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-204-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-209-open">}</span><span class="token punctuation">;</span>

	<span class="token comment">// Create a reusable random number generator that generates uniform numbers between 1 and 6</span>
	std<span class="token double-colon punctuation">::</span>uniform_int_distribution die6<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-210-close">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-210-open">}</span><span class="token punctuation">;</span> <span class="token comment">// for C++14, use std::uniform_int_distribution&lt;&gt; die6{ 1, 6 };</span>

	<span class="token comment">// Print a bunch of random numbers</span>
	<span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-205-close">(</span><span class="token keyword keyword-int">int</span> count<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-211-close">{</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-211-open">}</span><span class="token punctuation">;</span> count <span class="token operator">&lt;=</span> <span class="token number">40</span><span class="token punctuation">;</span> <span class="token operator">++</span>count<span class="token punctuation brace-round brace-close brace-level-2" id="pair-205-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-212-close">{</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">die6</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-206-close">(</span>mt<span class="token punctuation brace-round brace-close brace-level-3" id="pair-206-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\t'</span><span class="token punctuation">;</span> <span class="token comment">// generate a roll of the die here</span>

		<span class="token comment">// If we've printed 10 numbers, start a new row</span>
		<span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-3" id="pair-207-close">(</span>count <span class="token operator">%</span> <span class="token number">10</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-207-open">)</span>
			std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-212-open">}</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-213-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In the above program, we’re seeding our Mersenne Twister with one random
  number generated from a temporary instance of <code>std::random_device</code>.
  If you run this program multiple times, it should also produce different
  results each time.
</p>
<p>
  One potential problem with <code>std::random_device</code>: it isn’t required
  to be non-deterministic, meaning it <em>could</em>, on some systems, produce
  the same sequence every time the program is run, which is exactly what we’re
  trying to avoid. There was a
  <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=85494">bug in MinGW</a>
  (fixed in GCC 9.2) that would do exactly this, making
  <code>std::random_device</code> useless.
</p>
<p>
  However, the latest versions of the most popular compilers (GCC/MinGW, Clang,
  Visual Studio) support proper implementations of
  <code>std::random_device</code>.
</p>
<div class="cpp-note cpp-lightgreenbackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">Best practice</p>
  <p>
    Use <code>std::random_device</code> to seed your PRNGs (unless it’s not
    implemented properly for your target compiler/architecture).
  </p>
</div>
<div class="cpp-note cpp-lightbluebackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">
    Q: What does <code>std::random_device{}()</code> mean?
  </p>
  <p>
    <code>std::random_device{}</code> creates a value-initialized temporary
    object of type <code>std::random_device</code>. The <code>()</code> then
    calls <code>operator()</code> on that temporary object, which returns a
    randomized value (which we use as an initializer for our Mersenne Twister)
  </p>
  <p>
    It’s the equivalent of the calling the following function, which uses a
    syntax you should be more familiar with:
  </p>
  <div class="code-toolbar">
    <pre
      class="line-numbers language-cpp"
      tabindex="0"
    ><code class="match-braces language-cpp"><span class="token keyword keyword-unsigned">unsigned</span> <span class="token keyword keyword-int">int</span> <span class="token function">getRandomDeviceValue</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-214-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-214-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-217-close">{</span>
   std<span class="token double-colon punctuation">::</span>random_device rd<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-216-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-216-open">}</span><span class="token punctuation">;</span> <span class="token comment">// create a value initialized std::random_device object</span>
   <span class="token keyword keyword-return">return</span> <span class="token function">rd</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-215-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-215-open">)</span><span class="token punctuation">;</span> <span class="token comment">// return the result of operator() to the caller</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-217-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
    <div class="toolbar">
      <div class="toolbar-item">
        <button
          class="copy-to-clipboard-button"
          type="button"
          data-copy-state="copy"
        >
          <span>Copy</span>
        </button>
      </div>
    </div>
  </div>
  <p>
    Using <code>std::random_device{}()</code> allows us to get the same result
    without creating a named function or named variable, so it’s much more
    concise.
  </p>
</div>
<div class="cpp-note cpp-lightbluebackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">
    Q: If std::random_device is random itself, why don’t we just use that
    instead of Mersenne Twister?
  </p>
  <p>
    Because std::random_device is implementation defined, we can’t assume much
    about it. It may be expensive to access or it may cause our program to pause
    while waiting for more random numbers to become available. The pool of
    numbers that it draws from may also be depleted quickly, which would impact
    the random results for other applications requesting random numbers via the
    same method. For this reason, std::random_device is better used to seed
    other PRNGs rather than as a PRNG itself.
  </p>
</div>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Only seed a PRNG once
</p>
<p>
  Many PRNGs can be reseeded after the initial seeding. This essentially
  re-initializes the state of the random number generator, causing it to
  generate results starting from the new seed state. Reseeding should generally
  be avoided unless you have a specific reason to do so, as it can cause the
  results to be less random, or not random at all.
</p>
<div class="code-block code-block-8" style="margin: 8px 0; clear: both"></div>

<div class="cpp-note cpp-lightgreenbackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">Best practice</p>
  <p>
    Only seed a given pseudo-random number generator once, and do not reseed it.
  </p>
</div>
<p>Here’s an example of a common mistake that new programmers make:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;random&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">getCard</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-218-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-218-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-226-close">{</span>
    std<span class="token double-colon punctuation">::</span>mt19937 mt<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-224-close">{</span> std<span class="token double-colon punctuation">::</span>random_device<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-223-close">{</span><span class="token punctuation brace-curly brace-close brace-level-3" id="pair-223-open">}</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-219-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-219-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-224-open">}</span><span class="token punctuation">;</span> <span class="token comment">// this gets created and seeded every time the function is called</span>
    std<span class="token double-colon punctuation">::</span>uniform_int_distribution card<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-225-close">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">52</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-225-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> <span class="token function">card</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-220-close">(</span>mt<span class="token punctuation brace-round brace-close brace-level-2" id="pair-220-open">)</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-226-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-221-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-221-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-227-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">getCard</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-222-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-222-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-227-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In the <code>getCard()</code> function, the random number generator is being
  created and seeded every time the function is called. This is inefficient at
  best, and will likely cause poor random results.
</p>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Mersenne Twister and underseeding issues
</p>
<p>
  The internal state of a Mersenne Twister requires 19937 bits (2493 bytes),
  which is 624 32-bit values or 312 64-bit values. As a result,
  <code>std::mt19937</code> allocates 624 integers, whereas
  <code>std::mt19937_64</code> allocates 312 integers.
</p>
<div class="cpp-note cpp-lightgraybackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">As an aside…</p>
  <p>
    The integers allocated by <code>std::mt19937</code> are defined to be of
    type <code>std::uint_fast32_t</code>, which could be 32-bit or 64-bit
    integers depending on the architecture. If
    <code>std::uint_fast32_t</code> resolves to a 64-bit integer,
    <code>std::mt19937</code> will use 624 64-bit integers, making it double the
    size it needs to be.
  </p>
</div>
<p>
  In the examples above, where we seed our <code>std::mt19937</code> from the
  clock or std::random_device, our seed is only a single integer. This means
  we’re essentially initializing 624 integers using a single integer, which is
  significantly underseeding the Mersenne Twister PRNG. The Random library does
  the best it can to fill in the remaining 623 values with “random” data… but it
  can’t work magic. Underseeded PRNG can generate results that are suboptimal
  for applications that need the highest quality results. For example, seeding
  <code>std::mt19937</code> with a single 32-bit value will never generate the
  number <code>42</code> as its first output.
</p>
<p>
  So how do we fix this? As of C++20, there’s no easy way. But we do have some
  suggestions.
</p>
<p>
  First, let’s talk about <code>std::seed_seq</code> (which stands for “seed
  sequence”). In the prior lesson, we mentioned that ideally we want our seed
  data to be as many bits as the state of our PRNG, or our PRNG will be
  underseeded. But in many cases (especially when our PRNG has a large state),
  we won’t have that many bits of randomized seed data.
</p>
<p>
  <code>std::seed_seq</code> is a type that was designed to help with this. We
  can pass it as many randomized values as we have, and then it will generate as
  many additional unbiased seed values as needed to initialize a PRNG’s state.
  If you initialize <code>std::seed_seq</code> with a single value (e.g. from
  <code>std::random_device</code>) and then initialize a Mersenne Twister with
  the <code>std::seed_seq</code> object, <code>std::seed_seq</code> will
  generate 623 values of additional seed data. This won’t add randomness, but it
  will give us a better mix of 0 and 1 bits. However, the more random data we
  can provide <code>std::seed_seq</code>, the better job it will do for us. So
  the easiest idea is to simply use <code>std::random_device</code> to give
  <code>std::seed_seq</code> more data to work with. If we initialize
  <code>std::seed_seq</code> with 8 values from
  <code>std::random_device</code> instead of 1, then the remaining values
  generated by <code>std::seed_seq</code> should be much better:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;random&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-228-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-228-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-246-close">{</span>
	std<span class="token double-colon punctuation">::</span>random_device rd<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-240-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-240-open">}</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>seed_seq ss<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-241-close">{</span> <span class="token function">rd</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-229-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-229-open">)</span><span class="token punctuation">,</span> <span class="token function">rd</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-230-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-230-open">)</span><span class="token punctuation">,</span> <span class="token function">rd</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-231-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-231-open">)</span><span class="token punctuation">,</span> <span class="token function">rd</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-232-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-232-open">)</span><span class="token punctuation">,</span> <span class="token function">rd</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-233-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-233-open">)</span><span class="token punctuation">,</span> <span class="token function">rd</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-234-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-234-open">)</span><span class="token punctuation">,</span> <span class="token function">rd</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-235-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-235-open">)</span><span class="token punctuation">,</span> <span class="token function">rd</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-236-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-236-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-241-open">}</span><span class="token punctuation">;</span> <span class="token comment">// get 8 integers of random numbers from std::random_device for our seed</span>
	std<span class="token double-colon punctuation">::</span>mt19937 mt<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-242-close">{</span> ss <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-242-open">}</span><span class="token punctuation">;</span> <span class="token comment">// initialize our Mersenne Twister with the std::seed_seq</span>

	<span class="token comment">// Create a reusable random number generator that generates uniform numbers between 1 and 6</span>
	std<span class="token double-colon punctuation">::</span>uniform_int_distribution die6<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-243-close">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-243-open">}</span><span class="token punctuation">;</span> <span class="token comment">// for C++14, use std::uniform_int_distribution&lt;&gt; die6{ 1, 6 };</span>

	<span class="token comment">// Print a bunch of random numbers</span>
	<span class="token keyword keyword-for">for</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-237-close">(</span><span class="token keyword keyword-int">int</span> count<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-244-close">{</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-244-open">}</span><span class="token punctuation">;</span> count <span class="token operator">&lt;=</span> <span class="token number">40</span><span class="token punctuation">;</span> <span class="token operator">++</span>count<span class="token punctuation brace-round brace-close brace-level-2" id="pair-237-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-245-close">{</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">die6</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-238-close">(</span>mt<span class="token punctuation brace-round brace-close brace-level-3" id="pair-238-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\t'</span><span class="token punctuation">;</span> <span class="token comment">// generate a roll of the die here</span>

		<span class="token comment">// If we've printed 10 numbers, start a new row</span>
		<span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-3" id="pair-239-close">(</span>count <span class="token operator">%</span> <span class="token number">10</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-239-open">)</span>
			std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-245-open">}</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-246-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 32px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  This is pretty straightforward so there isn’t much reason not to do this at a
  minimum.
</p>
<div class="cpp-note cpp-lightbluebackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">
    Q: Why not give std::seed_seq 624 values from
    <code>std::random_device</code>?
  </p>
  <p>
    You can, but this is likely to be slow, and risks depleting the pool of
    random numbers that <code>std::random_device</code> uses.
  </p>
</div>
<p>
  You can also use other “random” inputs to <code>std::seed_seq</code>. We’ve
  already shown you how to get a value from the clock, so you can throw that in
  easily. Other things that are sometimes used include the current thread id,
  the address of particular functions, the user’s id, the process id, etc… Doing
  that is beyond the scope of this article, but
  <a
    href="https://www.pcg-random.org/posts/ease-of-use-without-loss-of-power.html"
    >this article</a
  >
  has some context and a link to
  <a href="https://gist.github.com/imneme/540829265469e673d045"
    >randutils.hpp</a
  >
  that implements this.
</p>
<p>
  An alternate path is to use a different PRNG with a smaller state. Many good
  PRNGs use 64 or 128 bits of state, which can easily be initialized using
  <code>std::seed_seq</code> filled with 8 calls to
  <code>std::random_device</code>.
</p>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Warming up a PRNG
</p>
<p>
  When a PRNG is given a poor quality seed (or underseeded), the initial results
  of the PRNG may not be high quality. For this reason, some PRNGs benefit from
  being “warmed up”, which is a technique where the first N results generated
  from the PRNG are discarded. This allows the internal state of the PRNG to be
  mixed up such that the subsequent results should be of higher quality.
  Typically a few hundred to a few thousand initial results are discarded. The
  longer the period of the PRNG, the more initial results should be discarded.
</p>
<div class="cpp-note cpp-lightgraybackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">As an aside…</p>
  <p>
    Visual Studio’s implementation of <code>rand()</code> had (or still has?) a
    bug where the first generated result would not be sufficiently randomized.
    You may see older programs that use <code>rand()</code> discard a single
    result as a way to avoid this issue.
  </p>
</div>
<p>
  The <code>seed_seq</code> initialization used by
  <code>std::mt19937</code> performs a warm up, so we don’t need to explicitly
  warm up <code>std::mt19937</code> objects.
</p>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  <a name="RandomH"></a>Random numbers across multiple functions or files
  (Random.h)
  <a href="#RandomH"><i class="fa fa-link" style="font-size: 0.8em"></i></a>
</p>
<p>
  This content was moved to
  <a
    href="https://www.learncpp.com/cpp-tutorial/global-random-numbers-random-h/"
    >8.15 -- Global random numbers (Random.h)</a
  >.
</p>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Debugging programs that use random numbers
</p>
<p>
  Programs that use random numbers can be difficult to debug because the program
  may exhibit different behaviors each time it is run. When this is the case,
  the erroneous behavior you may happen, or it may not. This can waste a lot of
  time. When debugging, it’s helpful to ensure your program executes the same
  (incorrect) way each time. That way, you can run the program as many times as
  needed to isolate where the error is.
</p>
<p>
  For this reason, when debugging, it’s a useful technique to seed your PRNG
  with a specific fixed value (e.g. <code>5</code>) that causes the erroneous
  behavior to occur. If a given seed doesn’t cause your program to exhibit the
  error, keep incrementing the seed value until you find one that does. This
  will ensure your program generates the same results each time, making
  debugging easier. Once you’ve found the error, you can use your normal seeding
  method to start generating randomized results again.
</p>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Random FAQ
</p>
<div class="cpp-note cpp-lightbluebackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">
    Q: Help! My random number generator is generating the same sequence of
    random numbers.
  </p>
  <p>
    If your random number generator is generating the same sequence of random
    numbers every time your program is run, you probably didn’t seed it properly
    (or at all). Make sure you’re seeding it with a value that changes each time
    the program is run.
  </p>
</div>
<div class="cpp-note cpp-lightbluebackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">
    Q: Help! My random number generator keeps generating the same number over
    and over.
  </p>
  <p>
    If your random number generator is generating the same number every time you
    ask it for a random number, then you are probably either reseeding the
    random number generator before generating a random number, or you’re
    creating a new random generator for each random number.
  </p>
</div>
<div class="prevnext">
  <div class="prevnext-inline">
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/global-random-numbers-random-h/"
    >
      <div class="nav-button nav-button-next">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-right" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Next lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">8.15</span>Global random
            numbers (Random.h)
          </div>
        </div>
      </div></a
    >
    <a class="nav-link" href="/">
      <div class="nav-button nav-button-index">
        <div class="nav-button-icon">
          <i class="fa fa-home" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Back to table of contents</div>
        </div>
      </div></a
    >
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/introduction-to-random-number-generation/"
    >
      <div class="nav-button nav-button-prev">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-left" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Previous lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">8.13</span>Introduction to
            random number generation
          </div>
        </div>
      </div></a
    >
  </div>
</div>
<div class="code-block code-block-10" style="margin: 8px 0; clear: both"></div>
