<div
  class="code-block code-block-1"
  style="margin: 8px 8px 8px 0; float: left"
></div>
<p>(h/t to reader Koe for providing the first draft of this lesson!)</p>
<p>
  Looking at a typical function declaration, it is not possible to determine
  whether a function might throw an exception or not:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-int">int</span> <span class="token function">doSomething</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-0-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-0-open">)</span><span class="token punctuation">;</span> <span class="token comment">// can this function throw an exception or not?</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In the above example, can <code>doSomething()</code> throw an exception? It’s
  not clear. But the answer is important in some contexts. In lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/exception-dangers-and-downsides/"
    >27.8 -- Exception dangers and downsides</a
  >, we described how an exception that is thrown out of a destructor during
  stack unwinding will cause the program to halt. If
  <code>doSomething()</code> can throw an exception, then calling it from a
  destructor (or any other place where a thrown exception is undesirable) is
  risky. Although we could have the destructor handle exceptions thrown by
  <code>doSomething()</code> (so those exceptions don’t propagate out of the
  destructor), we have to remember to do this, and we have to ensure we cover
  all the different types of exceptions that may be thrown.
</p>
<p>
  While comments may help enumerate whether a function throws exceptions or not
  (and if so, what kind of exceptions), documentation can grow stale and there
  is no compiler enforcement for comments.
</p>
<p>
  <strong>Exception specifications</strong> are a language mechanism that was
  originally designed to document what kind of exceptions a function might throw
  as part of a function specification. While most of the exception
  specifications have now been deprecated or removed, one useful exception
  specification was added as a replacement, which we’ll cover in this lesson.
</p>
<div class="code-block code-block-2" style="margin: 8px 0; clear: both"></div>

<p class="cpp-section cpp-topline" style="clear: both">
  The noexcept specifier
</p>
<p>
  In C++, all functions are classified as either <em>non-throwing</em> or
  <em>potentially throwing</em>. A <strong>non-throwing function</strong> is one
  that promises not to throw exceptions that are visible to the caller. A
  <strong>potentially throwing function</strong> may throw exceptions that are
  visible to the caller.
</p>
<p>
  To define a function as non-throwing, we can use the
  <strong>noexcept specifier</strong>. To do so, we use the
  <code>noexcept</code> keyword in the function declaration, placed to the right
  of the function parameter list:
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_5_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: visible;
      "
    >
      <iframe
        id="aswift_5"
        name="aswift_5"
        browsingtopics="true"
        style="
          left: 0;
          position: absolute;
          top: 0;
          border: 0;
          width: 1027px;
          height: 280px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="280"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=417145364&amp;adf=1169412719&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1749268329&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fexception-specifications-and-noexcept%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963761184&amp;bpp=1&amp;bdt=659&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600&amp;nras=2&amp;correlator=892357882414&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=978&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C31093235%2C95353386%2C95362656%2C95363183%2C95365226%2C95365234%2C95365114%2C95359266%2C95365119%2C95365798&amp;oid=2&amp;pvsid=8251017839727327&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=6&amp;uci=a!6&amp;fsb=1&amp;dtd=17"
        data-google-container-id="a!6"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-google-query-id="CObT3MztrI4DFVHzTAId4WAFUA"
        data-load-complete="true"
      ></iframe></div
  ></ins>
</div>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-void">void</span> <span class="token function">doSomething</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-1-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-1-open">)</span> <span class="token keyword keyword-noexcept">noexcept</span><span class="token punctuation">;</span> <span class="token comment">// this function is specified as non-throwing</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Note that <code>noexcept</code> doesn’t actually prevent the function from
  throwing exceptions or calling other functions that are potentially throwing.
  This is allowed so long as the noexcept function catches and handles those
  exceptions internally, and those exceptions do not exit the noexcept function.
</p>
<p>
  If an unhandled exception would exit a noexcept function,
  <code>std::terminate</code> will be called (even if there is an exception
  handler that would otherwise handle such an exception somewhere up the stack).
  And if <code>std::terminate</code> is called from inside a noexcept function,
  stack unwinding may or may not occur (depending on implementation and
  optimizations), which means your objects may or may not be destructed properly
  prior to termination.
</p>
<div class="cpp-note cpp-lightbluebackground">
  <p class="cpp-note-title cpp-bottomline">Key insight</p>
  <p>
    The promise that a noexcept function makes to not throw exceptions that are
    visible to the caller is a contractual promise, not a promise enforced by
    the compiler. So while calling a noexcept function should be safe, any
    exception handling bugs in the noexcept function that cause the contract to
    be broken will result in termination of the program! This shouldn’t happen,
    but neither should bugs.
  </p>
  <p>
    For this reason, it’s best that noexcept functions don’t mess with
    exceptions at all, or call potentially throwing functions that could raise
    an exception. A noexcept function can’t have an exception handling bug if no
    exceptions can possibly be raised in the first place!
  </p>
</div>
<p>
  Much like functions that differ only in their return values can not be
  overloaded, functions differing only in their exception specification can not
  be overloaded.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_6_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_6"
        name="aswift_6"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=417145364&amp;adf=2833395176&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1749268329&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fexception-specifications-and-noexcept%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963761184&amp;bpp=1&amp;bdt=659&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280&amp;nras=3&amp;correlator=892357882414&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=1691&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C31093235%2C95353386%2C95362656%2C95363183%2C95365226%2C95365234%2C95365114%2C95359266%2C95365119%2C95365798&amp;oid=2&amp;pvsid=8251017839727327&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=7&amp;uci=a!7&amp;btvi=1&amp;fsb=1&amp;dtd=18"
        data-google-container-id="a!7"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CKHL3MztrI4DFSn1TAIdklQOAA"
      ></iframe></div
  ></ins>
</div>
<div class="code-block code-block-3" style="margin: 8px 0; clear: both"></div>

<p class="cpp-section cpp-topline" style="clear: both">
  Illustrating the behavior of noexcept functions and exceptions
</p>
<p>
  The following program illustrates the behavior of noexcept functions and
  exceptions in various cases:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token comment">// h/t to reader yellowEmu for the first draft of this program</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Doomed</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-17-close">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token operator">~</span><span class="token function">Doomed</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-2-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-2-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-16-close">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Doomed destructed\n"</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-16-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-17-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-void">void</span> <span class="token function">thrower</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-3-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-3-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-18-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Throwing exception\n"</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-throw">throw</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-18-open">}</span>

<span class="token keyword keyword-void">void</span> <span class="token function">pt</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-4-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-4-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-20-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"pt (potentally throwing) called\n"</span><span class="token punctuation">;</span>
    <span class="token comment">//This object will be destroyed during stack unwinding (if it occurs)</span>
    Doomed doomed<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-19-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-19-open">}</span><span class="token punctuation">;</span>
    <span class="token function">thrower</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-5-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-5-open">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"This never prints\n"</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-20-open">}</span>

<span class="token keyword keyword-void">void</span> <span class="token function">nt</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-6-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-6-open">)</span> <span class="token keyword keyword-noexcept">noexcept</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-22-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"nt (noexcept) called\n"</span><span class="token punctuation">;</span>
    <span class="token comment">//This object will be destroyed during stack unwinding (if it occurs)</span>
    Doomed doomed<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-21-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-21-open">}</span><span class="token punctuation">;</span>
    <span class="token function">thrower</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-7-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-7-open">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"this never prints\n"</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-22-open">}</span>

<span class="token keyword keyword-void">void</span> <span class="token function">tester</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-8-close">(</span><span class="token keyword keyword-int">int</span> c<span class="token punctuation brace-round brace-close brace-level-1" id="pair-8-open">)</span> <span class="token keyword keyword-noexcept">noexcept</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-25-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"tester (noexcept) case "</span> <span class="token operator">&lt;&lt;</span> c <span class="token operator">&lt;&lt;</span> <span class="token string">" called\n"</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-try">try</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-23-close">{</span>
        <span class="token punctuation brace-round brace-open brace-level-3" id="pair-9-close">(</span>c <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-9-open">)</span> <span class="token operator">?</span> <span class="token function">pt</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-10-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-10-open">)</span> <span class="token operator">:</span> <span class="token function">nt</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-11-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-11-open">)</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-23-open">}</span>
    <span class="token keyword keyword-catch">catch</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-12-close">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-12-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-24-close">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"tester caught exception\n"</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-24-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-25-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-13-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-13-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-26-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>unitbuf<span class="token punctuation">;</span> <span class="token comment">// flush buffer after each insertion</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>boolalpha<span class="token punctuation">;</span> <span class="token comment">// print boolean as true/false</span>
    <span class="token function">tester</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-14-close">(</span><span class="token number">1</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-14-open">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Test successful\n\n"</span><span class="token punctuation">;</span>
    <span class="token function">tester</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-15-close">(</span><span class="token number">2</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-15-open">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Test successful\n"</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-26-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_7_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_7"
        name="aswift_7"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=417145364&amp;adf=1653877450&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1749268329&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fexception-specifications-and-noexcept%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963761184&amp;bpp=1&amp;bdt=658&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280&amp;nras=4&amp;correlator=892357882414&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3066&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C31093235%2C95353386%2C95362656%2C95363183%2C95365226%2C95365234%2C95365114%2C95359266%2C95365119%2C95365798&amp;oid=2&amp;pvsid=8251017839727327&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=8&amp;uci=a!8&amp;btvi=2&amp;fsb=1&amp;dtd=18"
        data-google-container-id="a!8"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CNGD3cztrI4DFYbwTAIdA_EDVA"
      ></iframe></div
  ></ins>
</div>
<p>On the author’s machine, this program printed:</p>
<pre>
tester (noexcept) case 1 called
pt (potentially throwing) called
Throwing exception
Doomed destructed
tester caught exception
Test successful

tester (noexcept) case 2 called
nt (noexcept) called
throwing exception
terminate called after throwing an instance of 'int'
</pre>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_8_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_8"
        name="aswift_8"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=417145364&amp;adf=1154726832&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1749268329&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fexception-specifications-and-noexcept%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963761184&amp;bpp=1&amp;bdt=658&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280&amp;nras=5&amp;correlator=892357882414&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3657&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C31093235%2C95353386%2C95362656%2C95363183%2C95365226%2C95365234%2C95365114%2C95359266%2C95365119%2C95365798&amp;oid=2&amp;pvsid=8251017839727327&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=9&amp;uci=a!9&amp;btvi=3&amp;fsb=1&amp;dtd=19"
        data-google-container-id="a!9"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="COaf3sztrI4DFXb4TAIdNts70Q"
      ></iframe></div
  ></ins>
</div>
<p>and then the program aborted.</p>
<p>
  Let’s explore what’s happening here in more detail. Note that
  <code>tester</code> is a noexcept function, and thus promises not to expose
  any exception to the caller (<code>main</code>).
</p>
<div class="code-block code-block-4" style="margin: 8px 0; clear: both"></div>

<p>
  The first case illustrates that noexcept functions can call potentially
  throwing functions and even handle any exceptions those functions throw.
  First, <code>tester(1)</code> is called, which calls potentially throwing
  function <code>pt</code> , which calls <code>thrower</code>, which throws an
  exception. The first handler for this exception is in <code>tester</code>, so
  the exception unwinds the stack (destroying local variable
  <code>doomed</code> in the process), and the exception is caught and handled
  within <code>tester</code>. Because <code>tester</code> does not expose this
  exception to the caller (<code>main</code>), there is no violation of noexcept
  here, and control returns to <code>main</code>.
</p>
<p>
  The second case illustrates what happens when a noexcept function tries to
  pass an exception back to its caller. First, <code>tester(2)</code> is called,
  which calls non-throwing function <code>nt</code>, which calls
  <code>thrower</code>, which throws an exception. The first handler for this
  exception is in <code>tester</code>. However, <code>nt</code> is noexcept, and
  to get to the handler in <code>tester</code>, the exception would have to
  propagate to the caller of <code>nt</code>. That is a violation of the
  noexcept of <code>nt</code>, and so <code>std::terminate</code> is called, and
  our program is aborted immediately. On the author’s machine, the stack was not
  unwound (as illustrated by <code>doomed</code> not being destroyed).
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  The noexcept specifier with a Boolean parameter
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_9_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_9"
        name="aswift_9"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=417145364&amp;adf=1848718589&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1749268329&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fexception-specifications-and-noexcept%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963761187&amp;bpp=1&amp;bdt=661&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280%2C1027x280&amp;nras=6&amp;correlator=892357882414&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3696&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C31093235%2C95353386%2C95362656%2C95363183%2C95365226%2C95365234%2C95365114%2C95359266%2C95365119%2C95365798&amp;oid=2&amp;pvsid=8251017839727327&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=10&amp;uci=a!a&amp;btvi=4&amp;fsb=1&amp;dtd=265"
        data-google-container-id="a!a"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CIbh68ztrI4DFeQjewcdYv0Now"
      ></iframe></div
  ></ins>
</div>
<p>
  The <code>noexcept</code> specifier has an optional Boolean parameter.
  <code>noexcept(true)</code> is equivalent to <code>noexcept</code>, meaning
  the function is non-throwing. <code>noexcept(false)</code> means the function
  is potentially throwing. These parameters are typically only used in template
  functions, so that a template function can be dynamically created as
  non-throwing or potentially throwing based on some parameterized value.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Which functions are non-throwing and potentially-throwing
</p>
<div class="code-block code-block-5" style="margin: 8px 0; clear: both"></div>

<p>Functions that are implicitly non-throwing:</p>
<ul>
  <li>Destructors</li>
</ul>
<p>
  Functions that are non-throwing by default for implicitly-declared or
  defaulted functions:
</p>
<ul>
  <li>Constructors: default, copy, move</li>
  <li>Assignments: copy, move</li>
  <li>Comparison operators (as of C++20)</li>
</ul>
<p>
  However, if any of these functions call (explicitly or implicitly) another
  function which is potentially throwing, then the listed function will be
  treated as potentially throwing as well. For example, if a class has a data
  member with a potentially throwing constructor, then the class’s constructors
  will be treated as potentially throwing as well. As another example, if a copy
  assignment operator calls a potentially throwing assignment operator, then the
  copy assignment will be potentially throwing as well.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_10_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_10"
        name="aswift_10"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=417145364&amp;adf=4219590451&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1749268329&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fexception-specifications-and-noexcept%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963761189&amp;bpp=1&amp;bdt=664&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963528%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963528%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280%2C1027x280%2C1027x280&amp;nras=7&amp;correlator=892357882414&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3820&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C31093235%2C95353386%2C95362656%2C95363183%2C95365226%2C95365234%2C95365114%2C95359266%2C95365119%2C95365798&amp;oid=2&amp;pvsid=8251017839727327&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=11&amp;uci=a!b&amp;btvi=5&amp;fsb=1&amp;dtd=530"
        data-google-container-id="a!b"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CMqC_MztrI4DFXvwTAId7wwoPA"
      ></iframe></div
  ></ins>
</div>
<p>
  Functions that are potentially throwing (if not implicitly-declared or
  defaulted):
</p>
<ul>
  <li>Normal functions</li>
  <li>User-defined constructors</li>
  <li>User-defined operators</li>
</ul>
<p class="cpp-section cpp-topline" style="clear: both">The noexcept operator</p>
<p>
  The noexcept operator can also be used inside expressions. It takes an
  expression as an argument, and returns <code>true</code> or
  <code>false</code> if the compiler thinks it will throw an exception or not.
  The noexcept operator is checked statically at compile-time, and doesn’t
  actually evaluate the input expression.
</p>
<div class="code-block code-block-6" style="margin: 8px 0; clear: both"></div>

<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-void">void</span> <span class="token function">foo</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-27-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-27-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-1" id="pair-38-close">{</span><span class="token keyword keyword-throw">throw</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation brace-curly brace-close brace-level-1" id="pair-38-open">}</span>
<span class="token keyword keyword-void">void</span> <span class="token function">boo</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-28-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-28-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-1" id="pair-39-close">{</span><span class="token punctuation brace-curly brace-close brace-level-1" id="pair-39-open">}</span><span class="token punctuation">;</span>
<span class="token keyword keyword-void">void</span> <span class="token function">goo</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-29-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-29-open">)</span> <span class="token keyword keyword-noexcept">noexcept</span> <span class="token punctuation brace-curly brace-open brace-level-1" id="pair-40-close">{</span><span class="token punctuation brace-curly brace-close brace-level-1" id="pair-40-open">}</span><span class="token punctuation">;</span>
<span class="token keyword keyword-struct">struct</span> <span class="token class-name">S</span><span class="token punctuation brace-curly brace-open brace-level-1" id="pair-41-close">{</span><span class="token punctuation brace-curly brace-close brace-level-1" id="pair-41-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-constexpr">constexpr</span> <span class="token keyword keyword-bool">bool</span> b1<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-42-close">{</span> <span class="token keyword keyword-noexcept">noexcept</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-30-close">(</span><span class="token number">5</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-30-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-1" id="pair-42-open">}</span><span class="token punctuation">;</span> <span class="token comment">// true; ints are non-throwing</span>
<span class="token keyword keyword-constexpr">constexpr</span> <span class="token keyword keyword-bool">bool</span> b2<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-43-close">{</span> <span class="token keyword keyword-noexcept">noexcept</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-32-close">(</span><span class="token function">foo</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-31-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-31-open">)</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-32-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-1" id="pair-43-open">}</span><span class="token punctuation">;</span> <span class="token comment">// false; foo() throws an exception</span>
<span class="token keyword keyword-constexpr">constexpr</span> <span class="token keyword keyword-bool">bool</span> b3<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-44-close">{</span> <span class="token keyword keyword-noexcept">noexcept</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-34-close">(</span><span class="token function">boo</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-33-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-33-open">)</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-34-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-1" id="pair-44-open">}</span><span class="token punctuation">;</span> <span class="token comment">// false; boo() is implicitly noexcept(false)</span>
<span class="token keyword keyword-constexpr">constexpr</span> <span class="token keyword keyword-bool">bool</span> b4<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-45-close">{</span> <span class="token keyword keyword-noexcept">noexcept</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-36-close">(</span><span class="token function">goo</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-35-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-35-open">)</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-36-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-1" id="pair-45-open">}</span><span class="token punctuation">;</span> <span class="token comment">// true; goo() is explicitly noexcept(true)</span>
<span class="token keyword keyword-constexpr">constexpr</span> <span class="token keyword keyword-bool">bool</span> b5<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-47-close">{</span> <span class="token keyword keyword-noexcept">noexcept</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-37-close">(</span>S<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-46-close">{</span><span class="token punctuation brace-curly brace-close brace-level-3" id="pair-46-open">}</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-37-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-1" id="pair-47-open">}</span><span class="token punctuation">;</span>   <span class="token comment">// true; a struct's default constructor is noexcept by default</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_11_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<p>
  The noexcept operator can be used to conditionally execute code depending on
  whether it is potentially throwing or not. This is required to fulfill certain
  <strong>exception safety guarantees</strong>, which we’ll talk about in the
  next section.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Exception safety guarantees
</p>
<p>
  An <strong>exception safety guarantee</strong> is a contractual guideline
  about how functions or classes will behave in the event an exception occurs.
  There are four levels of exception safety guarantees:
</p>
<ul>
  <li>
    No guarantee -- There are no guarantees about what will happen if an
    exception is thrown (e.g. a class may be left in an unusable state)
  </li>
  <li>
    Basic guarantee -- If an exception is thrown, no memory will be leaked and
    the object is still usable, but the program may be left in a modified state.
  </li>
  <li>
    Strong guarantee -- If an exception is thrown, no memory will be leaked and
    the program state will not be changed. This means the function must either
    completely succeed or have no side effects if it fails. This is easy if the
    failure happens before anything is modified in the first place, but can also
    be achieved by rolling back any changes so the program is returned to the
    pre-failure state.
  </li>
  <li>
    No throw / No fail guarantee -- The function will always succeed (no-fail)
    or fail without throwing an exception that is exposed to the caller
    (no-throw). Exceptions may be thrown internally if not exposed. The
    <code>noexcept</code> specifier maps to this level of exception safety
    guarantee.
  </li>
</ul>
<p>Let’s look at the no-throw/no-fail guarantees in more detail:</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_12_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<p>
  The no-throw guarantee: if a function fails, then it won’t throw an exception.
  Instead, it will return an error code or ignore the problem. No-throw
  guarantees are required during stack unwinding when an exception is already
  being handled; for example, all destructors should have a no-throw guarantee
  (as should any functions those destructors call). Examples of code that should
  be no-throw:
</p>
<ul>
  <li>destructors and memory deallocation/cleanup functions</li>
  <li>functions that higher-level no-throw functions need to call</li>
</ul>
<p>
  The no-fail guarantee: a function will always succeed in what it tries to do
  (and thus never has a need to throw an exception, thus, no-fail is a slightly
  stronger form of no-throw). Examples of code that should be no-fail:
</p>
<div class="code-block code-block-7" style="margin: 8px 0; clear: both"></div>

<ul>
  <li>
    move constructors and move assignment (move semantics, covered in
    <a href="https://www.learncpp.com#Chapter22">chapter 22</a>)
  </li>
  <li>swap functions</li>
  <li>clear/erase/reset functions on containers</li>
  <li>
    operations on std::unique_ptr (also covered in
    <a href="https://www.learncpp.com#Chapter22">chapter 22</a>)
  </li>
  <li>functions that higher-level no-fail functions need to call</li>
</ul>
<p class="cpp-section cpp-topline" style="clear: both">When to use noexcept</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_13_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<p>
  Just because your code doesn’t explicitly throw any exceptions doesn’t mean
  you should start sprinkling <code>noexcept</code> around your code. By
  default, most functions are potentially throwing, so if your function calls
  other functions, there is a good chance it calls a function that is
  potentially throwing, and thus is potentially throwing too.
</p>
<p>There are a few good reasons to mark functions a non-throwing:</p>
<ul>
  <li>
    Non-throwing functions can be safely called from functions that are not
    exception-safe, such as destructors
  </li>
  <li>
    Functions that are noexcept can enable the compiler to perform some
    optimizations that would not otherwise be available. Because a noexcept
    function cannot throw an exception outside the function, the compiler
    doesn’t have to worry about keeping the runtime stack in an unwindable
    state, which can allow it to produce faster code.
  </li>
  <li>
    There are significant cases where knowing a function is noexcept allows us
    to produce more efficient implementations in our own code: the standard
    library containers (such as <code>std::vector</code>) are noexcept aware and
    will use the noexcept operator to determine whether to use
    <code>move semantics</code> (faster) or <code>copy semantics</code> (slower)
    in some places. We cover move semantics in
    <a href="https://www.learncpp.com#Chapter22">chapter 22</a>, and this
    optimization in lesson
    <a href="https://www.learncpp.com/cpp-tutorial/stdmove_if_noexcept/"
      >27.10 -- std::move_if_noexcept</a
    >.
  </li>
</ul>
<p>
  The standard library’s policy is to use <code>noexcept</code> only on
  functions that <em>must not</em> throw or fail. Functions that are potentially
  throwing but do not actually throw exceptions (due to implementation)
  typically are not marked as <code>noexcept</code>.
</p>
<p>For your own code, always mark the following as <code>noexcept</code>:</p>
<ul>
  <li>Move constructors</li>
  <li>Move assignment operators</li>
  <li>Swap functions</li>
</ul>
<p>For your code, consider marking the following as <code>noexcept</code>:</p>
<div class="code-block code-block-8" style="margin: 8px 0; clear: both"></div>

<ul>
  <li>
    Functions for which you want to express a no-throw or no-fail guarantee
    (e.g. to document that they can be safely called from destructors or other
    noexcept functions)
  </li>
  <li>
    Copy constructors and copy assignment operators that are no-throw (to take
    advantage of optimizations).
  </li>
  <li>
    Destructors. Destructors are implicitly noexcept so long as all members have
    noexcept destructors
  </li>
</ul>
<div class="cpp-note cpp-lightgreenbackground">
  <p class="cpp-note-title cpp-bottomline">Best practice</p>
  <p>
    Always make move constructors, move assignment, and swap functions
    <code>noexcept</code>.
  </p>
  <p>
    Make copy constructors and copy assignment operators
    <code>noexcept</code> when you can.
  </p>
  <p>
    Use <code>noexcept</code> on other functions to express a no-fail or
    no-throw guarantee.
  </p>
</div>
<div class="cpp-note cpp-lightgreenbackground">
  <p class="cpp-note-title cpp-bottomline">Best practice</p>
  <p>
    If you are uncertain whether a function should have a no-fail/no-throw
    guarantee, err on the side of caution and do not mark it with
    <code>noexcept</code>. Reversing a decision to use noexcept violates an
    interface commitment to the user about the behavior of the function, and may
    break existing code. Making guarantees stronger by later adding noexcept to
    a function that was not originally noexcept is considered safe.
  </p>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Dynamic exception specifications
</p>
<div class="cpp-note cpp-lightgraybackground">
  <p class="cpp-note-title cpp-bottomline">Optional reading</p>
  <p>
    Before C++11, and until C++17,
    <em>dynamic exception specifications</em> were used in place of
    <code>noexcept</code>. The
    <strong>dynamic exception specifications</strong> syntax uses the
    <code>throw</code> keyword to list which exception types a function might
    directly or indirectly throw:
  </p>
  <div class="code-toolbar">
    <pre
      class="line-numbers language-cpp"
      tabindex="0"
    ><code class="match-braces language-cpp"><span class="token keyword keyword-int">int</span> <span class="token function">doSomething</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-48-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-48-open">)</span> <span class="token keyword keyword-throw">throw</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-49-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-49-open">)</span><span class="token punctuation">;</span> <span class="token comment">// does not throw exceptions</span>
<span class="token keyword keyword-int">int</span> <span class="token function">doSomething</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-50-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-50-open">)</span> <span class="token keyword keyword-throw">throw</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-51-close">(</span>std<span class="token double-colon punctuation">::</span>out_of_range<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span><span class="token operator">*</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-51-open">)</span><span class="token punctuation">;</span> <span class="token comment">// may throw either std::out_of_range or a pointer to an integer</span>
<span class="token keyword keyword-int">int</span> <span class="token function">doSomething</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-52-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-52-open">)</span> <span class="token keyword keyword-throw">throw</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-53-close">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-53-open">)</span><span class="token punctuation">;</span> <span class="token comment">// may throw anything</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
    <div class="toolbar">
      <div class="toolbar-item">
        <button
          class="copy-to-clipboard-button"
          type="button"
          data-copy-state="copy"
        >
          <span>Copy</span>
        </button>
      </div>
    </div>
  </div>
  <p>
    Due to factors such as incomplete compiler implementations, some
    incompatibility with template functions, common misunderstandings about how
    they worked, and the fact that the standard library mostly didn’t use them,
    the dynamic exception specifications were deprecated in C++11 and removed
    from the language in C++17 and C++20. See
    <a
      href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0003r0.html#2.0"
      >this paper</a
    >
    for more context.
  </p>
</div>
<div class="prevnext">
  <div class="prevnext-inline">
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/stdmove_if_noexcept/"
    >
      <div class="nav-button nav-button-next">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-right" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Next lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">27.10</span
            >std::move_if_noexcept
          </div>
        </div>
      </div></a
    >
    <a class="nav-link" href="/">
      <div class="nav-button nav-button-index">
        <div class="nav-button-icon">
          <i class="fa fa-home" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Back to table of contents</div>
        </div>
      </div></a
    >
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/exception-dangers-and-downsides/"
    >
      <div class="nav-button nav-button-prev">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-left" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Previous lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">27.8</span>Exception dangers
            and downsides
          </div>
        </div>
      </div></a
    >
  </div>
</div>
<div class="code-block code-block-10" style="margin: 8px 0; clear: both"></div>
