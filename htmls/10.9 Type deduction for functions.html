<div
  class="code-block code-block-1"
  style="margin: 8px 8px 8px 0; float: left"
></div>
<p>Consider the following program:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-int">int</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-116-close">(</span><span class="token keyword keyword-int">int</span> x<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-116-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-117-close">{</span>
    <span class="token keyword keyword-return">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-117-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  When this function is compiled, the compiler will determine that
  <code>x + y</code>evaluates to an <code>int</code>, then ensure that type of
  the return value matches the declared return type of the function (or that the
  return value type can be converted to the declared return type).
</p>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Return type deduction with <code>auto</code>
</p>
<p>
  Since the compiler already has to deduce the return type from the return
  statement (to ensure that the value can be converted to the function’s
  declared return type), in C++14, the <code>auto</code> keyword was extended to
  do function return type deduction. This works by using the
  <code>auto</code> keyword in place of the function’s return type.
</p>
<p>For example:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-auto">auto</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-118-close">(</span><span class="token keyword keyword-int">int</span> x<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-118-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-119-close">{</span>
    <span class="token keyword keyword-return">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-119-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Because the return statement is returning an <code>int</code> value, the
  compiler will deduce that the return type of this function is
  <code>int</code>.
</p>
<p>
  When using an <code>auto</code> return type, all return statements within the
  function must return values of the same type, otherwise an error will result.
  For example:
</p>
<div class="code-block code-block-2" style="margin: 8px 0; clear: both"></div>

<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-auto">auto</span> <span class="token function">someFcn</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-120-close">(</span><span class="token keyword keyword-bool">bool</span> b<span class="token punctuation brace-round brace-close brace-level-1" id="pair-120-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-122-close">{</span>
    <span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-121-close">(</span>b<span class="token punctuation brace-round brace-close brace-level-2" id="pair-121-open">)</span>
        <span class="token keyword keyword-return">return</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// return type int</span>
    <span class="token keyword keyword-else">else</span>
        <span class="token keyword keyword-return">return</span> <span class="token number">6.7</span><span class="token punctuation">;</span> <span class="token comment">// return type double</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-122-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In the above function, the two return statements return values of different
  types, so the compiler will give an error.
</p>
<p>
  If such a case is desired for some reason, you can either explicitly specify a
  return type for your function (in which case the compiler will try to
  implicitly convert any non-matching return expressions to the explicit return
  type), or you can explicitly convert all of your return statements to the same
  type. In the example above, the latter could be done by changing
  <code>5</code> to <code>5.0</code>, but <code>static_cast</code> can also be
  used for non-literal types.
</p>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Benefits of return type deduction
</p>
<p>
  The biggest advantage of return type deduction is that having the compiler
  deduce the function’s return type negates the risk of a mismatched return type
  (preventing unexpected conversions).
</p>
<p>
  This can be particularly useful when a function’s return type is fragile
  (cases where return type is likely to change if the implementation changes).
  In such cases, being explicit about the return type means having to update all
  relevant return types when an impacting change is made to the implementation.
  If we’re lucky, the compiler will error until we update the relevant return
  types. If we’re not lucky, we’ll get implicit conversions where we don’t
  desire them.
</p>
<div class="code-block code-block-3" style="margin: 8px 0; clear: both"></div>

<p>
  In other cases, the return type of a function may either be long and complex,
  or not be that obvious. In such cases, <code>auto</code> can be used to
  simplify:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token comment">// let compiler determine the return type of unsigned short + char</span>
<span class="token keyword keyword-auto">auto</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-123-close">(</span><span class="token keyword keyword-unsigned">unsigned</span> <span class="token keyword keyword-short">short</span> x<span class="token punctuation">,</span> <span class="token keyword keyword-char">char</span> y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-123-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-124-close">{</span>
    <span class="token keyword keyword-return">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-124-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  We discuss this case a bit more (and how to express the actual return type of
  such a function) in lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/function-templates-with-multiple-template-types/"
    >11.8 -- Function templates with multiple template types</a
  >.
</p>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Downsides of return type deduction
</p>
<p>There are two major downsides to return type deduction:</p>
<ol start="1">
  <li>
    Functions that use an <code>auto</code> return type must be fully defined
    before they can be used (a forward declaration is not sufficient). For
    example:
  </li>
</ol>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-auto">auto</span> <span class="token function">foo</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-125-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-125-open">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-126-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-126-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-129-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">foo</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-127-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-127-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span> <span class="token comment">// the compiler has only seen a forward declaration at this point</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-129-open">}</span>

<span class="token keyword keyword-auto">auto</span> <span class="token function">foo</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-128-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-128-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-130-close">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-130-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>On the author’s machine, this gives the following compile error:</p>
<div class="code-block code-block-4" style="margin: 8px 0; clear: both"></div>

<pre>
error C3779: 'foo': a function that returns 'auto' cannot be used before it is defined.
</pre>
<p>
  This makes sense: a forward declaration does not have enough information for
  the compiler to deduce the function’s return type. This means normal functions
  that return <code>auto</code> are typically only callable from within the file
  in which they are defined.
</p>
<ol start="2">
  <li>
    When using type deduction with objects, the initializer is always present as
    part of the same statement, so it’s usually not overly burdensome to
    determine what type will be deduced. With type deduction for functions, that
    is not the case -- the function’s prototype gives no indication as to what
    type the function actually returns. A good programming IDE should make clear
    what the deduced type of the function is, but in absence of having that
    available, a user would actually have to dig into the function body itself
    to determine what type the function returned. The odds of mistakes being
    made are higher. Generally we prefer to be explicit about types that are
    part of an interface (a function’s declaration is an interface).
  </li>
</ol>
<p>
  Unlike type deduction for objects, there isn’t as much consensus on best
  practices for function return type deduction. We recommend generally avoiding
  return type deduction for functions.
</p>
<div class="cpp-note cpp-lightgreenbackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">Best practice</p>
  <p>
    Prefer explicit return types over return type deduction (except in cases
    where the return type is unimportant, difficult to express, or fragile).
  </p>
</div>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Trailing return type syntax
</p>
<p>
  The <code>auto</code> keyword can also be used to declare functions using a
  <strong>trailing return syntax</strong>, where the return type is specified
  after the rest of the function prototype.
</p>
<p>Consider the following function:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-int">int</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-131-close">(</span><span class="token keyword keyword-int">int</span> x<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-131-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-133-close">{</span>
  <span class="token keyword keyword-return">return</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-132-close">(</span>x <span class="token operator">+</span> y<span class="token punctuation brace-round brace-close brace-level-2" id="pair-132-open">)</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-133-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>Using the trailing return syntax, this could be equivalently written as:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-auto">auto</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-134-close">(</span><span class="token keyword keyword-int">int</span> x<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-134-open">)</span> <span class="token operator">-&gt;</span> <span class="token keyword keyword-int">int</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-136-close">{</span>
  <span class="token keyword keyword-return">return</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-135-close">(</span>x <span class="token operator">+</span> y<span class="token punctuation brace-round brace-close brace-level-2" id="pair-135-open">)</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-136-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In this case, <code>auto</code> does not perform type deduction -- it is just
  part of the syntax to use a trailing return type.
</p>
<div class="code-block code-block-5" style="margin: 8px 0; clear: both"></div>

<p>Why would you want to use this? Here are some reasons:</p>
<ol start="1">
  <li>
    For functions with complex return types, a trailing return type can make the
    function easier to read:
  </li>
</ol>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;type_traits&gt;</span> <span class="token comment">// for std::common_type</span></span>

std<span class="token double-colon punctuation">::</span>common_type_t<span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token punctuation">,</span> <span class="token keyword keyword-double">double</span><span class="token operator">&gt;</span> <span class="token function">compare</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-137-close">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">,</span> <span class="token keyword keyword-double">double</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-137-open">)</span><span class="token punctuation">;</span>         <span class="token comment">// harder to read (where is the name of the function in this mess?)</span>
<span class="token keyword keyword-auto">auto</span> <span class="token function">compare</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-138-close">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">,</span> <span class="token keyword keyword-double">double</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-138-open">)</span> <span class="token operator">-&gt;</span> std<span class="token double-colon punctuation">::</span>common_type_t<span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token punctuation">,</span> <span class="token keyword keyword-double">double</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// easier to read (we don't have to read the return type unless we care)</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 32px;"></span><span style="height: 32px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<ol start="2">
  <li>
    The trailing return type syntax can be used to align the names of your
    functions, which makes consecutive function declarations easier to read:
  </li>
</ol>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-auto">auto</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-139-close">(</span><span class="token keyword keyword-int">int</span> x<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-139-open">)</span> <span class="token operator">-&gt;</span> <span class="token keyword keyword-int">int</span><span class="token punctuation">;</span>
<span class="token keyword keyword-auto">auto</span> <span class="token function">divide</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-140-close">(</span><span class="token keyword keyword-double">double</span> x<span class="token punctuation">,</span> <span class="token keyword keyword-double">double</span> y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-140-open">)</span> <span class="token operator">-&gt;</span> <span class="token keyword keyword-double">double</span><span class="token punctuation">;</span>
<span class="token keyword keyword-auto">auto</span> <span class="token function">printSomething</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-141-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-141-open">)</span> <span class="token operator">-&gt;</span> <span class="token keyword keyword-void">void</span><span class="token punctuation">;</span>
<span class="token keyword keyword-auto">auto</span> <span class="token function">generateSubstring</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-142-close">(</span><span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> start<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> len<span class="token punctuation brace-round brace-close brace-level-1" id="pair-142-open">)</span> <span class="token operator">-&gt;</span> std<span class="token double-colon punctuation">::</span>string<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div class="cpp-note cpp-lightgraybackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">For advanced readers</p>
  <ol start="3">
    <li>
      If we have a function whose return type must be deduced based on the type
      of the function parameters, a normal return type will not suffice, because
      the compiler has not yet seen the parameters at that point.
    </li>
  </ol>
  <div class="code-toolbar">
    <pre
      class="line-numbers language-cpp"
      tabindex="0"
    ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;type_traits&gt;</span></span>
<span class="token comment">// note: decltype(x) evaluates to the type of x</span>

std<span class="token double-colon punctuation">::</span>common_type_t<span class="token operator">&lt;</span><span class="token keyword keyword-decltype">decltype</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-143-close">(</span>x<span class="token punctuation brace-round brace-close brace-level-1" id="pair-143-open">)</span><span class="token punctuation">,</span> <span class="token keyword keyword-decltype">decltype</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-144-close">(</span>y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-144-open">)</span><span class="token operator">&gt;</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-145-close">(</span><span class="token keyword keyword-int">int</span> x<span class="token punctuation">,</span> <span class="token keyword keyword-double">double</span> y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-145-open">)</span><span class="token punctuation">;</span>         <span class="token comment">// Compile error: compiler hasn't seen definitions of x and y yet</span>
<span class="token keyword keyword-auto">auto</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-146-close">(</span><span class="token keyword keyword-int">int</span> x<span class="token punctuation">,</span> <span class="token keyword keyword-double">double</span> y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-146-open">)</span> <span class="token operator">-&gt;</span> std<span class="token double-colon punctuation">::</span>common_type_t<span class="token operator">&lt;</span><span class="token keyword keyword-decltype">decltype</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-147-close">(</span>x<span class="token punctuation brace-round brace-close brace-level-1" id="pair-147-open">)</span><span class="token punctuation">,</span> <span class="token keyword keyword-decltype">decltype</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-148-close">(</span>y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-148-open">)</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// ok</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 32px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
    <div class="toolbar">
      <div class="toolbar-item">
        <button
          class="copy-to-clipboard-button"
          type="button"
          data-copy-state="copy"
        >
          <span>Copy</span>
        </button>
      </div>
    </div>
  </div>
  <ol start="4">
    <li>
      The trailing return syntax is also required for some advanced features of
      C++, such as lambdas (which we cover in lesson
      <a
        href="https://www.learncpp.com/cpp-tutorial/introduction-to-lambdas-anonymous-functions/"
        >20.6 -- Introduction to lambdas (anonymous functions)</a
      >).
    </li>
  </ol>
</div>
<p>
  For now, we recommend the continued use of the traditional function return
  syntax except in situations that require the trailing return syntax.
</p>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Type deduction can’t be used for function parameter types
</p>
<p>
  Many new programmers who learn about type deduction try something like this:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-void">void</span> <span class="token function">addAndPrint</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-149-close">(</span><span class="token keyword keyword-auto">auto</span> x<span class="token punctuation">,</span> <span class="token keyword keyword-auto">auto</span> y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-149-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-153-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> x <span class="token operator">+</span> y <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-153-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-150-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-150-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-154-close">{</span>
    <span class="token function">addAndPrint</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-151-close">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-151-open">)</span><span class="token punctuation">;</span> <span class="token comment">// case 1: call addAndPrint with int parameters</span>
    <span class="token function">addAndPrint</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-152-close">(</span><span class="token number">4.5</span><span class="token punctuation">,</span> <span class="token number">6.7</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-152-open">)</span><span class="token punctuation">;</span> <span class="token comment">// case 2: call addAndPrint with double parameters</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-154-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Unfortunately, type deduction doesn’t work for function parameters, and prior
  to C++20, the above program won’t compile (you’ll get an error about function
  parameters not being able to have an auto type).
</p>
<div class="code-block code-block-6" style="margin: 8px 0; clear: both"></div>

<p>
  In C++20, the <code>auto</code> keyword was extended so that the above program
  will compile and function correctly -- however, <code>auto</code> is not
  invoking type deduction in this case. Rather, it is triggering a different
  feature called <code>function templates</code> that was designed to actually
  handle such cases.
</p>
<div class="cpp-note cpp-lightgraybackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">Related content</p>
  <p>
    We introduce function templates in lesson
    <a href="https://www.learncpp.com/cpp-tutorial/function-templates/"
      >11.6 -- Function templates</a
    >, and discuss use of <code>auto</code> in the context of function templates
    in lesson
    <a
      href="https://www.learncpp.com/cpp-tutorial/function-templates-with-multiple-template-types/"
      >11.8 -- Function templates with multiple template types</a
    >.
  </p>
</div>
<div class="prevnext">
  <div class="prevnext-inline">
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/chapter-10-summary-and-quiz/"
    >
      <div class="nav-button nav-button-next">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-right" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Next lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">10.x</span>Chapter 10 summary
            and quiz
          </div>
        </div>
      </div></a
    >
    <a class="nav-link" href="/">
      <div class="nav-button nav-button-index">
        <div class="nav-button-icon">
          <i class="fa fa-home" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Back to table of contents</div>
        </div>
      </div></a
    >
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/type-deduction-for-objects-using-the-auto-keyword/"
    >
      <div class="nav-button nav-button-prev">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-left" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Previous lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">10.8</span>Type deduction for
            objects using the auto keyword
          </div>
        </div>
      </div></a
    >
  </div>
</div>
<div class="code-block code-block-10" style="margin: 8px 0; clear: both"></div>
