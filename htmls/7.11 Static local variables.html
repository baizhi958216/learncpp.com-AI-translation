<div
  class="code-block code-block-1"
  style="margin: 8px 8px 8px 0; float: left"
></div>
<p>
  The term <code>static</code> is one of the most confusing terms in the C++
  language, in large part because <code>static</code> has different meanings in
  different contexts.
</p>
<p>
  In prior lessons, we covered that global variables have static duration, which
  means they are created when the program starts and destroyed when the program
  ends.
</p>
<p>
  We also discussed how the <code>static</code> keyword gives a global
  identifier internal-linkage, which means the identifier can only be used in
  the file in which it is defined.
</p>
<p>
  In this lesson, we’ll explore the use of the <code>static</code> keyword when
  applied to a local variable.
</p>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Static local variables
</p>
<p>
  In lesson
  <a href="https://www.learncpp.com/cpp-tutorial/introduction-to-local-scope/"
    >2.5 -- Introduction to local scope</a
  >, you learned that local variables have automatic duration by default, which
  means they are created at the point of definition, and destroyed when the
  block is exited.
</p>
<div class="code-block code-block-2" style="margin: 8px 0; clear: both"></div>
<p>
  Using the <code>static</code> keyword on a local variable changes its duration
  from automatic duration to static duration. This means the variable is now
  created at the start of the program, and destroyed at the end of the program
  (just like a global variable). As a result, the static variable will retain
  its value even after it goes out of scope!
</p>
<p>
  The easiest way to show the difference between automatic duration and static
  duration local variables is by example.
</p>
<p>Automatic duration (default):</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-void">void</span> <span class="token function">incrementAndPrint</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-141-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-141-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-147-close">{</span>
    <span class="token keyword keyword-int">int</span> value<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-146-close">{</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-146-open">}</span><span class="token punctuation">;</span> <span class="token comment">// automatic duration by default</span>
    <span class="token operator">++</span>value<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> value <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-147-open">}</span> <span class="token comment">// value is destroyed here</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-142-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-142-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-148-close">{</span>
    <span class="token function">incrementAndPrint</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-143-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-143-open">)</span><span class="token punctuation">;</span>
    <span class="token function">incrementAndPrint</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-144-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-144-open">)</span><span class="token punctuation">;</span>
    <span class="token function">incrementAndPrint</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-145-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-145-open">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-148-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Each time <code>incrementAndPrint()</code> is called, a variable named value
  is created and assigned the value of <code>1</code>.
  <code>incrementAndPrint()</code> increments value to <code>2</code>, and then
  prints the value of <code>2</code>. When <code>incrementAndPrint()</code> is
  finished running, the variable goes out of scope and is destroyed.
  Consequently, this program outputs:
</p>
<pre>
2
2
2
</pre>
<p>
  Now consider a version of this program that uses a static local variable. The
  only difference between this and the above program is that we’ve changed the
  local variable from automatic duration to static duration by using the
  <code>static</code> keyword.
</p>
<p>Static duration (using static keyword):</p>
<div class="code-block code-block-3" style="margin: 8px 0; clear: both"></div>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-void">void</span> <span class="token function">incrementAndPrint</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-149-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-149-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-155-close">{</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-int">int</span> s_value<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-154-close">{</span> <span class="token number">1</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-154-open">}</span><span class="token punctuation">;</span> <span class="token comment">// static duration via static keyword.  This initializer is only executed once.</span>
    <span class="token operator">++</span>s_value<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> s_value <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-155-open">}</span> <span class="token comment">// s_value is not destroyed here, but becomes inaccessible because it goes out of scope</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-150-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-150-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-156-close">{</span>
    <span class="token function">incrementAndPrint</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-151-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-151-open">)</span><span class="token punctuation">;</span>
    <span class="token function">incrementAndPrint</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-152-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-152-open">)</span><span class="token punctuation">;</span>
    <span class="token function">incrementAndPrint</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-153-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-153-open">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-156-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In this program, because <code>s_value</code> has been declared as
  <code>static</code>, it is created at the program start.
</p>
<p>
  Static local variables that are zero-initialized or have a constexpr
  initializer can be initialized at program start.
</p>
<p>
  Static local variables that have no initializer or a non-constexpr initializer
  are zero-initialized at program start. Static local variables with a
  non-constexpr initializer are reinitialized the first time the variable
  definition is encountered. The definition is skipped on subsequent calls, so
  no futher reinitialization happens. Because they have static duration, static
  local variables that are not explicitly initialized will be zero-initialized
  by default.
</p>
<p>
  Because <code>s_value</code> has constexpr initializer <code>1</code>,
  <code>s_value</code> will be initialized at program start.
</p>
<p>
  When <code>s_value</code> goes out of scope at the end of the function, it is
  not destroyed. Each time the function <code>incrementAndPrint()</code> is
  called, the value of <code>s_value</code> remains at whatever we left it at
  previously. Consequently, this program outputs:
</p>
<div class="code-block code-block-4" style="margin: 8px 0; clear: both"></div>
<pre>
2
3
4
</pre>
<div class="cpp-note cpp-lightbluebackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">Key insight</p>
  <p>
    Static local variables are used when you need a local variable to remember
    its value across function calls.
  </p>
</div>
<div class="cpp-note cpp-lightgreenbackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">Best practice</p>
  <p>
    Initialize your static local variables. Static local variables are only
    initialized the first time the code is executed, not on subsequent calls.
  </p>
</div>
<div class="cpp-note cpp-lightbluebackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">Tip</p>
  <p>
    Just like we use “g_” to prefix global variables, it’s common to use “s_” to
    prefix static (static duration) local variables.
  </p>
</div>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  ID generation
</p>
<p>
  One of the most common uses for static duration local variables is for unique
  ID generators. Imagine a program where you have many similar objects (e.g. a
  game where you’re being attacked by many zombies, or a simulation where you’re
  displaying many triangles). If you notice a defect, it can be near impossible
  to distinguish which object is having problems. However, if each object is
  given a unique identifier upon creation, then it can be easier to
  differentiate the objects for further debugging.
</p>
<p>
  Generating a unique ID number is very easy to do with a static duration local
  variable:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-int">int</span> <span class="token function">generateID</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-157-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-157-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-159-close">{</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-int">int</span> s_itemID<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-158-close">{</span> <span class="token number">0</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-158-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> s_itemID<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// makes copy of s_itemID, increments the real s_itemID, then returns the value in the copy</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-159-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  The first time this function is called, it returns <code>0</code>. The second
  time, it returns <code>1</code>. Each time it is called, it returns a number
  one higher than the previous time it was called. You can assign these numbers
  as unique IDs for your objects. Because <code>s_itemID</code> is a local
  variable, it can not be “tampered with” by other functions.
</p>
<p>
  Static variables offer some of the benefit of global variables (they don’t get
  destroyed until the end of the program) while limiting their visibility to
  block scope. This makes them easier to understand and safer to use.
</p>
<div class="cpp-note cpp-lightbluebackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">Key insight</p>
  <p>
    A static local variable has block scope like a local variable, but its
    lifetime is until the end of the program like a global variable.
  </p>
</div>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Static local constants
</p>
<p>
  Static local variables can be made const (or constexpr). One good use for a
  const static local variable is when you have a function that needs to use a
  const value, but creating or initializing the object is expensive (e.g. you
  need to read the value from a database). If you used a normal local variable,
  the variable would be created and initialized every time the function was
  executed. With a const/constexpr static local variable, you can create and
  initialize the expensive object once, and then reuse it whenever the function
  is called.
</p>
<div class="code-block code-block-5" style="margin: 8px 0; clear: both"></div>
<div class="cpp-note cpp-lightbluebackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">Key insight</p>
  <p>
    Static local variables are best used to avoid expensive local object
    initialization each time a function is called.
  </p>
</div>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Don’t use static local variables to alter flow
</p>
<p>Consider the following code:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">getInteger</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-160-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-160-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-170-close">{</span>
	<span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> s_isFirstCall<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-166-close">{</span> <span class="token boolean">true</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-166-open">}</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-161-close">(</span>s_isFirstCall<span class="token punctuation brace-round brace-close brace-level-2" id="pair-161-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-167-close">{</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Enter an integer: "</span><span class="token punctuation">;</span>
		s_isFirstCall <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-167-open">}</span>
	<span class="token keyword keyword-else">else</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-168-close">{</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Enter another integer: "</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-168-open">}</span>

	<span class="token keyword keyword-int">int</span> i<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-169-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-169-open">}</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> i<span class="token punctuation">;</span>
	<span class="token keyword keyword-return">return</span> i<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-170-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-162-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-162-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-173-close">{</span>
	<span class="token keyword keyword-int">int</span> a<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-171-close">{</span> <span class="token function">getInteger</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-163-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-163-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-171-open">}</span><span class="token punctuation">;</span>
	<span class="token keyword keyword-int">int</span> b<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-172-close">{</span> <span class="token function">getInteger</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-164-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-164-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-172-open">}</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> <span class="token string">" + "</span> <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> <span class="token string">" = "</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-165-close">(</span>a <span class="token operator">+</span> b<span class="token punctuation brace-round brace-close brace-level-2" id="pair-165-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-173-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>Sample output</p>
<pre>
Enter an integer: 5
Enter another integer: 9
5 + 9 = 14
</pre>
<p>
  This code does what it’s supposed to do, but because we used a static local
  variable, we made the code harder to understand. If someone reads the code in
  <code>main()</code> without reading the implementation of
  <code>getInteger()</code>, they’d have no reason to assume that the two calls
  to <code>getInteger()</code> do something different. But the two calls do
  something different, which can be very confusing if the difference is more
  than a changed prompt.
</p>
<p>
  Say you press the +1 button on your microwave and the microwave adds 1 minute
  to the remaining time. Your meal is warm and you’re happy. Before you take
  your meal out of the microwave, you see a cat outside your window and watch it
  for a moment, because cats are cool. The moment turned out to be longer than
  you expected and when you take the first bite of your meal, it’s cold again.
  No problem, just put it back into the microwave and press +1 to run it for a
  minute. But this time the microwave adds only 1 second and not 1 minute.
  That’s when you go “I changed nothing and now it’s broken” or “It worked last
  time”. If you do the same thing again, you’d expect the same behavior as last
  time. The same goes for functions.
</p>
<p>
  Suppose we want to add subtraction to the calculator such that the output
  looks like the following:
</p>
<pre>
Addition
Enter an integer: 5
Enter another integer: 9
5 + 9 = 14
Subtraction
Enter an integer: 12
Enter another integer: 3
12 - 3 = 9
</pre>
<p>
  We might try to use <code>getInteger()</code> to read in the next two integers
  like we did for addition.
</p>
<div class="code-block code-block-6" style="margin: 8px 0; clear: both"></div>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-174-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-174-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-185-close">{</span>
  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Addition\n"</span><span class="token punctuation">;</span>

  <span class="token keyword keyword-int">int</span> a<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-181-close">{</span> <span class="token function">getInteger</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-175-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-175-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-181-open">}</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-int">int</span> b<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-182-close">{</span> <span class="token function">getInteger</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-176-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-176-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-182-open">}</span><span class="token punctuation">;</span>

  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> <span class="token string">" + "</span> <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> <span class="token string">" = "</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-177-close">(</span>a <span class="token operator">+</span> b<span class="token punctuation brace-round brace-close brace-level-2" id="pair-177-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Subtraction\n"</span><span class="token punctuation">;</span>

  <span class="token keyword keyword-int">int</span> c<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-183-close">{</span> <span class="token function">getInteger</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-178-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-178-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-183-open">}</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-int">int</span> d<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-184-close">{</span> <span class="token function">getInteger</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-179-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-179-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-184-open">}</span><span class="token punctuation">;</span>

  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> c <span class="token operator">&lt;&lt;</span> <span class="token string">" - "</span> <span class="token operator">&lt;&lt;</span> d <span class="token operator">&lt;&lt;</span> <span class="token string">" = "</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-180-close">(</span>c <span class="token operator">-</span> d<span class="token punctuation brace-round brace-close brace-level-2" id="pair-180-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

  <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-185-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>But this won’t do as we want, as the output is:</p>
<pre>
Addition
Enter an integer: 5
Enter another integer: 9
5 + 9 = 14
Subtraction
Enter another integer: 12
Enter another integer: 3
12 - 3 = 9
</pre>
<p>
  (The third-to-last line is “Enter another integer” instead of “Enter an
  integer”)
</p>
<p>
  <code>getInteger()</code> is not reusable, because it has an internal state
  (The static local variable <code>s_isFirstCall</code>) which cannot be reset
  from the outside. <code>s_isFirstCall</code> is not a variable that should be
  unique in the entire program. Although our program worked great when we first
  wrote it, the static local variable prevents us from reusing the function
  later on.
</p>
<p>
  One better way of implementing <code>getInteger</code> is to pass
  <code>s_isFirstCall</code> as a parameter. This allows the caller to choose
  which prompt will be printed:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token comment">// We'll define a symbolic constant with a nice name</span>
<span class="token keyword keyword-constexpr">constexpr</span> <span class="token keyword keyword-bool">bool</span> g_firstCall <span class="token punctuation brace-curly brace-open brace-level-1" id="pair-192-close">{</span> <span class="token boolean">true</span> <span class="token punctuation brace-curly brace-close brace-level-1" id="pair-192-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">getInteger</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-186-close">(</span><span class="token keyword keyword-bool">bool</span> bFirstCall<span class="token punctuation brace-round brace-close brace-level-1" id="pair-186-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-196-close">{</span>
	<span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-187-close">(</span>bFirstCall<span class="token punctuation brace-round brace-close brace-level-2" id="pair-187-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-193-close">{</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Enter an integer: "</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-193-open">}</span>
	<span class="token keyword keyword-else">else</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-194-close">{</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Enter another integer: "</span><span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-194-open">}</span>

	<span class="token keyword keyword-int">int</span> i<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-195-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-195-open">}</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> i<span class="token punctuation">;</span>
	<span class="token keyword keyword-return">return</span> i<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-196-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-188-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-188-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-199-close">{</span>
	<span class="token keyword keyword-int">int</span> a<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-197-close">{</span> <span class="token function">getInteger</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-189-close">(</span>g_firstCall<span class="token punctuation brace-round brace-close brace-level-3" id="pair-189-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-197-open">}</span><span class="token punctuation">;</span>  <span class="token comment">// so that it's clearer what the argument represents here</span>
	<span class="token keyword keyword-int">int</span> b<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-198-close">{</span> <span class="token function">getInteger</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-190-close">(</span><span class="token operator">!</span>g_firstCall<span class="token punctuation brace-round brace-close brace-level-3" id="pair-190-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-198-open">}</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> <span class="token string">" + "</span> <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> <span class="token string">" = "</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-191-close">(</span>a <span class="token operator">+</span> b<span class="token punctuation brace-round brace-close brace-level-2" id="pair-191-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-199-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Non-const static local variables should only be used if in your entire program
  and in the foreseeable future of your program, the variable is unique and it
  wouldn’t make sense to reset the variable.
</p>
<div class="code-block code-block-7" style="margin: 8px 0; clear: both"></div>
<div class="cpp-note cpp-lightgreenbackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">Best practice</p>
  <p>Const static local variables are generally okay to use.</p>
  <p>
    Non-const static local variables should generally be avoided. If you do use
    them, ensure the variable never needs to be reset, and isn’t used to alter
    program flow.
  </p>
</div>
<div class="cpp-note cpp-lightbluebackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">Tip</p>
  <p>
    An even more reusable solution would be to change the
    <code>bool</code> parameter to <code>std::string_view</code> and let the
    caller pass in the text prompt that will be used!
  </p>
</div>
<div class="cpp-note cpp-lightgraybackground" data-ezoic-video-excluded="1">
  <p class="cpp-note-title cpp-bottomline">For advanced readers</p>
  <p>
    In cases where you need multiple instances of a non-const variable that
    remembers its value (e.g. to have multiple ID generators), a functor is a
    good solution (see lesson
    <a
      href="https://www.learncpp.com/cpp-tutorial/overloading-the-parenthesis-operator/"
      >21.10 -- Overloading the parenthesis operator</a
    >).
  </p>
</div>
<p></p>
<p
  class="cpp-section cpp-topline"
  style="clear: both"
  data-ezoic-video-excluded="1"
>
  Quiz time
</p>
<p class="cpp-quiz-question" style="clear: both">Question #1</p>
<p></p>
<p>
  What effect does using keyword <code>static</code> have on a global variable?
  What effect does it have on a local variable?
</p>
<p>
  <a
    class="solution_link_show"
    href="javascript:void(0)"
    onclick="cppSolutionToggle(document.getElementById('cpp_solution_id_0'),this,'Show Solution','Hide Solution')"
    >Show Solution</a
  >
</p>
<div class="wpsolution" id="cpp_solution_id_0" style="display: none">
  <p>
    When applied to a global variable, the static keyword defines the global
    variable as having internal linkage, meaning the variable cannot be exported
    to other files.
  </p>
  <p>
    When applied to a local variable, the static keyword defines the local
    variable as having static duration, meaning the variable will only be
    created once, and will not be destroyed until the end of the program.
  </p>
</div>
<div class="prevnext">
  <div class="prevnext-inline">
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/scope-duration-and-linkage-summary/"
      ><div class="nav-button nav-button-next">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-right" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Next lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">7.12</span>Scope, duration,
            and linkage summary
          </div>
        </div>
      </div></a
    ><a class="nav-link" href="/"
      ><div class="nav-button nav-button-index">
        <div class="nav-button-icon">
          <i class="fa fa-home" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Back to table of contents</div>
        </div>
      </div></a
    ><a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/sharing-global-constants-across-multiple-files-using-inline-variables/"
      ><div class="nav-button nav-button-prev">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-left" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Previous lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">7.10</span>Sharing global
            constants across multiple files (using inline variables)
          </div>
        </div>
      </div></a
    >
  </div>
</div>
<div class="code-block code-block-10" style="margin: 8px 0; clear: both"></div>
