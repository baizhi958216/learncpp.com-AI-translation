<div
  class="code-block code-block-1"
  style="margin: 8px 8px 8px 0; float: left"
></div>
<p>
  For much of this chapter and last, we’ve been preaching the virtues of access
  controls, which provide a mechanism for controlling who can access the various
  members of a class. Private members can only be accessed by other members of
  the class and public members can be accessed by everyone. In lesson
  <a href="https://www.learncpp.com/cpp-tutorial/access-functions/"
    >14.6 -- Access functions</a
  >, we discussed the benefits of keeping your data private, and creating a
  public interface for non-members to use.
</p>
<p>
  However, there are situations where this arrangement is either not sufficient
  or not ideal.
</p>
<p>
  For example, consider a storage class that is focused on managing some set of
  data. Now lets say you also want to display that data, but the code that
  handles the display will have lots of options and is therefore complex. You
  could put both the storage management functions and the display management
  functions in the same class, but that would clutter things up and make for a
  complex interface. You could also keep them separate: the storage class
  manages storage, and some other display class manages all of the display
  capabilities. That creates a nice separation of responsibility. But the
  display class would then be unable to access the private members of the
  storage class, and might not be able to do its job.
</p>
<p>
  Alternatively, there are cases where syntactically we might prefer to use a
  non-member function over a member function (we’ll show an example of this
  below). This is commonly the case when overloading operators, a topic we’ll
  discuss in future lessons. But non-member functions have the same issue --
  they can’t access the private members of the class.
</p>
<p>
  If access functions (or other public member functions) already exist and are
  sufficient for whatever capability we’re trying to implement, then great -- we
  can (and should) just use those. But in some cases, those functions don’t
  exist. What then?
</p>
<div class="code-block code-block-2" style="margin: 8px 0; clear: both"></div>

<p>
  One option would be to add new member functions to the class, to allow other
  classes or non-member functions to do whatever job they would be otherwise
  unable to do. But we might not want to allow public access to such things --
  perhaps those things are highly implementation dependent, or prone to misuse.
</p>
<p>
  What we really need is some way to subvert the access control system on a case
  by case basis.
</p>
<p class="cpp-section cpp-topline" style="clear: both">Friendship is magic</p>
<p>The answer to our challenge is friendship.</p>
<p>
  Inside the body of a class, a <strong>friend declaration</strong> (using the
  <code>friend</code> keyword) can be used to tell the compiler that some other
  class or function is now a friend. In C++, a <strong>friend</strong> is a
  class or function (member or non-member) that has been granted full access to
  the private and protected members of another class. In this way, a class can
  selectively give other classes or functions full access to their members
  without impacting anything else.
</p>
<div class="cpp-note cpp-lightbluebackground" style="height: auto !important">
  <p class="cpp-note-title cpp-bottomline">Key insight</p>
  <div
    class="google-auto-placed ap_container"
    style="width: 100%; height: auto; clear: both; text-align: center"
  >
    <ins
      data-ad-format="auto"
      class="adsbygoogle adsbygoogle-noablate"
      data-ad-client="ca-pub-0588844875925051"
      data-adsbygoogle-status="done"
      style="
        display: block;
        margin: auto;
        background-color: transparent;
        height: 280px;
      "
      data-ad-status="unfilled"
      ><div
        id="aswift_2_host"
        style="
          border: none;
          height: 280px;
          width: 995px;
          margin: 0px;
          padding: 0px;
          position: relative;
          visibility: visible;
          background-color: transparent;
          display: inline-block;
          overflow: visible;
        "
      >
        <iframe
          id="aswift_2"
          name="aswift_2"
          browsingtopics="true"
          style="
            left: 0;
            position: absolute;
            top: 0;
            border: 0;
            width: 995px;
            height: 280px;
            min-height: auto;
            max-height: none;
            min-width: auto;
            max-width: none;
          "
          sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
          width="995"
          height="280"
          frameborder="0"
          marginwidth="0"
          marginheight="0"
          vspace="0"
          hspace="0"
          allowtransparency="true"
          scrolling="no"
          allow="attribution-reporting; run-ad-auction"
          src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=3774350304&amp;adf=2610306181&amp;w=995&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1750084250&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=995x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Ffriend-non-member-functions%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=994&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963041195&amp;bpp=1&amp;bdt=1733&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280&amp;nras=2&amp;correlator=6601541844955&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=43&amp;ady=944&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093272%2C95353386%2C95362655%2C95365226%2C95365234%2C95365112%2C95359266%2C95365120%2C95365798%2C95340253%2C95340255&amp;oid=2&amp;pvsid=8942693962884831&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=3&amp;uci=a!3&amp;fsb=1&amp;dtd=8"
          data-google-container-id="a!3"
          tabindex="0"
          title="Advertisement"
          aria-label="Advertisement"
          data-load-complete="true"
          data-google-query-id="CI6qs_XqrI4DFYFFwgUdoUQIsw"
        ></iframe></div
    ></ins>
  </div>
  <p>
    Friendship is always granted by the class whose members will be accessed
    (not by the class or function desiring access). Between access controls and
    granting friendship, a class always retains the ability to control who can
    access its members.
  </p>
</div>
<p>
  For example, if our storage class made the display class a friend, then the
  display class would be able to access all members of the storage class
  directly. The display class could use this direct access to implement display
  of the storage class, while remaining structurally separate.
</p>
<div class="code-block code-block-3" style="margin: 8px 0; clear: both"></div>

<p>
  The friend declaration is not affected by access controls, so it does not
  matter where within the class body it is placed.
</p>
<p>
  Now that we know what a friend is, let’s take a look at specific examples
  where friendship is granted to non-member functions, member functions, and
  other classes. We’ll discuss friend non-members functions in this lesson, and
  then take a look at friend classes and friend member functions in the next
  lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/friend-classes-and-friend-member-functions/"
    >15.9 -- Friend classes and friend member functions</a
  >.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_3_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_3"
        name="aswift_3"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=2032930052&amp;adf=1342122214&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1750084250&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Ffriend-non-member-functions%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963041195&amp;bpp=1&amp;bdt=1734&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C995x280&amp;nras=3&amp;correlator=6601541844955&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=1462&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093272%2C95353386%2C95362655%2C95365226%2C95365234%2C95365112%2C95359266%2C95365120%2C95365798%2C95340253%2C95340255&amp;oid=2&amp;pvsid=8942693962884831&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=4&amp;uci=a!4&amp;btvi=1&amp;fsb=1&amp;dtd=9"
        data-google-container-id="a!4"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CMGzs_XqrI4DFfJawgUdPTYsrw"
      ></iframe></div
  ></ins>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Friend non-member functions
</p>
<p>
  A <strong>friend function</strong> is a function (member or non-member) that
  can access the private and protected members of a class as though it were a
  member of that class. In all other regards, the friend function is a normal
  function.
</p>
<p>
  Let’s take a look at an example of a simple class making a non-member function
  a friend:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Accumulator</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-8-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-6-close">{</span> <span class="token number">0</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-6-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-0-close">(</span><span class="token keyword keyword-int">int</span> value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-0-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-7-close">{</span> m_value <span class="token operator">+=</span> value<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-7-open">}</span>

    <span class="token comment">// Here is the friend declaration that makes non-member function void print(const Accumulator&amp; accumulator) a friend of Accumulator</span>
    <span class="token keyword keyword-friend">friend</span> <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-1-close">(</span><span class="token keyword keyword-const">const</span> Accumulator<span class="token operator">&amp;</span> accumulator<span class="token punctuation brace-round brace-close brace-level-2" id="pair-1-open">)</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-8-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-2-close">(</span><span class="token keyword keyword-const">const</span> Accumulator<span class="token operator">&amp;</span> accumulator<span class="token punctuation brace-round brace-close brace-level-1" id="pair-2-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-9-close">{</span>
    <span class="token comment">// Because print() is a friend of Accumulator</span>
    <span class="token comment">// it can access the private members of Accumulator</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> accumulator<span class="token punctuation">.</span>m_value<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-9-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-3-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-3-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-11-close">{</span>
    Accumulator acc<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-10-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-10-open">}</span><span class="token punctuation">;</span>
    acc<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-4-close">(</span><span class="token number">5</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-4-open">)</span><span class="token punctuation">;</span> <span class="token comment">// add 5 to the accumulator</span>

    <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-5-close">(</span>acc<span class="token punctuation brace-round brace-close brace-level-2" id="pair-5-open">)</span><span class="token punctuation">;</span> <span class="token comment">// call the print() non-member function</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-11-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 32px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_4_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_4"
        name="aswift_4"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=2032930052&amp;adf=3606970559&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1750084250&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Ffriend-non-member-functions%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963041195&amp;bpp=1&amp;bdt=1733&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C995x280%2C1027x280&amp;nras=4&amp;correlator=6601541844955&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=2422&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093272%2C95353386%2C95362655%2C95365226%2C95365234%2C95365112%2C95359266%2C95365120%2C95365798%2C95340253%2C95340255&amp;oid=2&amp;pvsid=8942693962884831&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=5&amp;uci=a!5&amp;btvi=2&amp;fsb=1&amp;dtd=10"
        data-google-container-id="a!5"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CJbUs_XqrI4DFbRFwgUdqm04dw"
      ></iframe></div
  ></ins>
</div>
<p>
  In this example, we’ve declared a non-member function named
  <code>print()</code> that takes an object of class <code>Accumulator</code>.
  Because <code>print()</code> is not a member of the Accumulator class, it
  would normally not be able to access private member <code>m_value</code>.
  However, the Accumulator class has a friend declaration making
  <code>print(const Accumulator&amp; accumulator)</code> a friend, this is now
  allowed.
</p>
<div class="code-block code-block-4" style="margin: 8px 0; clear: both"></div>

<p>
  Note that because <code>print()</code> is a non-member function (and thus does
  not have an implicit object), we must explicitly pass an
  <code>Accumulator</code> object to <code>print()</code> to work with.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Defining a friend non-member inside a class
</p>
<p>
  Much like member functions can be defined inside a class if desired, friend
  non-member functions can also be defined inside a class. The following example
  defines friend non-member function <code>print()</code> inside the
  <code>Accumulator</code> class:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Accumulator</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-20-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-17-close">{</span> <span class="token number">0</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-17-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-12-close">(</span><span class="token keyword keyword-int">int</span> value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-12-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-18-close">{</span> m_value <span class="token operator">+=</span> value<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-18-open">}</span>

    <span class="token comment">// Friend functions defined inside a class are non-member functions</span>
    <span class="token keyword keyword-friend">friend</span> <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-13-close">(</span><span class="token keyword keyword-const">const</span> Accumulator<span class="token operator">&amp;</span> accumulator<span class="token punctuation brace-round brace-close brace-level-2" id="pair-13-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-19-close">{</span>
        <span class="token comment">// Because print() is a friend of Accumulator</span>
        <span class="token comment">// it can access the private members of Accumulator</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> accumulator<span class="token punctuation">.</span>m_value<span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-19-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-20-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-14-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-14-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-22-close">{</span>
    Accumulator acc<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-21-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-21-open">}</span><span class="token punctuation">;</span>
    acc<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-15-close">(</span><span class="token number">5</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-15-open">)</span><span class="token punctuation">;</span> <span class="token comment">// add 5 to the accumulator</span>

    <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-16-close">(</span>acc<span class="token punctuation brace-round brace-close brace-level-2" id="pair-16-open">)</span><span class="token punctuation">;</span> <span class="token comment">// call the print() non-member function</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-22-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Although you might assume that because <code>print()</code> is defined inside
  <code>Accumulator</code>, that makes <code>print()</code> a member of
  <code>Accumulator</code>, this is not the case. Because
  <code>print()</code> is defined as a friend, it is instead treated as a
  non-member function (as if it had been defined outside
  <code>Accumulator</code>).
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Syntactically preferring a friend non-member function
</p>
<div class="code-block code-block-5" style="margin: 8px 0; clear: both"></div>

<p>
  In the introduction to this lesson, we mentioned that there were times we
  might prefer to use a non-member function over a member function. Let’s show
  an example of that now.
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Value</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-34-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_value<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-31-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-31-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-explicit">explicit</span> <span class="token function">Value</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-23-close">(</span><span class="token keyword keyword-int">int</span> v<span class="token punctuation brace-round brace-close brace-level-2" id="pair-23-open">)</span><span class="token operator">:</span> m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-32-close">{</span> v <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-32-open">}</span>  <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-33-close">{</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-33-open">}</span>

    <span class="token keyword keyword-bool">bool</span> <span class="token function">isEqualToMember</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-24-close">(</span><span class="token keyword keyword-const">const</span> Value<span class="token operator">&amp;</span> v<span class="token punctuation brace-round brace-close brace-level-2" id="pair-24-open">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-friend">friend</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">isEqualToNonmember</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-25-close">(</span><span class="token keyword keyword-const">const</span> Value<span class="token operator">&amp;</span> v1<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> Value<span class="token operator">&amp;</span> v2<span class="token punctuation brace-round brace-close brace-level-2" id="pair-25-open">)</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-34-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-bool">bool</span> <span class="token class-name">Value</span><span class="token double-colon punctuation">::</span><span class="token function">isEqualToMember</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-26-close">(</span><span class="token keyword keyword-const">const</span> Value<span class="token operator">&amp;</span> v<span class="token punctuation brace-round brace-close brace-level-1" id="pair-26-open">)</span> <span class="token keyword keyword-const">const</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-35-close">{</span>
    <span class="token keyword keyword-return">return</span> m_value <span class="token operator">==</span> v<span class="token punctuation">.</span>m_value<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-35-open">}</span>

<span class="token keyword keyword-bool">bool</span> <span class="token function">isEqualToNonmember</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-27-close">(</span><span class="token keyword keyword-const">const</span> Value<span class="token operator">&amp;</span> v1<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> Value<span class="token operator">&amp;</span> v2<span class="token punctuation brace-round brace-close brace-level-1" id="pair-27-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-36-close">{</span>
    <span class="token keyword keyword-return">return</span> v1<span class="token punctuation">.</span>m_value <span class="token operator">==</span> v2<span class="token punctuation">.</span>m_value<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-36-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-28-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-28-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-39-close">{</span>
    Value v1 <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-37-close">{</span> <span class="token number">5</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-37-open">}</span><span class="token punctuation">;</span>
    Value v2 <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-38-close">{</span> <span class="token number">6</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-38-open">}</span><span class="token punctuation">;</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> v1<span class="token punctuation">.</span><span class="token function">isEqualToMember</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-29-close">(</span>v2<span class="token punctuation brace-round brace-close brace-level-2" id="pair-29-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">isEqualToNonmember</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-30-close">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation brace-round brace-close brace-level-2" id="pair-30-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-39-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In this example, we’ve defined two similar functions that check whether two
  <code>Value</code> objects are equal. <code>isEqualToMember()</code> is a
  member function, and <code>isEqualToNonmember()</code> is a non-member
  function. Let’s focus on how these functions are defined.
</p>
<p>
  In <code>isEqualToMember()</code>, we’re passing one object implicitly and the
  other explicitly. The implementation of the function reflects this, and we
  have to mentally reconcile that <code>m_value</code> belongs to the implicit
  object whereas <code>v.m_value</code> belongs to the explicit parameter.
</p>
<p>
  In <code>isEqualToNonmember()</code>, both objects are passed explicitly. This
  leads to better parallelism in the implementation of the function, as the
  <code>m_value</code> member is always explicitly prefixed with an explicit
  parameter.
</p>
<p>
  You may still prefer the calling syntax
  <code>v1.isEqualToMember(v2)</code> over
  <code>isEqualToNonmember(v1, v2)</code>. But when we cover operator
  overloading, we’ll see this topic come up again.
</p>
<div class="code-block code-block-6" style="margin: 8px 0; clear: both"></div>

<p class="cpp-section cpp-topline" style="clear: both">Multiple friends</p>
<p>
  A function can be a friend of more than one class at the same time. For
  example, consider the following example:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Humidity</span><span class="token punctuation">;</span> <span class="token comment">// forward declaration of Humidity</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Temperature</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-50-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_temp <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-47-close">{</span> <span class="token number">0</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-47-open">}</span><span class="token punctuation">;</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-explicit">explicit</span> <span class="token function">Temperature</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-40-close">(</span><span class="token keyword keyword-int">int</span> temp<span class="token punctuation brace-round brace-close brace-level-2" id="pair-40-open">)</span> <span class="token operator">:</span> m_temp <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-48-close">{</span> temp <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-48-open">}</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-49-close">{</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-49-open">}</span>

    <span class="token keyword keyword-friend">friend</span> <span class="token keyword keyword-void">void</span> <span class="token function">printWeather</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-41-close">(</span><span class="token keyword keyword-const">const</span> Temperature<span class="token operator">&amp;</span> temperature<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> Humidity<span class="token operator">&amp;</span> humidity<span class="token punctuation brace-round brace-close brace-level-2" id="pair-41-open">)</span><span class="token punctuation">;</span> <span class="token comment">// forward declaration needed for this line</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-50-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Humidity</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-54-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_humidity <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-51-close">{</span> <span class="token number">0</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-51-open">}</span><span class="token punctuation">;</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-explicit">explicit</span> <span class="token function">Humidity</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-42-close">(</span><span class="token keyword keyword-int">int</span> humidity<span class="token punctuation brace-round brace-close brace-level-2" id="pair-42-open">)</span> <span class="token operator">:</span> m_humidity <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-52-close">{</span> humidity <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-52-open">}</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-53-close">{</span>  <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-53-open">}</span>

    <span class="token keyword keyword-friend">friend</span> <span class="token keyword keyword-void">void</span> <span class="token function">printWeather</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-43-close">(</span><span class="token keyword keyword-const">const</span> Temperature<span class="token operator">&amp;</span> temperature<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> Humidity<span class="token operator">&amp;</span> humidity<span class="token punctuation brace-round brace-close brace-level-2" id="pair-43-open">)</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-54-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-void">void</span> <span class="token function">printWeather</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-44-close">(</span><span class="token keyword keyword-const">const</span> Temperature<span class="token operator">&amp;</span> temperature<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> Humidity<span class="token operator">&amp;</span> humidity<span class="token punctuation brace-round brace-close brace-level-1" id="pair-44-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-55-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"The temperature is "</span> <span class="token operator">&lt;&lt;</span> temperature<span class="token punctuation">.</span>m_temp <span class="token operator">&lt;&lt;</span>
       <span class="token string">" and the humidity is "</span> <span class="token operator">&lt;&lt;</span> humidity<span class="token punctuation">.</span>m_humidity <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-55-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-45-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-45-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-58-close">{</span>
    Humidity hum <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-56-close">{</span> <span class="token number">10</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-56-open">}</span><span class="token punctuation">;</span>
    Temperature temp <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-57-close">{</span> <span class="token number">12</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-57-open">}</span><span class="token punctuation">;</span>

    <span class="token function">printWeather</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-46-close">(</span>temp<span class="token punctuation">,</span> hum<span class="token punctuation brace-round brace-close brace-level-2" id="pair-46-open">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-58-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 32px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  There are three things worth noting about this example. First, because
  <code>printWeather()</code> uses both <code>Humidity</code> and
  <code>Temperature</code> equally, it doesn’t really make sense to have it be a
  member of either. A non-member function works better. Second, because
  <code>printWeather()</code> is a friend of both <code>Humidity</code> and
  <code>Temperature</code>, it can access the private data from objects of both
  classes. Finally, note the following line at the top of the example:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-class">class</span> <span class="token class-name">Humidity</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  This is a forward declaration for <code>class Humidity</code>. Class forward
  declarations serve the same role as function forward declarations -- they tell
  the compiler about an identifier that will be defined later. However, unlike
  functions, classes have no return types or parameters, so class forward
  declarations are always simply <code>class ClassName</code> (unless they are
  class templates).
</p>
<p>
  Without this line, the compiler would tell us it doesn’t know what a
  <code>Humidity</code> is when parsing the friend declaration inside
  <code>Temperature</code>.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Doesn’t friendship violate the principle of data hiding?
</p>
<div class="code-block code-block-7" style="margin: 8px 0; clear: both"></div>

<p>
  No. Friendship is granted by the class doing the data hiding with the
  expectation that the friend will access its private members. Think of a friend
  as an extension of the class itself, with all the same access rights. As such,
  access is expected, not a violation.
</p>
<p>
  Used properly, friendship can make a program more maintainable by allowing
  functionality to be separated when it makes sense from a design perspective
  (as opposed to having to keep it together for access control reasons). Or when
  it makes more sense to use a non-member function instead of a member function.
</p>
<p>
  However, because friends have direct access to the implementation of a class,
  changes to the implementation of the class will typically necessitate changes
  to the friends as well. If a class has many friends (or those friends have
  friends), this can lead to a ripple effect.
</p>
<p>
  When implementing a friend function, prefer to use the public interface over
  direct access to members whenever possible. This will help insulate your
  friend function from future implementation changes and lead to less code
  needing to be modified and/or retested later.
</p>
<div class="cpp-note cpp-lightgreenbackground">
  <p class="cpp-note-title cpp-bottomline">Best practice</p>
  <p>
    A friend function should prefer to use the class interface over direct
    access whenever possible.
  </p>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Prefer non-friend functions to friend functions
</p>
<div class="code-block code-block-8" style="margin: 8px 0; clear: both"></div>

<p>
  In lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/the-benefits-of-data-hiding-encapsulation/"
    >14.8 -- The benefits of data hiding (encapsulation)</a
  >, we mentioned that we should prefer non-member functions over member
  functions. For the same reasons given there, we should prefer non-friend
  functions over friend functions.
</p>
<p>
  For example, in the following example, if the implementation of
  <code>Accumulator</code> is changed (e.g. we rename <code>m_value</code>), the
  implementation of <code>print()</code> will need to be changed as well:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Accumulator</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-67-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-65-close">{</span> <span class="token number">0</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-65-open">}</span><span class="token punctuation">;</span> <span class="token comment">// if we rename this</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-59-close">(</span><span class="token keyword keyword-int">int</span> value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-59-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-66-close">{</span> m_value <span class="token operator">+=</span> value<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-66-open">}</span> <span class="token comment">// we need to modify this</span>

    <span class="token keyword keyword-friend">friend</span> <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-60-close">(</span><span class="token keyword keyword-const">const</span> Accumulator<span class="token operator">&amp;</span> accumulator<span class="token punctuation brace-round brace-close brace-level-2" id="pair-60-open">)</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-67-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-61-close">(</span><span class="token keyword keyword-const">const</span> Accumulator<span class="token operator">&amp;</span> accumulator<span class="token punctuation brace-round brace-close brace-level-1" id="pair-61-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-68-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> accumulator<span class="token punctuation">.</span>m_value<span class="token punctuation">;</span> <span class="token comment">// and we need to modify this</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-68-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-62-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-62-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-70-close">{</span>
    Accumulator acc<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-69-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-69-open">}</span><span class="token punctuation">;</span>
    acc<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-63-close">(</span><span class="token number">5</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-63-open">)</span><span class="token punctuation">;</span> <span class="token comment">// add 5 to the accumulator</span>

    <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-64-close">(</span>acc<span class="token punctuation brace-round brace-close brace-level-2" id="pair-64-open">)</span><span class="token punctuation">;</span> <span class="token comment">// call the print() non-member function</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-70-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>A better idea is as follows:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Accumulator</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-81-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_value <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-78-close">{</span> <span class="token number">0</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-78-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-71-close">(</span><span class="token keyword keyword-int">int</span> value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-71-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-79-close">{</span> m_value <span class="token operator">+=</span> value<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-79-open">}</span>
    <span class="token keyword keyword-int">int</span> <span class="token function">value</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-72-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-72-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-80-close">{</span> <span class="token keyword keyword-return">return</span> m_value<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-80-open">}</span> <span class="token comment">// added this reasonable access function</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-81-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-73-close">(</span><span class="token keyword keyword-const">const</span> Accumulator<span class="token operator">&amp;</span> accumulator<span class="token punctuation brace-round brace-close brace-level-1" id="pair-73-open">)</span> <span class="token comment">// no longer a friend of Accumulator</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-82-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> accumulator<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-74-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-74-open">)</span><span class="token punctuation">;</span> <span class="token comment">// use access function instead of direct access</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-82-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-75-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-75-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-84-close">{</span>
    Accumulator acc<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-83-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-83-open">}</span><span class="token punctuation">;</span>
    acc<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-76-close">(</span><span class="token number">5</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-76-open">)</span><span class="token punctuation">;</span> <span class="token comment">// add 5 to the accumulator</span>

    <span class="token function">print</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-77-close">(</span>acc<span class="token punctuation brace-round brace-close brace-level-2" id="pair-77-open">)</span><span class="token punctuation">;</span> <span class="token comment">// call the print() non-member function</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-84-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In this example, <code>print()</code> uses access function
  <code>value()</code> to get the value of <code>m_value</code> instead of
  accessing <code>m_value</code> directly. Now if the implementation of
  <code>Accumulator</code> is ever changed, <code>print()</code> will not need
  to be updated.
</p>
<div class="cpp-note cpp-lightgreenbackground">
  <p class="cpp-note-title cpp-bottomline">Best practice</p>
  <p>
    Prefer to implement a function as a non-friend when possible and reasonable.
  </p>
</div>
<p>
  Be cautious when adding new members to the public interface of an existing
  class, as every function (even trivial ones) adds some level of clutter and
  complexity. In the case of <code>Accumulator</code> above, it’s totally
  reasonable to have an access function to get the current accumulated value. In
  more complex cases, it may be preferable to use friendship instead of adding
  many new access functions to the interface of a class.
</p>
<div class="prevnext">
  <div class="prevnext-inline">
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/friend-classes-and-friend-member-functions/"
    >
      <div class="nav-button nav-button-next">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-right" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Next lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">15.9</span>Friend classes and
            friend member functions
          </div>
        </div>
      </div></a
    >
    <a class="nav-link" href="/">
      <div class="nav-button nav-button-index">
        <div class="nav-button-icon">
          <i class="fa fa-home" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Back to table of contents</div>
        </div>
      </div></a
    >
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/static-member-functions/"
    >
      <div class="nav-button nav-button-prev">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-left" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Previous lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">15.7</span>Static member
            functions
          </div>
        </div>
      </div></a
    >
  </div>
</div>
<div class="code-block code-block-10" style="margin: 8px 0; clear: both"></div>
