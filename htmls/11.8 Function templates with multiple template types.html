<div
  class="code-block code-block-1"
  style="margin: 8px 8px 8px 0; float: left"
></div>
<p>
  In lesson
  <a href="https://www.learncpp.com/cpp-tutorial/function-templates/"
    >11.6 -- Function templates</a
  >, we wrote a function template to calculate the maximum of two values:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
T <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-0-close">(</span>T x<span class="token punctuation">,</span> T y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-0-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-5-close">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-1-close">(</span>x <span class="token operator">&lt;</span> y<span class="token punctuation brace-round brace-close brace-level-2" id="pair-1-open">)</span> <span class="token operator">?</span> y <span class="token operator">:</span> x<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-5-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-2-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-2-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-6-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-3-close">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-3-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>   <span class="token comment">// will instantiate max(int, int)</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-4-close">(</span><span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">2.5</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-4-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span> <span class="token comment">// will instantiate max(double, double)</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-6-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>Now consider the following similar program:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
T <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-7-close">(</span>T x<span class="token punctuation">,</span> T y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-7-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-11-close">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-8-close">(</span>x <span class="token operator">&lt;</span> y<span class="token punctuation brace-round brace-close brace-level-2" id="pair-8-open">)</span> <span class="token operator">?</span> y <span class="token operator">:</span> x<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-11-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-9-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-9-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-12-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-10-close">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3.5</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-10-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>  <span class="token comment">// compile error</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-12-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_2_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_2"
        name="aswift_2"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=1370466528&amp;adf=3328967120&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1749402042&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Ffunction-templates-with-multiple-template-types%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751962645903&amp;bpp=2&amp;bdt=620&amp;idt=2&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962604%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962604%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962604%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280&amp;nras=2&amp;correlator=6719951455657&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=1091&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093039%2C95353386%2C95362656%2C95365226%2C95365235%2C95365114%2C95359265%2C95365121%2C95365797&amp;oid=2&amp;pvsid=8065389314217362&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=3&amp;uci=a!3&amp;btvi=1&amp;fsb=1&amp;dtd=5"
        data-google-container-id="a!3"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CNTK9LjprI4DFXSH6QUdvVwHhw"
      ></iframe></div
  ></ins>
</div>
<p>
  You may be surprised to find that this program won’t compile. Instead, the
  compiler will issue a bunch of (probably crazy looking) error messages. On
  Visual Studio, the author got the following:
</p>
<pre>
Project3.cpp(11,18): error C2672: 'max': no matching overloaded function found
Project3.cpp(11,28): error C2782: 'T max(T,T)': template parameter 'T' is ambiguous
Project3.cpp(4): message : see declaration of 'max'
Project3.cpp(11,28): message : could be 'double'
Project3.cpp(11,28): message : or       'int'
Project3.cpp(11,28): error C2784: 'T max(T,T)': could not deduce template argument for 'T' from 'double'
Project3.cpp(4): message : see declaration of 'max'
</pre>
<p>
  In our function call <code>max(2, 3.5)</code>, we’re passing arguments of two
  different types: one <code>int</code> and one <code>double</code>. Because
  we’re making a function call without using angled brackets to specify an
  actual type, the compiler will first look to see if there is a non-template
  match for <code>max(int, double)</code>. It won’t find one.
</p>
<p>
  Next, the compiler will see if it can find a function template match (using
  template argument deduction, which we covered in lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/function-template-instantiation/"
    >11.7 -- Function template instantiation</a
  >). However, this will also fail, for a simple reason: <code>T</code> can only
  represent a single type. There is no type for <code>T</code> that would allow
  the compiler to instantiate function template
  <code>max&lt;T&gt;(T, T)</code> into a function with two different parameter
  types. Put another way, because both parameters in the function template are
  of type <code>T</code>, they must resolve to the same actual type.
</p>
<div class="code-block code-block-2" style="margin: 8px 0; clear: both"></div>

<p>
  Since both a non-template match and a template match couldn’t be found, the
  function call fails to resolve, and we get a compile error.
</p>
<p>
  You might wonder why the compiler didn’t generate function
  <code>max&lt;double&gt;(double, double)</code> and then use numeric conversion
  to type convert the <code>int</code> argument to a <code>double</code>. The
  answer is simple: type conversion is done only when resolving function
  overloads, not when performing template argument deduction.
</p>
<p>
  This lack of type conversion is intentional for at least two reasons. First,
  it helps keep things simple: we either find an exact match between the
  function call arguments and template type parameters, or we don’t. Second, it
  allows us to create function templates for cases where we want to ensure that
  two or more parameters have the same type (as in the example above).
</p>
<p>
  We’ll have to find another solution. Fortunately, we can solve this problem in
  (at least) three ways.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Use static_cast to convert the arguments to matching types
</p>
<div class="code-block code-block-3" style="margin: 8px 0; clear: both"></div>

<p>
  The first solution is to put the burden on the caller to convert the arguments
  into matching types. For example:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
T <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-13-close">(</span>T x<span class="token punctuation">,</span> T y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-13-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-18-close">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-14-close">(</span>x <span class="token operator">&lt;</span> y<span class="token punctuation brace-round brace-close brace-level-2" id="pair-14-open">)</span> <span class="token operator">?</span> y <span class="token operator">:</span> x<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-18-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-15-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-15-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-19-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-17-close">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword keyword-double">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-16-close">(</span><span class="token number">2</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-16-open">)</span><span class="token punctuation">,</span> <span class="token number">3.5</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-17-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span> <span class="token comment">// convert our int to a double so we can call max(double, double)</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-19-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Now that both arguments are of type <code>double</code>, the compiler will be
  able to instantiate <code>max(double, double)</code> that will satisfy this
  function call.
</p>
<p>However, this solution is awkward and hard to read.</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Provide an explicit type template argument
</p>
<p>
  If we had written a non-template <code>max(double, double)</code> function,
  then we would be able to call <code>max(int, double)</code> and let the
  implicit type conversion rules convert our <code>int</code> argument into a
  <code>double</code> so the function call could be resolved:
</p>
<div class="code-block code-block-4" style="margin: 8px 0; clear: both"></div>

<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-double">double</span> <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-20-close">(</span><span class="token keyword keyword-double">double</span> x<span class="token punctuation">,</span> <span class="token keyword keyword-double">double</span> y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-20-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-24-close">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-21-close">(</span>x <span class="token operator">&lt;</span> y<span class="token punctuation brace-round brace-close brace-level-2" id="pair-21-open">)</span> <span class="token operator">?</span> y <span class="token operator">:</span> x<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-24-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-22-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-22-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-25-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-23-close">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3.5</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-23-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span> <span class="token comment">// the int argument will be converted to a double</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-25-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  However, when the compiler is doing template argument deduction, it won’t do
  any type conversions. Fortunately, we don’t have to use template argument
  deduction if we specify an explicit type template argument to be used instead:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
T <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-26-close">(</span>T x<span class="token punctuation">,</span> T y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-26-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-30-close">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-27-close">(</span>x <span class="token operator">&lt;</span> y<span class="token punctuation brace-round brace-close brace-level-2" id="pair-27-open">)</span> <span class="token operator">?</span> y <span class="token operator">:</span> x<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-30-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-28-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-28-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-31-close">{</span>
    <span class="token comment">// we've explicitly specified type double, so the compiler won't use template argument deduction</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token generic-function"><span class="token function">max</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword keyword-double">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-29-close">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3.5</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-29-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-31-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In the above example, we call <code>max&lt;double&gt;(2, 3.5)</code>. Because
  we’ve explicitly specified that <code>T</code> should be replaced with
  <code>double</code>, the compiler won’t use template argument deduction.
  Instead, it will just instantiate the function
  <code>max&lt;double&gt;(double, double)</code>, and then type convert any
  mismatched arguments. Our <code>int</code> parameter will be implicitly
  converted to a <code>double</code>.
</p>
<p>
  While this is more readable than using <code>static_cast</code>, it would be
  even nicer if we didn’t even have to think about the types when making a
  function call to <code>max</code> at all.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Function templates with multiple template type parameters
</p>
<p>
  The root of our problem is that we’ve only defined the single template type
  (<code>T</code>) for our function template, and then specified that both
  parameters must be of this same type.
</p>
<div class="code-block code-block-5" style="margin: 8px 0; clear: both"></div>

<p>
  The best way to solve this problem is to rewrite our function template in such
  a way that our parameters can resolve to different types. Rather than using
  one template type parameter <code>T</code>, we’ll now use two (<code>T</code>
  and <code>U</code>):
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">U</span><span class="token operator">&gt;</span> <span class="token comment">// We're using two template type parameters named T and U</span>
T <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-32-close">(</span>T x<span class="token punctuation">,</span> U y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-32-open">)</span> <span class="token comment">// x can resolve to type T, and y can resolve to type U</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-36-close">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-33-close">(</span>x <span class="token operator">&lt;</span> y<span class="token punctuation brace-round brace-close brace-level-2" id="pair-33-open">)</span> <span class="token operator">?</span> y <span class="token operator">:</span> x<span class="token punctuation">;</span> <span class="token comment">// uh oh, we have a narrowing conversion problem here</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-36-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-34-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-34-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-37-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-35-close">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3.5</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-35-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span> <span class="token comment">// resolves to max&lt;int, double&gt;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-37-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Because we’ve defined <code>x</code> with template type <code>T</code>, and
  <code>y</code> with template type <code>U</code>, <code>x</code> and
  <code>y</code> can now resolve their types independently. When we call
  <code>max(2, 3.5)</code>, <code>T</code> can be an <code>int</code> and
  <code>U</code> can be a <code>double</code>. The compiler will happily
  instantiate <code>max&lt;int, double&gt;(int, double)</code> for us.
</p>
<div class="cpp-note cpp-lightbluebackground">
  <p class="cpp-note-title cpp-bottomline">Key insight</p>
  <p>
    Because <code>T</code> and <code>U</code> are independent template
    parameters, they resolve their types independent of each other. This means
    <code>T</code> and <code>U</code> can resolve to different types, or they
    can resolve to the same type.
  </p>
</div>
<p>
  However, this example doesn’t work right. If you compile and run the program
  (with “treat warnings as errors” turned off), it will produce the following
  result:
</p>
<pre>
3
</pre>
<p>
  What’s going on here? How can the max of <code>2</code> and
  <code>3.5</code> be <code>3</code>?
</p>
<p>
  The conditional operator (?:) requires its (non-condition) operands to be the
  same common type. The usual arithmetic rules (<a
    href="https://www.learncpp.com/cpp-tutorial/arithmetic-conversions/"
    >10.5 -- Arithmetic conversions</a
  >) are used to determine what the common type will be, and the result of the
  conditional operator will also use this common type. For example, the common
  type of <code>int</code> and <code>double</code> is <code>double</code>, so
  when the (non-condition) operands of our conditional operator are an
  <code>int</code> and a <code>double</code>, the value produced by the
  conditional operator will be of type <code>double</code>. In this case, that’s
  the value <code>3.5</code>, which is correct.
</p>
<div class="code-block code-block-6" style="margin: 8px 0; clear: both"></div>

<p>
  However, the declared return type of our function is <code>T</code>. When
  <code>T</code> is an <code>int</code> and <code>U</code> is a
  <code>double</code>, the return type of the function is <code>int</code>. Our
  value <code>3.5</code> is undergoing a narrowing conversion to
  <code>int</code> value <code>3</code>, resulting in a loss of data (and
  possibly a compiler warning).
</p>
<p>
  So how do we solve this? Making the return type a <code>U</code> instead
  doesn’t solve the problem, as <code>max(3.5, 2)</code> has <code>U</code> as
  an <code>int</code> and will exhibit the same issue.
</p>
<p>
  In such cases, return type deduction (via <code>auto</code>) can be useful --
  we’ll let the compiler deduce what the return type should be from the return
  statement:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">U</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-auto">auto</span> <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-38-close">(</span>T x<span class="token punctuation">,</span> U y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-38-open">)</span> <span class="token comment">// ask compiler can figure out what the relevant return type is</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-42-close">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-39-close">(</span>x <span class="token operator">&lt;</span> y<span class="token punctuation brace-round brace-close brace-level-2" id="pair-39-open">)</span> <span class="token operator">?</span> y <span class="token operator">:</span> x<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-42-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-40-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-40-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-43-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-41-close">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3.5</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-41-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-43-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  This version of <code>max</code> now works fine with operands of different
  types. Just note that a function with an <code>auto</code> return type needs
  to be fully defined before it can be used (a forward declaration won’t
  suffice), since the compiler has to inspect the function implementation to
  determine the return type.
</p>
<div class="cpp-note cpp-lightgraybackground">
  <p class="cpp-note-title cpp-bottomline">For advanced readers</p>
  <p>
    If we need a function that can be forward declared, we have to be explicit
    about the return type. Since our return type needs to be the common type of
    <code>T</code> and <code>U</code>, we can use
    <code>std::common_type_t</code> (discussed in lesson
    <a href="https://www.learncpp.com/cpp-tutorial/arithmetic-conversions/"
      >10.5 -- Arithmetic conversions</a
    >) to fetch the common type of <code>T</code> and <code>U</code> to use as
    our explicit return type:
  </p>
  <div class="code-toolbar">
    <pre
      class="line-numbers language-cpp"
      tabindex="0"
    ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;type_traits&gt;</span> <span class="token comment">// for std::common_type_t</span></span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">U</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-auto">auto</span> <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-44-close">(</span>T x<span class="token punctuation">,</span> U y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-44-open">)</span> <span class="token operator">-&gt;</span> std<span class="token double-colon punctuation">::</span>common_type_t<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// returns the common type of T and U</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-45-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-45-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-49-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-46-close">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3.5</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-46-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-49-open">}</span>

<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">U</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-auto">auto</span> <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-47-close">(</span>T x<span class="token punctuation">,</span> U y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-47-open">)</span> <span class="token operator">-&gt;</span> std<span class="token double-colon punctuation">::</span>common_type_t<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">&gt;</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-50-close">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-48-close">(</span>x <span class="token operator">&lt;</span> y<span class="token punctuation brace-round brace-close brace-level-2" id="pair-48-open">)</span> <span class="token operator">?</span> y <span class="token operator">:</span> x<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-50-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
    <div class="toolbar">
      <div class="toolbar-item">
        <button
          class="copy-to-clipboard-button"
          type="button"
          data-copy-state="copy"
        >
          <span>Copy</span>
        </button>
      </div>
    </div>
  </div>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Abbreviated function templates
  <span class="cpp-section-pill cpp-section-standard">C++20</span>
</p>
<div class="code-block code-block-7" style="margin: 8px 0; clear: both"></div>

<p>
  C++20 introduces a new use of the <code>auto</code> keyword: When the
  <code>auto</code> keyword is used as a parameter type in a normal function,
  the compiler will automatically convert the function into a function template
  with each auto parameter becoming an independent template type parameter. This
  method for creating a function template is called an
  <strong>abbreviated function template</strong>.
</p>
<p>For example:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-auto">auto</span> <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-51-close">(</span><span class="token keyword keyword-auto">auto</span> x<span class="token punctuation">,</span> <span class="token keyword keyword-auto">auto</span> y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-51-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-53-close">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-52-close">(</span>x <span class="token operator">&lt;</span> y<span class="token punctuation brace-round brace-close brace-level-2" id="pair-52-open">)</span> <span class="token operator">?</span> y <span class="token operator">:</span> x<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-53-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>is shorthand in C++20 for the following:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">U</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-auto">auto</span> <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-54-close">(</span>T x<span class="token punctuation">,</span> U y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-54-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-56-close">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-55-close">(</span>x <span class="token operator">&lt;</span> y<span class="token punctuation brace-round brace-close brace-level-2" id="pair-55-open">)</span> <span class="token operator">?</span> y <span class="token operator">:</span> x<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-56-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  which is the same as the <code>max</code> function template we wrote above.
</p>
<p>
  In cases where you want each template type parameter to be an independent
  type, this form is preferred as the removal of the template parameter
  declaration line makes your code more concise and readable.
</p>
<p>
  There isn’t a concise way to use abbreviated function templates when you want
  more than one auto parameter to be the same type. That is, there isn’t an easy
  abbreviated function template for something like this:
</p>
<div class="code-block code-block-8" style="margin: 8px 0; clear: both"></div>

<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
T <span class="token function">max</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-57-close">(</span>T x<span class="token punctuation">,</span> T y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-57-open">)</span> <span class="token comment">// two parameters of the same type</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-59-close">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-58-close">(</span>x <span class="token operator">&lt;</span> y<span class="token punctuation brace-round brace-close brace-level-2" id="pair-58-open">)</span> <span class="token operator">?</span> y <span class="token operator">:</span> x<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-59-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div class="cpp-note cpp-lightgreenbackground">
  <p class="cpp-note-title cpp-bottomline">Best practice</p>
  <p>
    Feel free to use abbreviated function templates with a single auto
    parameter, or where each auto parameter should be an independent type (and
    your language standard is set to C++20 or newer).
  </p>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Function templates may be overloaded
</p>
<p>
  Just like functions may be overloaded, function templates may also be
  overloaded. Such overloads can have a different number of template types
  and/or a different number or type of function parameters:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token comment">// Add two values with matching types</span>
<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-auto">auto</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-60-close">(</span>T x<span class="token punctuation">,</span> T y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-60-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-67-close">{</span>
    <span class="token keyword keyword-return">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-67-open">}</span>

<span class="token comment">// Add two values with non-matching types</span>
<span class="token comment">// As of C++20 we could also use auto add(auto x, auto y)</span>
<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">U</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-auto">auto</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-61-close">(</span>T x<span class="token punctuation">,</span> U y<span class="token punctuation brace-round brace-close brace-level-1" id="pair-61-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-68-close">{</span>
    <span class="token keyword keyword-return">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-68-open">}</span>

<span class="token comment">// Add three values with any type</span>
<span class="token comment">// As of C++20 we could also use auto add(auto x, auto y, auto z)</span>
<span class="token keyword keyword-template">template</span> <span class="token operator">&lt;</span><span class="token keyword keyword-typename">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">U</span><span class="token punctuation">,</span> <span class="token keyword keyword-typename">typename</span> <span class="token class-name">V</span><span class="token operator">&gt;</span>
<span class="token keyword keyword-auto">auto</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-62-close">(</span>T x<span class="token punctuation">,</span> U y<span class="token punctuation">,</span> V z<span class="token punctuation brace-round brace-close brace-level-1" id="pair-62-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-69-close">{</span>
    <span class="token keyword keyword-return">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-69-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-63-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-63-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-70-close">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-64-close">(</span><span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">3.4</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-64-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span> <span class="token comment">// instantiates and calls add&lt;double&gt;()</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-65-close">(</span><span class="token number">5.6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-65-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>   <span class="token comment">// instantiates and calls add&lt;double, int&gt;()</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">add</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-66-close">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-66-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span> <span class="token comment">// instantiates and calls add&lt;int, int, int&gt;()</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-70-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  One interesting note here is that for the call to <code>add(1.2, 3.4)</code>,
  the compiler will prefer <code>add&lt;T&gt;(T, T)</code> over
  <code>add&lt;T, U&gt;(T, U)</code> even though both could possibly match.
</p>
<p>
  The rules for determining which of multiple matching function templates should
  be preferred are called “partial ordering of function templates”. In short,
  whichever function template is more restrictive/specialized will be preferred.
  <code>add&lt;T&gt;(T, T)</code> is the more restrictive function template in
  this case (since it only has one template parameter), so it is preferred.
</p>
<p>
  If multiple function templates can match a call and the compiler can’t
  determine which is more restrictive, the compiler will error with an ambiguous
  match.
</p>
<div class="prevnext">
  <div class="prevnext-inline">
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/non-type-template-parameters/"
    >
      <div class="nav-button nav-button-next">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-right" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Next lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">11.9</span>Non-type template
            parameters
          </div>
        </div>
      </div></a
    >
    <a class="nav-link" href="/">
      <div class="nav-button nav-button-index">
        <div class="nav-button-icon">
          <i class="fa fa-home" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Back to table of contents</div>
        </div>
      </div></a
    >
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/function-template-instantiation/"
    >
      <div class="nav-button nav-button-prev">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-left" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Previous lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">11.7</span>Function template
            instantiation
          </div>
        </div>
      </div></a
    >
  </div>
</div>
<div class="code-block code-block-10" style="margin: 8px 0; clear: both"></div>
