<div
  class="code-block code-block-1"
  style="margin: 8px 8px 8px 0; float: left"
></div>
<p>
  In the prior lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/introduction-to-stdvector-and-list-constructors/"
    >16.2 -- Introduction to std::vector and list constructors</a
  >, we introduced <code>operator[]</code>, which can be used to subscript an
  array to access an element.
</p>
<p>
  In this lesson, we’ll look at other ways to access array elements, as well as
  a few different ways to get the length of an container class (the number of
  elements currently in the container class).
</p>
<p>
  But before we can do that, we need to discuss one major mistake that the
  designers of C++ made, and how it affects all the container classes in the C++
  standard library.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  The container length sign problem
</p>
<p>
  Let’s start with an assertion: the data type used for subscripting an array
  should match the data type used for storing the length of the array. This is
  so that all elements in the longest possible array can be indexed, and no
  more.
</p>
<div class="code-block code-block-2" style="margin: 8px 0; clear: both"></div>

<p>
  As Bjarne Stroustrup
  <a href="https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1428r0.pdf"
    >recalls</a
  >, when the container classes in the C++ standard library was being designed
  (circa 1997), the designers had to choose whether to make the length (and
  array subscripts) signed or unsigned. They chose to make them unsigned.
</p>
<p>
  The reasons given for this: the subscripts of the standard library array types
  can’t be negative, using an unsigned type allows arrays of greater length due
  to the extra bit (something that was important in the 16-bit days), and
  range-checking the subscript requires one conditional check instead of two
  (since no check was needed to ensure the index was less than 0).
</p>
<p>
  In retrospect, this is generally regarded as having been the wrong choice. We
  now understand that using unsigned values to try to enforce non-negativity
  doesn’t work due to the implicit conversion rules (since a negative signed
  integer will just implicitly convert to a large unsigned integer, producing a
  garbage result), the extra bit of range typically isn’t needed on 32-bit or
  64-bit systems (since you probably aren’t creating arrays with more than 2
  billion elements), and the commonly used <code>operator[]</code> doesn’t do
  range-checking anyway.
</p>
<p>
  In lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/unsigned-integers-and-why-to-avoid-them/"
    >4.5 -- Unsigned integers, and why to avoid them</a
  >, we discussed the reasons why we prefer to use signed values to hold
  quantities. We also noted that mixing signed and unsigned values is a recipe
  for unexpected behavior. So the fact that the standard library container
  classes use unsigned values for the length (and indices) is problematic, as it
  makes it impossible to avoid unsigned values when using these types.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_5_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: visible;
      "
    >
      <iframe
        id="aswift_5"
        name="aswift_5"
        browsingtopics="true"
        style="
          left: 0;
          position: absolute;
          top: 0;
          border: 0;
          width: 1027px;
          height: 280px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="280"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=4087753060&amp;adf=1132029083&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751377101&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fstdvector-and-the-unsigned-length-and-subscript-problem%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963070246&amp;bpp=1&amp;bdt=607&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600&amp;nras=2&amp;correlator=4118141215442&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=912&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093040%2C31093234%2C95353386%2C95362655%2C95365225%2C95365234%2C95365460%2C95365699%2C42533294%2C95359265%2C95365117%2C95365798%2C31092547&amp;oid=2&amp;pvsid=5587556714693799&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=6&amp;uci=a!6&amp;fsb=1&amp;dtd=18"
        data-google-container-id="a!6"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CJiEoYPrrI4DFdJQwgUdBKMhog"
      ></iframe></div
  ></ins>
</div>
<p>
  For now, we are stuck with this choice and the unnecessary complexity it
  causes.
</p>
<div class="code-block code-block-3" style="margin: 8px 0; clear: both"></div>

<p class="cpp-section cpp-topline" style="clear: both">
  <a name="constexprconversions"></a>A review: sign conversions are narrowing
  conversions, except when constexpr
  <a href="#constexprconversions"
    ><i class="fa fa-link" style="font-size: 0.8em"></i
  ></a>
</p>
<p>
  Before we proceed further, let’s quickly recap some material from lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/narrowing-conversions-list-initialization-and-constexpr-initializers/"
    >10.4 -- Narrowing conversions, list initialization, and constexpr
    initializers</a
  >
  regarding sign conversions (integral conversions from signed to unsigned or
  vice-versa) because we’ll be talking about these a lot in this chapter.
</p>
<p>
  Sign conversions are considered to be narrowing conversions because a signed
  or unsigned type cannot hold all the values contained in the range of the
  opposing type. When such a conversion would be performed at runtime, the
  compiler will issue an error in contexts where narrowing conversions are
  disallowed (such as in list initialization), and may or may not issue a
  warning in other contexts where such a conversion is performed.
</p>
<p>For example:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-void">void</span> <span class="token function">foo</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-0-close">(</span><span class="token keyword keyword-unsigned">unsigned</span> <span class="token keyword keyword-int">int</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-0-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-5-close">{</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-5-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-1-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-1-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-8-close">{</span>
    <span class="token keyword keyword-int">int</span> s <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-6-close">{</span> <span class="token number">5</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-6-open">}</span><span class="token punctuation">;</span>

    <span class="token punctuation brace-square brace-open brace-level-2" id="pair-4-close">[</span><span class="token punctuation brace-square brace-open brace-level-3" id="pair-3-close">[</span>maybe_unused<span class="token punctuation brace-square brace-close brace-level-3" id="pair-3-open">]</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-4-open">]</span> <span class="token keyword keyword-unsigned">unsigned</span> <span class="token keyword keyword-int">int</span> u <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-7-close">{</span> s <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-7-open">}</span><span class="token punctuation">;</span> <span class="token comment">// compile error: list initialization disallows narrowing conversion</span>
    <span class="token function">foo</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-2-close">(</span>s<span class="token punctuation brace-round brace-close brace-level-2" id="pair-2-open">)</span><span class="token punctuation">;</span>                                <span class="token comment">// possible warning: copy initialization allows narrowing conversion</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-8-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In the above example, the initialization of variable <code>u</code> produces a
  compilation error because narrowing conversions are disallowed when doing list
  initialization. The call to <code>foo()</code> performs copy initialization,
  which does allow narrowing conversions, and which may or may not produce a
  warning depending on how aggressive the compiler is in producing sign
  conversion warnings. For example, both GCC and Clang will produce warnings in
  this case when compiler flag <code>-Wsign-conversion</code> is used.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_6_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_6"
        name="aswift_6"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=4087753060&amp;adf=433827794&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751377101&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fstdvector-and-the-unsigned-length-and-subscript-problem%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963070246&amp;bpp=1&amp;bdt=607&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280&amp;nras=3&amp;correlator=4118141215442&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=1828&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093040%2C31093234%2C95353386%2C95362655%2C95365225%2C95365234%2C95365460%2C95365699%2C42533294%2C95359265%2C95365117%2C95365798%2C31092547&amp;oid=2&amp;pvsid=5587556714693799&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=7&amp;uci=a!7&amp;btvi=1&amp;fsb=1&amp;dtd=19"
        data-google-container-id="a!7"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CNShoYPrrI4DFW5OwgUdUWknsA"
      ></iframe></div
  ></ins>
</div>
<p>
  However, if the value to be sign converted is constexpr and can be converted
  to an equivalent value in the opposing type, the sign conversion is
  <em>not</em> considered to be narrowing. This is because the compiler can
  guarantee that the conversion is safe, or halt the compilation process.
</p>
<div class="code-block code-block-4" style="margin: 8px 0; clear: both"></div>

<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-void">void</span> <span class="token function">foo</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-9-close">(</span><span class="token keyword keyword-unsigned">unsigned</span> <span class="token keyword keyword-int">int</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-9-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-14-close">{</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-14-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-10-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-10-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-17-close">{</span>
    <span class="token keyword keyword-constexpr">constexpr</span> <span class="token keyword keyword-int">int</span> s <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-15-close">{</span> <span class="token number">5</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-15-open">}</span><span class="token punctuation">;</span>                 <span class="token comment">// now constexpr</span>
    <span class="token punctuation brace-square brace-open brace-level-2" id="pair-13-close">[</span><span class="token punctuation brace-square brace-open brace-level-3" id="pair-12-close">[</span>maybe_unused<span class="token punctuation brace-square brace-close brace-level-3" id="pair-12-open">]</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-13-open">]</span> <span class="token keyword keyword-unsigned">unsigned</span> <span class="token keyword keyword-int">int</span> u <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-16-close">{</span> s <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-16-open">}</span><span class="token punctuation">;</span> <span class="token comment">// ok: s is constexpr and can be converted safely, not a narrowing conversion</span>
    <span class="token function">foo</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-11-close">(</span>s<span class="token punctuation brace-round brace-close brace-level-2" id="pair-11-open">)</span><span class="token punctuation">;</span>                                <span class="token comment">// ok: s is constexpr and can be converted safely, not a narrowing conversion</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-17-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In this case, since <code>s</code> is constexpr and the value to be converted
  (<code>5</code>) can be represented as an unsigned value, the conversion is
  not considered to be narrowing and can be performed implicitly without issue.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_7_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_7"
        name="aswift_7"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=4087753060&amp;adf=3816976137&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751377101&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fstdvector-and-the-unsigned-length-and-subscript-problem%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963070246&amp;bpp=1&amp;bdt=607&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280&amp;nras=4&amp;correlator=4118141215442&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=2490&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093040%2C31093234%2C95353386%2C95362655%2C95365225%2C95365234%2C95365460%2C95365699%2C42533294%2C95359265%2C95365117%2C95365798%2C31092547&amp;oid=2&amp;pvsid=5587556714693799&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=8&amp;uci=a!8&amp;btvi=2&amp;fsb=1&amp;dtd=20"
        data-google-container-id="a!8"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-google-query-id="COWqoYPrrI4DFexOwgUdTNwczQ"
        data-load-complete="true"
      ></iframe></div
  ></ins>
</div>
<p>
  This non-narrowing constexpr conversion (from <code>constexpr int</code> to
  <code>constexpr std::size_t</code>) will be something we make use of a lot.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  <a name="size_type"></a>The length and indices of
  <code>std::vector</code> have type <code>size_type</code>
  <a href="#size_type"><i class="fa fa-link" style="font-size: 0.8em"></i></a>
</p>
<p>
  In lesson
  <a href="https://www.learncpp.com/cpp-tutorial/typedefs-and-type-aliases/"
    >10.7 -- Typedefs and type aliases</a
  >, we mentioned that typedefs and type aliases are often used in cases where
  we need a name for a type that may vary (e.g. because it is
  implementation-defined). For example <code>std::size_t</code> is a typedef for
  some large unsigned integral type, usually <code>unsigned long</code> or
  <code>unsigned long long</code>.
</p>
<p>
  Each of the standard library container classes defines a nested typedef member
  named <code>size_type</code> (sometimes written as <code>T::size_type</code>),
  which is an alias for the type used for the length (and indices, if supported)
  of the container.
</p>
<div class="code-block code-block-5" style="margin: 8px 0; clear: both"></div>

<p>
  You’ll typically see <code>size_type</code> appear in documentation and in
  compiler warnings/error messages. For example, this
  <a href="https://en.cppreference.com/w/cpp/container/vector/size"
    >documentation for the <code>size()</code> member function</a
  >
  of <code>std::vector</code> indicates that <code>size()</code> returns a value
  of <code>size_type</code>.
</p>
<div class="cpp-note cpp-lightgraybackground" style="height: auto !important">
  <p class="cpp-note-title cpp-bottomline">Related content</p>
  <div
    class="google-auto-placed ap_container"
    style="width: 100%; height: auto; clear: both; text-align: center"
  >
    <ins
      data-ad-format="auto"
      class="adsbygoogle adsbygoogle-noablate"
      data-ad-client="ca-pub-0588844875925051"
      data-adsbygoogle-status="done"
      style="
        display: block;
        margin: auto;
        background-color: transparent;
        height: 0px;
      "
      data-ad-status="unfilled"
      ><div
        id="aswift_8_host"
        style="
          border: none;
          height: 0px;
          width: 995px;
          margin: 0px;
          padding: 0px;
          position: relative;
          visibility: visible;
          background-color: transparent;
          display: inline-block;
          overflow: hidden;
          opacity: 0;
        "
      >
        <iframe
          id="aswift_8"
          name="aswift_8"
          browsingtopics="true"
          style="
            left: 0px;
            position: absolute;
            top: 0px;
            border: 0px;
            width: 995px;
            height: 0px;
            min-height: auto;
            max-height: none;
            min-width: auto;
            max-width: none;
          "
          sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
          width="995"
          height="0"
          frameborder="0"
          marginwidth="0"
          marginheight="0"
          vspace="0"
          hspace="0"
          allowtransparency="true"
          scrolling="no"
          allow="attribution-reporting; run-ad-auction"
          src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=338338457&amp;adf=314652175&amp;w=995&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751377101&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=995x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fstdvector-and-the-unsigned-length-and-subscript-problem%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=994&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963070246&amp;bpp=1&amp;bdt=607&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280&amp;nras=5&amp;correlator=4118141215442&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=43&amp;ady=3094&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093040%2C31093234%2C95353386%2C95362655%2C95365225%2C95365234%2C95365460%2C95365699%2C42533294%2C95359265%2C95365117%2C95365798%2C31092547&amp;oid=2&amp;pvsid=5587556714693799&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=9&amp;uci=a!9&amp;btvi=3&amp;fsb=1&amp;dtd=21"
          data-google-container-id="a!9"
          tabindex="0"
          title="Advertisement"
          aria-label="Advertisement"
          data-load-complete="true"
          data-google-query-id="CI-2oYPrrI4DFdlFwgUd3Ws2dA"
        ></iframe></div
    ></ins>
  </div>
  <p>
    We cover nested typedefs in lesson
    <a href="https://www.learncpp.com/cpp-tutorial/nested-types-member-types/"
      >15.3 -- Nested types (member types)</a
    >.
  </p>
</div>
<p>
  <code>size_type</code> is almost always an alias for <code>std::size_t</code>,
  but can be overridden (in rare cases) to use a different type.
</p>
<div class="cpp-note cpp-lightbluebackground">
  <p class="cpp-note-title cpp-bottomline">Key insight</p>
  <p>
    <code>size_type</code> is a nested typedef defined in standard library
    container classes, used as the type for the length (and indices, if
    supported) of the container class.
  </p>
  <p>
    <code>size_type</code> defaults to <code>std::size_t</code>, and since this
    is almost never changed, we can reasonably assume <code>size_type</code> is
    an alias for <code>std::size_t</code>.
  </p>
</div>
<div class="cpp-note cpp-lightgraybackground" style="height: auto !important">
  <p class="cpp-note-title cpp-bottomline">For advanced readers</p>
  <div
    class="google-auto-placed ap_container"
    style="width: 100%; height: auto; clear: both; text-align: center"
  >
    <ins
      data-ad-format="auto"
      class="adsbygoogle adsbygoogle-noablate"
      data-ad-client="ca-pub-0588844875925051"
      data-adsbygoogle-status="done"
      style="
        display: block;
        margin: auto;
        background-color: transparent;
        height: 0px;
      "
      data-ad-status="unfilled"
      ><div
        id="aswift_9_host"
        style="
          border: none;
          height: 0px;
          width: 995px;
          margin: 0px;
          padding: 0px;
          position: relative;
          visibility: visible;
          background-color: transparent;
          display: inline-block;
          overflow: hidden;
          opacity: 0;
        "
      >
        <iframe
          id="aswift_9"
          name="aswift_9"
          browsingtopics="true"
          style="
            left: 0px;
            position: absolute;
            top: 0px;
            border: 0px;
            width: 995px;
            height: 0px;
            min-height: auto;
            max-height: none;
            min-width: auto;
            max-width: none;
          "
          sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
          width="995"
          height="0"
          frameborder="0"
          marginwidth="0"
          marginheight="0"
          vspace="0"
          hspace="0"
          allowtransparency="true"
          scrolling="no"
          allow="attribution-reporting; run-ad-auction"
          src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=338338457&amp;adf=218164394&amp;w=995&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751377101&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=995x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fstdvector-and-the-unsigned-length-and-subscript-problem%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=994&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963070246&amp;bpp=1&amp;bdt=607&amp;idt=1&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280%2C995x280&amp;nras=6&amp;correlator=4118141215442&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=43&amp;ady=3638&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093040%2C31093234%2C95353386%2C95362655%2C95365225%2C95365234%2C95365460%2C95365699%2C42533294%2C95359265%2C95365117%2C95365798%2C31092547&amp;oid=2&amp;pvsid=5587556714693799&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=10&amp;uci=a!a&amp;btvi=4&amp;fsb=1&amp;dtd=22"
          data-google-container-id="a!a"
          tabindex="0"
          title="Advertisement"
          aria-label="Advertisement"
          data-load-complete="true"
          data-google-query-id="CKCJooPrrI4DFa1FwgUd14gpaQ"
        ></iframe></div
    ></ins>
  </div>
  <p>
    All of the standard library containers except <code>std::array</code> use
    <a href="https://en.cppreference.com/w/cpp/memory/allocator"
      ><code>std::allocator</code></a
    >
    to allocate memory. For these containers, <code>T::size_type</code> is
    derived from the <code>size_type</code> of the allocator used. Since
    <code>std::allocator</code> can allocate up to
    <code>std::size_t</code> bytes of memory,
    <code>std::allocator&lt;T&gt;::size_type</code> is defined as
    <code>std::size_t</code>. Therefore, <code>T::size_type</code> defaults to
    <code>std::size_t</code>.
  </p>
  <p>
    Only in cases where a custom allocator whose <code>T::size_type</code> is
    defined as something other than <code>std::size_t</code> will a container’s
    <code>T::size_type</code> be something other than <code>std::size_t</code>.
    This is rare and something done on a per-application basis, so it’s
    generally safe to assume <code>T::size_type</code> will be
    <code>std::size_t</code> unless your application is using such a custom
    allocator (and you will know if that is the case).
  </p>
</div>
<p>
  When accessing the <code>size_type</code> member of a container class, we must
  scope qualify it with the fully templated name of the container class. For
  example, <code>std::vector&lt;int&gt;::size_type</code>.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_10_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_10"
        name="aswift_10"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=4087753060&amp;adf=1891384818&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751377101&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fstdvector-and-the-unsigned-length-and-subscript-problem%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963070249&amp;bpp=1&amp;bdt=610&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280%2C995x280%2C995x280&amp;nras=7&amp;correlator=4118141215442&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3869&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093040%2C31093234%2C95353386%2C95362655%2C95365225%2C95365234%2C95365460%2C95365699%2C42533294%2C95359265%2C95365117%2C95365798%2C31092547&amp;oid=2&amp;pvsid=5587556714693799&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=11&amp;uci=a!b&amp;btvi=5&amp;fsb=1&amp;dtd=178"
        data-google-container-id="a!b"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="COuTq4PrrI4DFbNWwgUdFU44Zg"
      ></iframe></div
  ></ins>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Getting the length of a <code>std::vector</code> using the
  <code>size()</code> member function or <code>std::size()</code>
</p>
<p>
  We can ask a container class object for its length using the
  <code>size()</code> member function (which returns the length as unsigned
  <code>size_type</code>):
</p>
<div class="code-block code-block-6" style="margin: 8px 0; clear: both"></div>

<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-18-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-18-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-21-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector prime <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-20-close">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-20-open">}</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"length: "</span> <span class="token operator">&lt;&lt;</span> prime<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-19-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-19-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span> <span class="token comment">// returns length as type `size_type` (alias for `std::size_t`)</span>
    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-21-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>This prints:</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_11_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_11"
        name="aswift_11"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=4087753060&amp;adf=2179074580&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751377101&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fstdvector-and-the-unsigned-length-and-subscript-problem%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963070251&amp;bpp=1&amp;bdt=612&amp;idt=1&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280%2C995x280%2C995x280%2C1027x280&amp;nras=8&amp;correlator=4118141215442&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3898&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093040%2C31093234%2C95353386%2C95362655%2C95365225%2C95365234%2C95365460%2C95365699%2C42533294%2C95359265%2C95365117%2C95365798%2C31092547&amp;oid=2&amp;pvsid=5587556714693799&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=12&amp;uci=a!c&amp;btvi=6&amp;fsb=1&amp;dtd=208"
        data-google-container-id="a!c"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CKWFrYPrrI4DFXVFwgUdCgoD_g"
      ></iframe></div
  ></ins>
</div>
<pre>
length: 5
</pre>
<p>
  Unlike <code>std::string</code> and <code>std::string_view</code>, which have
  both a <code>length()</code> and a <code>size()</code> member function (that
  do the same thing), <code>std::vector</code> (and most other container types
  in C++) only has <code>size()</code>. And now you understand why the length of
  a container is sometimes ambiguously called its size.
</p>
<p>
  In C++17, we can also use the <code>std::size()</code> non-member function
  (which for container classes just calls the <code>size()</code> member
  function).
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-22-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-22-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-25-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector prime <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-24-close">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-24-open">}</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"length: "</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-23-close">(</span>prime<span class="token punctuation brace-round brace-close brace-level-2" id="pair-23-open">)</span><span class="token punctuation">;</span> <span class="token comment">// C++17, returns length as type `size_type` (alias for `std::size_t`)</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-25-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div class="cpp-note cpp-lightgraybackground" style="height: auto !important">
  <p class="cpp-note-title cpp-bottomline">For advanced readers</p>
  <div
    class="google-auto-placed ap_container"
    style="width: 100%; height: auto; clear: both; text-align: center"
  >
    <ins
      data-ad-format="auto"
      class="adsbygoogle adsbygoogle-noablate"
      data-ad-client="ca-pub-0588844875925051"
      data-adsbygoogle-status="done"
      style="
        display: block;
        margin: auto;
        background-color: transparent;
        height: 0px;
      "
      data-ad-status="unfilled"
      ><div
        id="aswift_12_host"
        style="
          border: none;
          height: 0px;
          width: 995px;
          margin: 0px;
          padding: 0px;
          position: relative;
          visibility: visible;
          background-color: transparent;
          display: inline-block;
          overflow: hidden;
          opacity: 0;
        "
      >
        <iframe
          id="aswift_12"
          name="aswift_12"
          browsingtopics="true"
          style="
            left: 0px;
            position: absolute;
            top: 0px;
            border: 0px;
            width: 995px;
            height: 0px;
            min-height: auto;
            max-height: none;
            min-width: auto;
            max-width: none;
          "
          sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
          width="995"
          height="0"
          frameborder="0"
          marginwidth="0"
          marginheight="0"
          vspace="0"
          hspace="0"
          allowtransparency="true"
          scrolling="no"
          allow="attribution-reporting; run-ad-auction"
          src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=338338457&amp;adf=311874733&amp;w=995&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751377101&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=995x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Fstdvector-and-the-unsigned-length-and-subscript-problem%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=994&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963070254&amp;bpp=1&amp;bdt=615&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751962911%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751962911%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280%2C995x280%2C995x280%2C1027x280%2C1027x280&amp;nras=9&amp;correlator=4118141215442&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=43&amp;ady=4027&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093040%2C31093234%2C95353386%2C95362655%2C95365225%2C95365234%2C95365460%2C95365699%2C42533294%2C95359265%2C95365117%2C95365798%2C31092547&amp;oid=2&amp;pvsid=5587556714693799&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=13&amp;uci=a!d&amp;btvi=7&amp;fsb=1&amp;dtd=355"
          data-google-container-id="a!d"
          tabindex="0"
          title="Advertisement"
          aria-label="Advertisement"
          data-load-complete="true"
          data-google-query-id="CLmTtoPrrI4DFZ5HwgUdyNgZHg"
        ></iframe></div
    ></ins>
  </div>
  <p>
    Because <code>std::size()</code> can also be used on non-decayed C-style
    arrays, this method is sometimes favored over the using the
    <code>size()</code> member function (particularly when writing function
    templates that can accept either a container class or non-decayed C-style
    array argument).
  </p>
  <p>
    We discuss C-style array decay in lesson
    <a href="https://www.learncpp.com/cpp-tutorial/c-style-array-decay/"
      >17.8 -- C-style array decay</a
    >.
  </p>
</div>
<p>
  If we want to use either of the above methods to store the length in a
  variable with a signed type, this will likely result in a signed/unsigned
  conversion warning or error. The simplest thing to do here is static_cast the
  result to the desired type:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-26-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-26-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-31-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector prime <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-29-close">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-29-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> length <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-30-close">{</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-28-close">(</span>prime<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-27-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-27-open">)</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-28-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-30-open">}</span><span class="token punctuation">;</span> <span class="token comment">// static_cast return value to int</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"length: "</span> <span class="token operator">&lt;&lt;</span> length <span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-31-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Getting the length of a <code>std::vector</code> using
  <code>std::ssize()</code>
  <span class="cpp-section-pill cpp-section-standard">C++20</span>
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_13_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<div class="code-block code-block-7" style="margin: 8px 0; clear: both"></div>

<p>
  C++20 introduces the <code>std::ssize()</code> non-member function, which
  returns the length as a large <em>signed</em> integral type (usually
  <code>std::ptrdiff_t</code>, which is the type normally used as the signed
  counterpart to <code>std::size_t</code>):
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-32-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-32-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-35-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector prime<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-34-close">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-34-open">}</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"length: "</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span><span class="token function">ssize</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-33-close">(</span>prime<span class="token punctuation brace-round brace-close brace-level-2" id="pair-33-open">)</span><span class="token punctuation">;</span> <span class="token comment">// C++20, returns length as a large signed integral type</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-35-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  This is the only function of the three which returns the length as a signed
  type.
</p>
<p>
  If you want to use this method to store the length in a variable with a signed
  type, you have a couple of options.
</p>
<p>
  First, because the <code>int</code> type may be smaller than the signed type
  returned by <code>std::ssize()</code>, if you are going to assign the length
  to an <code>int</code> variable, you should static_cast the result to
  <code>int</code> to make any such conversion explicit (otherwise you might get
  a narrowing conversion warning or error):
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-36-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-36-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-41-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector prime<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-39-close">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-39-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> length <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-40-close">{</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-38-close">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">ssize</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-37-close">(</span>prime<span class="token punctuation brace-round brace-close brace-level-4" id="pair-37-open">)</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-38-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-40-open">}</span><span class="token punctuation">;</span> <span class="token comment">// static_cast return value to int</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"length: "</span> <span class="token operator">&lt;&lt;</span> length<span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-41-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Alternatively, you can use <code>auto</code> to have the compiler deduce the
  correct signed type to use for the variable:
</p>
<div class="code-block code-block-8" style="margin: 8px 0; clear: both"></div>

<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-42-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-42-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-46-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector prime<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-44-close">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-44-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-auto">auto</span> length <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-45-close">{</span> std<span class="token double-colon punctuation">::</span><span class="token function">ssize</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-43-close">(</span>prime<span class="token punctuation brace-round brace-close brace-level-3" id="pair-43-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-45-open">}</span><span class="token punctuation">;</span> <span class="token comment">// use auto to deduce signed type, as returned by std::ssize()</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"length: "</span> <span class="token operator">&lt;&lt;</span> length<span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-46-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Accessing array elements using <code>operator[]</code> does no bounds checking
</p>
<p>
  In the prior lesson, we introduced the subscript operator
  (<code>operator[]</code>):
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-47-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-47-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-51-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector prime<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-50-close">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-50-open">}</span><span class="token punctuation">;</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> prime<span class="token punctuation brace-square brace-open brace-level-2" id="pair-48-close">[</span><span class="token number">3</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-48-open">]</span><span class="token punctuation">;</span>  <span class="token comment">// print the value of element with index 3 (7)</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> prime<span class="token punctuation brace-square brace-open brace-level-2" id="pair-49-close">[</span><span class="token number">9</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-49-open">]</span><span class="token punctuation">;</span> <span class="token comment">// invalid index (undefined behavior)</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-51-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  <code>operator[]</code> does not do bounds checking. The index for operator[]
  can be non-const. We’ll discuss this further in a later section.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Accessing array elements using the <code>at()</code> member function does
  runtime bounds checking
</p>
<p>
  The array container classes support another method for accessing an array. The
  <code>at()</code> member function can be used to do array access with runtime
  bounds checking:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-52-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-52-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-56-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector prime<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-55-close">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-55-open">}</span><span class="token punctuation">;</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> prime<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-53-close">(</span><span class="token number">3</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-53-open">)</span><span class="token punctuation">;</span> <span class="token comment">// print the value of element with index 3</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> prime<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-54-close">(</span><span class="token number">9</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-54-open">)</span><span class="token punctuation">;</span> <span class="token comment">// invalid index (throws exception)</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-56-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In the above example, the call to <code>prime.at(3)</code> checks to ensure
  the index 3 is valid, and because it is, it returns a reference to array
  element 3. We can then print this value. However, the call to
  <code>prime.at(9)</code> fails (at runtime) because 9 is not a valid index for
  this array. Instead of returning a reference, the <code>at()</code> function
  generates an error that terminates the program.
</p>
<div class="cpp-note cpp-lightgraybackground">
  <p class="cpp-note-title cpp-bottomline">For advanced readers</p>
  <p>
    When the <code>at()</code> member function encounters an out-of-bounds
    index, it actually throws an exception of type
    <code>std::out_of_range</code>. If the exception is not handled, the program
    will be terminated. We cover exceptions and how to handle them in
    <a href="https://www.learncpp.com#Chapter27">chapter 27</a>.
  </p>
</div>
<p>
  Just like <code>operator[]</code>, the index passed to <code>at()</code> can
  be non-const.
</p>
<p>
  Because it does runtime bounds checking on every call, <code>at()</code> is
  slower (but safer) than <code>operator[]</code>. Despite being less safe,
  <code>operator[]</code> is typically used over <code>at()</code>, primarily
  because it’s better to do bounds checking prior to indexing, so we don’t try
  to use an invalid index in the first place.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  Indexing <code>std::vector</code> with a constexpr signed int
</p>
<p>
  When indexing a <code>std::vector</code> with a constexpr (signed) int, we can
  let the compiler implicitly convert this to a <code>std::size_t</code> without
  it being a narrowing conversion:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-57-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-57-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-62-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector prime<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-60-close">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-60-open">}</span><span class="token punctuation">;</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> prime<span class="token punctuation brace-square brace-open brace-level-2" id="pair-58-close">[</span><span class="token number">3</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-58-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>     <span class="token comment">// okay: 3 converted from int to std::size_t, not a narrowing conversion</span>

    <span class="token keyword keyword-constexpr">constexpr</span> <span class="token keyword keyword-int">int</span> index <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-61-close">{</span> <span class="token number">3</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-61-open">}</span><span class="token punctuation">;</span>         <span class="token comment">// constexpr</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> prime<span class="token punctuation brace-square brace-open brace-level-2" id="pair-59-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-2" id="pair-59-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span> <span class="token comment">// okay: constexpr index implicitly converted to std::size_t, not a narrowing conversion</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-62-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Indexing <code>std::vector</code> with a non-constexpr value
</p>
<p>The subscripts used to index an array can be non-const:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-63-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-63-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-67-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector prime<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-65-close">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-65-open">}</span><span class="token punctuation">;</span>

    std<span class="token double-colon punctuation">::</span>size_t index <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-66-close">{</span> <span class="token number">3</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-66-open">}</span><span class="token punctuation">;</span>           <span class="token comment">// non-constexpr</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> prime<span class="token punctuation brace-square brace-open brace-level-2" id="pair-64-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-2" id="pair-64-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span> <span class="token comment">// operator[] expects an index of type std::size_t, no conversion required</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-67-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  However, as per our best practices (<a
    href="https://www.learncpp.com/cpp-tutorial/unsigned-integers-and-why-to-avoid-them/"
    >4.5 -- Unsigned integers, and why to avoid them</a
  >), we generally want to avoid using unsigned types to hold quantities.
</p>
<p>When our subscript is a non-constexpr signed value, we run into problems:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-68-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-68-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-72-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector prime<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-70-close">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-70-open">}</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-int">int</span> index <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-71-close">{</span> <span class="token number">3</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-71-open">}</span><span class="token punctuation">;</span>                   <span class="token comment">// non-constexpr</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> prime<span class="token punctuation brace-square brace-open brace-level-2" id="pair-69-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-2" id="pair-69-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span> <span class="token comment">// possible warning: index implicitly converted to std::size_t, narrowing conversion</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-72-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In this example, <code>index</code> is a non-constexpr signed int. The
  subscript of <code>operator[]</code> defined as part of
  <code>std::vector</code> has type <code>size_type</code> (an alias for
  <code>std::size_t</code>). Therefore, when we call <code>prime[index]</code>,
  our signed int must be converted to <code>std::size_t</code>.
</p>
<p>
  Such a conversion should not be dangerous (because the index of a
  <code>std::vector</code> is expected to be non-negative, and a non-negative
  signed value will safely convert to an unsigned value). But when performed at
  runtime, this is considered to be a narrowing conversion, and your compiler
  should produce a warning about this being an unsafe conversion (if it doesn’t,
  you should consider modifying your warnings so that it does).
</p>
<p>
  Because array subscripting is common, and each such conversion will generate a
  warning, this can easily clutter up your compilation log with spurious
  warnings. Or, if you have “treat warning as errors” enabled, it will halt your
  compilation.
</p>
<p>
  There are many possible ways to avoid this issue (e.g.
  <code>static_cast</code> your <code>int</code> to a
  <code>std::size_t</code> every time you index an array), but all inevitably
  end up cluttering or complicating your code in some way. The simplest thing to
  do in this case is use a variable of type std::size_t as your index, and do
  not use this variable for anything but indexing. That way you’ll avoid any
  non-constexpr conversions in the first place.
</p>
<div class="cpp-note cpp-lightbluebackground">
  <p class="cpp-note-title cpp-bottomline">Tip</p>
  <p>
    Another good alternative is instead of indexing the
    <code>std::vector</code> itself, index the result of the
    <code>data()</code> member function:
  </p>
  <div class="code-toolbar">
    <pre
      class="line-numbers language-cpp"
      tabindex="0"
    ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-73-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-73-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-78-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector prime<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-76-close">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-76-open">}</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-int">int</span> index <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-77-close">{</span> <span class="token number">3</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-77-open">}</span><span class="token punctuation">;</span>                          <span class="token comment">// non-constexpr signed value</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> prime<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-74-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-74-open">)</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-75-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-2" id="pair-75-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span> <span class="token comment">// okay: no sign conversion warnings</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-78-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
    <div class="toolbar">
      <div class="toolbar-item">
        <button
          class="copy-to-clipboard-button"
          type="button"
          data-copy-state="copy"
        >
          <span>Copy</span>
        </button>
      </div>
    </div>
  </div>
  <p>
    Under the hood, <code>std::vector</code> holds its elements in a C-style
    array. The <code>data()</code> member function returns a pointer to this
    underlying C-style array, which we can then index. Since C-style arrays
    allow indexing with both signed and unsigned types, we don’t run into any
    sign conversion issues. We discuss C-style arrays further in lessons
    <a
      href="https://www.learncpp.com/cpp-tutorial/introduction-to-c-style-arrays/"
      >17.7 -- Introduction to C-style arrays</a
    >
    and
    <a href="https://www.learncpp.com/cpp-tutorial/c-style-array-decay/"
      >17.8 -- C-style array decay</a
    >.
  </p>
</div>
<div class="cpp-note cpp-lightgraybackground">
  <p class="cpp-note-title cpp-bottomline">Author’s note</p>
  <p>
    We’ll discuss additional options to address such indexing challenges in
    lesson
    <a
      href="https://www.learncpp.com/cpp-tutorial/arrays-loops-and-sign-challenge-solutions/"
      >16.7 -- Arrays, loops, and sign challenge solutions</a
    >.
  </p>
</div>
<p></p>
<p class="cpp-section cpp-topline" style="clear: both">Quiz time</p>
<p class="cpp-quiz-question" style="clear: both">Question #1</p>
<p></p>
<p>
  Initialize a <code>std::vector</code> with the following values: ‘h’, ‘e’,
  ‘l’, ‘l’, ‘o’. Then print the length of the array (use
  <code>std::size()</code>). Finally, print the value of the element with index
  1 using the subscript operator and the <code>at()</code> member function.
</p>
<p>The program should output the following:</p>
<pre>
The array has 5 elements.
ee
</pre>
<p>
  <a
    class="solution_link_show"
    href="javascript:void(0)"
    onclick="cppSolutionToggle(document.getElementById('cpp_solution_id_0'), this, 'Show Solution', 'Hide Solution')"
    >Show Solution</a
  >
</p>
<div class="wpsolution" id="cpp_solution_id_0" style="display: none">
  <div class="code-toolbar">
    <pre
      class="line-numbers language-cpp"
      tabindex="0"
    ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-79-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-79-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-84-close">{</span>
    std<span class="token double-colon punctuation">::</span>vector arr <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-83-close">{</span> <span class="token string">'h'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">,</span> <span class="token string">'l'</span><span class="token punctuation">,</span> <span class="token string">'l'</span><span class="token punctuation">,</span> <span class="token string">'o'</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-83-open">}</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"The array has "</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-80-close">(</span>arr<span class="token punctuation brace-round brace-close brace-level-2" id="pair-80-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" elements.\n"</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> arr<span class="token punctuation brace-square brace-open brace-level-2" id="pair-82-close">[</span><span class="token number">1</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-82-open">]</span> <span class="token operator">&lt;&lt;</span> arr<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-81-close">(</span><span class="token number">1</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-81-open">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-84-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
    <div class="toolbar">
      <div class="toolbar-item">
        <button
          class="copy-to-clipboard-button"
          type="button"
          data-copy-state="copy"
        >
          <span>Copy</span>
        </button>
      </div>
    </div>
  </div>
</div>
<p class="cpp-quiz-question cpp-topline" style="clear: both">Question #2</p>
<p>a) What is <code>size_type</code> and what is it used for?</p>
<p>
  <a
    class="solution_link_show"
    href="javascript:void(0)"
    onclick="cppSolutionToggle(document.getElementById('cpp_solution_id_1'), this, 'Show Solution', 'Hide Solution')"
    >Show Solution</a
  >
</p>
<div class="wpsolution" id="cpp_solution_id_1" style="display: none">
  <p>
    <code>size_type</code> is a nested typedef that is an alias for the type
    used to store the length (and indices, if supported) of a standard library
    container.
  </p>
</div>
<p>
  b) What type does <code>size_type</code> default to? Is it signed or unsigned?
</p>
<p>
  <a
    class="solution_link_show"
    href="javascript:void(0)"
    onclick="cppSolutionToggle(document.getElementById('cpp_solution_id_2'), this, 'Show Solution', 'Hide Solution')"
    >Show Solution</a
  >
</p>
<div class="wpsolution" id="cpp_solution_id_2" style="display: none">
  <p><code>std::size_t</code>, which is an unsigned type.</p>
</div>
<p>
  c) Which functions to get the length of a container return
  <code>size_type</code>?
</p>
<p>
  <a
    class="solution_link_show"
    href="javascript:void(0)"
    onclick="cppSolutionToggle(document.getElementById('cpp_solution_id_3'), this, 'Show Solution', 'Hide Solution')"
    >Show Solution</a
  >
</p>
<div class="wpsolution" id="cpp_solution_id_3" style="display: none">
  <p>
    The <code>size()</code> member function and <code>std::size</code> both
    return <code>size_type</code>.
  </p>
</div>
<div class="prevnext">
  <div class="prevnext-inline">
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/passing-stdvector/"
    >
      <div class="nav-button nav-button-next">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-right" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Next lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">16.4</span>Passing
            std::vector
          </div>
        </div>
      </div></a
    >
    <a class="nav-link" href="/">
      <div class="nav-button nav-button-index">
        <div class="nav-button-icon">
          <i class="fa fa-home" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Back to table of contents</div>
        </div>
      </div></a
    >
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/introduction-to-stdvector-and-list-constructors/"
    >
      <div class="nav-button nav-button-prev">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-left" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Previous lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">16.2</span>Introduction to
            std::vector and list constructors
          </div>
        </div>
      </div></a
    >
  </div>
</div>
<div class="code-block code-block-10" style="margin: 8px 0; clear: both"></div>
