<div
  class="code-block code-block-1"
  style="margin: 8px 8px 8px 0; float: left"
></div>
<p>
  When working with arrays, we typically use the subscript operator ([]) to
  index specific elements of an array:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp">myArray<span class="token punctuation brace-square brace-open brace-level-1" id="pair-0-close">[</span><span class="token number">0</span><span class="token punctuation brace-square brace-close brace-level-1" id="pair-0-open">]</span> <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">// put the value 7 in the first element of the array</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  However, consider the following <code>IntList</code> class, which has a member
  variable that is an array:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-class">class</span> <span class="token class-name">IntList</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-4-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-2-close">[</span><span class="token number">10</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-2-open">]</span><span class="token punctuation brace-curly brace-open brace-level-2" id="pair-3-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-3-open">}</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-4-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-1-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-1-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-6-close">{</span>
    IntList list<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-5-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-5-open">}</span><span class="token punctuation">;</span>
    <span class="token comment">// how do we access elements from m_list?</span>
    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-6-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Because the m_list member variable is private, we can not access it directly
  from variable list. This means we have no way to directly get or set values in
  the m_list array. So how do we get or put elements into our list?
</p>
<p>
  Without operator overloading, the typical method would be to create access
  functions:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-class">class</span> <span class="token class-name">IntList</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-15-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-9-close">[</span><span class="token number">10</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-9-open">]</span><span class="token punctuation brace-curly brace-open brace-level-2" id="pair-12-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-12-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setItem</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-7-close">(</span><span class="token keyword keyword-int">int</span> index<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> value<span class="token punctuation brace-round brace-close brace-level-2" id="pair-7-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-13-close">{</span> m_list<span class="token punctuation brace-square brace-open brace-level-3" id="pair-10-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-3" id="pair-10-open">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-13-open">}</span>
    <span class="token keyword keyword-int">int</span> <span class="token function">getItem</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-8-close">(</span><span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-8-open">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-14-close">{</span> <span class="token keyword keyword-return">return</span> m_list<span class="token punctuation brace-square brace-open brace-level-3" id="pair-11-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-3" id="pair-11-open">]</span><span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-14-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-15-open">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_5_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_5"
        name="aswift_5"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=342200406&amp;adf=4290759237&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751717297&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Foverloading-the-subscript-operator%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963334992&amp;bpp=1&amp;bdt=738&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963214%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963214%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963214%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600&amp;nras=2&amp;correlator=3855336466586&amp;rume=1&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=1117&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C95353386%2C95362655%2C95365225%2C95365235%2C42533294%2C95359266%2C95365115%2C95365798%2C31061691%2C31061692&amp;oid=2&amp;pvsid=1138208994334839&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=6&amp;uci=a!6&amp;btvi=1&amp;fsb=1&amp;dtd=18"
        data-google-container-id="a!6"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CIjnv4HsrI4DFSJVDwIdO4szHg"
      ></iframe></div
  ></ins>
</div>
<p>
  While this works, it’s not particularly user friendly. Consider the following
  example:
</p>
<div class="code-block code-block-2" style="margin: 8px 0; clear: both"></div>

<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-16-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-16-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-19-close">{</span>
    IntList list<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-18-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-18-open">}</span><span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-17-close">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-17-open">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-19-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Are we setting element 2 to the value 3, or element 3 to the value 2? Without
  seeing the definition of <code>setItem()</code>, it’s simply not clear.
</p>
<p>
  You could also just return the entire list and use operator[] to access the
  element:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-class">class</span> <span class="token class-name">IntList</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-24-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-21-close">[</span><span class="token number">10</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-21-open">]</span><span class="token punctuation brace-curly brace-open brace-level-2" id="pair-22-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-22-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span><span class="token operator">*</span> <span class="token function">getList</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-20-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-20-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-23-close">{</span> <span class="token keyword keyword-return">return</span> m_list<span class="token punctuation">;</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-23-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-24-open">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_6_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_6"
        name="aswift_6"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=342200406&amp;adf=2298610359&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751717297&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Foverloading-the-subscript-operator%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963334992&amp;bpp=1&amp;bdt=737&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963214%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963214%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963214%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280&amp;nras=3&amp;correlator=3855336466586&amp;rume=1&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=1834&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C95353386%2C95362655%2C95365225%2C95365235%2C42533294%2C95359266%2C95365115%2C95365798%2C31061691%2C31061692&amp;oid=2&amp;pvsid=1138208994334839&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=7&amp;uci=a!7&amp;btvi=2&amp;fsb=1&amp;dtd=19"
        data-google-container-id="a!7"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CNLtv4HsrI4DFcFUDwIdFcEk2A"
      ></iframe></div
  ></ins>
</div>
<p>While this also works, it’s syntactically odd:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-25-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-25-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-29-close">{</span>
    IntList list<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-28-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-28-open">}</span><span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-26-close">(</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-26-open">)</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-27-close">[</span><span class="token number">2</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-27-open">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-29-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Overloading operator[]
</p>
<p>
  However, a better solution in this case is to overload the subscript operator
  ([]) to allow access to the elements of m_list. The subscript operator is one
  of the operators that must be overloaded as a member function. An overloaded
  operator[] function will always take one parameter: the subscript that the
  user places between the hard braces. In our IntList case, we expect the user
  to pass in an integer index, and we’ll return an integer value back as a
  result.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_7_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_7"
        name="aswift_7"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=342200406&amp;adf=1665384755&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751717297&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Foverloading-the-subscript-operator%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963334992&amp;bpp=1&amp;bdt=737&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963214%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963214%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963214%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280&amp;nras=4&amp;correlator=3855336466586&amp;rume=1&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=2430&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C95353386%2C95362655%2C95365225%2C95365235%2C42533294%2C95359266%2C95365115%2C95365798%2C31061691%2C31061692&amp;oid=2&amp;pvsid=1138208994334839&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=8&amp;uci=a!8&amp;btvi=3&amp;fsb=1&amp;dtd=19"
        data-google-container-id="a!8"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CJfyv4HsrI4DFfpeDwIdz6g7dQ"
      ></iframe></div
  ></ins>
</div>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">IntList</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-39-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-32-close">[</span><span class="token number">10</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-32-open">]</span><span class="token punctuation brace-curly brace-open brace-level-2" id="pair-37-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-37-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-33-close">[</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-33-open">]</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-30-close">(</span><span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-30-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-38-close">{</span>
        <span class="token keyword keyword-return">return</span> m_list<span class="token punctuation brace-square brace-open brace-level-3" id="pair-34-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-3" id="pair-34-open">]</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-38-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-39-open">}</span><span class="token punctuation">;</span>

<span class="token comment">/*
// Can also be implemented outside the class definition
int&amp; IntList::operator[] (int index)
{
    return m_list[index];
}
*/</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-31-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-31-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-41-close">{</span>
    IntList list<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-40-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-40-open">}</span><span class="token punctuation">;</span>
    list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-35-close">[</span><span class="token number">2</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-35-open">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// set a value</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-36-close">[</span><span class="token number">2</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-36-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span> <span class="token comment">// get a value</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-41-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_8_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_8"
        name="aswift_8"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=342200406&amp;adf=3513730684&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751717297&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Foverloading-the-subscript-operator%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963334992&amp;bpp=1&amp;bdt=737&amp;idt=-M&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963214%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963214%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963214%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280&amp;nras=5&amp;correlator=3855336466586&amp;rume=1&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3242&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C95353386%2C95362655%2C95365225%2C95365235%2C42533294%2C95359266%2C95365115%2C95365798%2C31061691%2C31061692&amp;oid=2&amp;pvsid=1138208994334839&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=9&amp;uci=a!9&amp;btvi=4&amp;fsb=1&amp;dtd=20"
        data-google-container-id="a!9"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CLT-v4HsrI4DFclqDwIdRMwI0A"
      ></iframe></div
  ></ins>
</div>
<p>
  Now, whenever we use the subscript operator ([]) on an object of our class,
  the compiler will return the corresponding element from the m_list member
  variable! This allows us to both get and set values of m_list directly.
</p>
<div class="code-block code-block-3" style="margin: 8px 0; clear: both"></div>

<p>
  This is both easy syntactically and from a comprehension standpoint. When
  <code>list[2]</code> evaluates, the compiler first checks to see if there’s an
  overloaded operator[] function. If so, it passes the value inside the hard
  braces (in this case, 2) as an argument to the function.
</p>
<p>
  Note that although you can provide a default value for the function parameter,
  actually using operator[] without a subscript inside is not considered a valid
  syntax, so there’s no point.
</p>
<div class="cpp-note cpp-lightbluebackground">
  <p class="cpp-note-title cpp-bottomline">Tip</p>
  <p>C++23 adds support for overloading operator[] with multiple subscripts.</p>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Why operator[] returns a reference
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_9_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_9"
        name="aswift_9"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=342200406&amp;adf=2206855127&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751717297&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Foverloading-the-subscript-operator%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963334992&amp;bpp=1&amp;bdt=738&amp;idt=1&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963214%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963214%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963214%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280%2C1027x280&amp;nras=6&amp;correlator=3855336466586&amp;rume=1&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3834&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C95353386%2C95362655%2C95365225%2C95365235%2C42533294%2C95359266%2C95365115%2C95365798%2C31061691%2C31061692&amp;oid=2&amp;pvsid=1138208994334839&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=10&amp;uci=a!a&amp;btvi=5&amp;fsb=1&amp;dtd=21"
        data-google-container-id="a!a"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CKqUwIHsrI4DFa9bDwId5G8BKA"
      ></iframe></div
  ></ins>
</div>
<p>
  Let’s take a closer look at how <code>list[2] = 3</code> evaluates. Because
  the subscript operator has a higher precedence than the assignment operator,
  <code>list[2]</code> evaluates first. <code>list[2]</code> calls operator[],
  which we’ve defined to return a reference to <code>list.m_list[2]</code>.
  Because operator[] is returning a reference, it returns the actual
  <code>list.m_list[2]</code> array element. Our partially evaluated expression
  becomes <code>list.m_list[2] = 3</code>, which is a straightforward integer
  assignment.
</p>
<p>
  In lesson
  <a
    href="https://www.learncpp.com/cpp-tutorial/value-categories-lvalues-and-rvalues/"
    >12.2 -- Value categories (lvalues and rvalues)</a
  >, you learned that any value on the left hand side of an assignment statement
  must be an l-value (which is a variable that has an actual memory address).
  Because the result of operator[] can be used on the left hand side of an
  assignment (e.g. <code>list[2] = 3</code>), the return value of operator[]
  must be an l-value. As it turns out, references are always l-values, because
  you can only take a reference of variables that have memory addresses. So by
  returning a reference, the compiler is satisfied that we are returning an
  l-value.
</p>
<div class="code-block code-block-4" style="margin: 8px 0; clear: both"></div>

<p>
  Consider what would happen if operator[] returned an integer by value instead
  of by reference. <code>list[2]</code> would call operator[], which would
  return the <em>value of</em> list.m_list[2]. For example, if m_list[2] had the
  value of 6, operator[] would return the value 6.
  <code>list[2] = 3</code> would partially evaluate to <code>6 = 3</code>, which
  makes no sense! If you try to do this, the C++ compiler will complain:
</p>
<pre>
C:VCProjectsTest.cpp(386) : error C2106: '=' : left operand must be l-value
</pre>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_10_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_10"
        name="aswift_10"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=342200406&amp;adf=1088877557&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751717297&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Foverloading-the-subscript-operator%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963334995&amp;bpp=1&amp;bdt=740&amp;idt=0&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963214%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963214%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963214%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280%2C1027x280%2C1027x280&amp;nras=7&amp;correlator=3855336466586&amp;rume=1&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=3314&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C95353386%2C95362655%2C95365225%2C95365235%2C42533294%2C95359266%2C95365115%2C95365798%2C31061691%2C31061692&amp;oid=2&amp;pvsid=1138208994334839&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=11&amp;uci=a!b&amp;btvi=6&amp;fsb=1&amp;dtd=326"
        data-google-container-id="a!b"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CPzk0oHsrI4DFWFgDwIdR1IZKA"
      ></iframe></div
  ></ins>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Overloaded operator[] for const objects
</p>
<p>
  In the above IntList example, operator[] is non-const, and we can use it as an
  l-value to change the state of non-const objects. However, what if our IntList
  object was const? In this case, we wouldn’t be able to call the non-const
  version of operator[] because that would allow us to potentially change the
  state of a const object.
</p>
<p>
  The good news is that we can define a non-const and a const version of
  operator[] separately. The non-const version will be used with non-const
  objects, and the const version with const-objects.
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">IntList</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-56-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-45-close">[</span><span class="token number">10</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-45-open">]</span><span class="token punctuation brace-curly brace-open brace-level-2" id="pair-53-close">{</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-53-open">}</span><span class="token punctuation">;</span> <span class="token comment">// give this class some initial state for this example</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token comment">// For non-const objects: can be used for assignment</span>
    <span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-46-close">[</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-46-open">]</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-42-close">(</span><span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-42-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-54-close">{</span>
        <span class="token keyword keyword-return">return</span> m_list<span class="token punctuation brace-square brace-open brace-level-3" id="pair-47-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-3" id="pair-47-open">]</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-54-open">}</span>

    <span class="token comment">// For const objects: can only be used for access</span>
    <span class="token comment">// This function could also return by value if the type is cheap to copy</span>
    <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-48-close">[</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-48-open">]</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-43-close">(</span><span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-43-open">)</span> <span class="token keyword keyword-const">const</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-55-close">{</span>
        <span class="token keyword keyword-return">return</span> m_list<span class="token punctuation brace-square brace-open brace-level-3" id="pair-49-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-3" id="pair-49-open">]</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-55-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-56-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-44-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-44-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-59-close">{</span>
    IntList list<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-57-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-57-open">}</span><span class="token punctuation">;</span>
    list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-50-close">[</span><span class="token number">2</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-50-open">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// okay: calls non-const version of operator[]</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-51-close">[</span><span class="token number">2</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-51-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-const">const</span> IntList clist<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-58-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-58-open">}</span><span class="token punctuation">;</span>
    <span class="token comment">// clist[2] = 3; // compile error: clist[2] returns const reference, which we can't assign to</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> clist<span class="token punctuation brace-square brace-open brace-level-2" id="pair-52-close">[</span><span class="token number">2</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-52-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-59-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 0px;
    "
    data-ad-status="unfilled"
    ><div
      id="aswift_11_host"
      style="
        border: none;
        height: 0px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
        overflow: hidden;
        opacity: 0;
      "
    >
      <iframe
        id="aswift_11"
        name="aswift_11"
        browsingtopics="true"
        style="
          left: 0px;
          position: absolute;
          top: 0px;
          border: 0px;
          width: 1027px;
          height: 0px;
          min-height: auto;
          max-height: none;
          min-width: auto;
          max-width: none;
        "
        sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"
        width="1027"
        height="0"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        vspace="0"
        hspace="0"
        allowtransparency="true"
        scrolling="no"
        allow="attribution-reporting; run-ad-auction"
        src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-0588844875925051&amp;output=html&amp;h=280&amp;adk=342200406&amp;adf=2759906740&amp;w=1027&amp;abgtt=11&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1751717297&amp;num_ads=1&amp;rafmt=1&amp;armr=3&amp;sem=mc&amp;pwprc=4633386603&amp;ad_type=text_image&amp;format=1027x280&amp;url=https%3A%2F%2Fwww.learncpp.com%2Fcpp-tutorial%2Foverloading-the-subscript-operator%2F&amp;fwr=0&amp;pra=3&amp;rh=200&amp;rw=1026&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;fa=27&amp;uach=WyJXaW5kb3dzIiwiMTkuMC4wIiwieDg2IiwiIiwiMTM3LjAuNzE1MS4xMjIiLG51bGwsMCxudWxsLCI2NCIsW1siR29vZ2xlIENocm9tZSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJDaHJvbWl1bSIsIjEzNy4wLjcxNTEuMTIyIl0sWyJOb3QvQSlCcmFuZCIsIjI0LjAuMC4wIl1dLDBd&amp;dt=1751963334997&amp;bpp=1&amp;bdt=743&amp;idt=1&amp;shv=r20250702&amp;mjsv=m202507020101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D05f6e82287d810b4%3AT%3D1751962604%3ART%3D1751963214%3AS%3DALNI_MaQYA0TSAU2k8xwY5tqlN0xFCcd6g&amp;gpic=UID%3D00001157d9e27d0a%3AT%3D1751962604%3ART%3D1751963214%3AS%3DALNI_MYgtHzQJAQQXY_151HTGSSfVxE8_A&amp;eo_id_str=ID%3D52c21936d98c6d2b%3AT%3D1751962604%3ART%3D1751963214%3AS%3DAA-AfjZsJ15yjdEPJ8d11hPojsJQ&amp;prev_fmts=0x0%2C336x280%2C160x600%2C160x600%2C1027x280%2C1027x280%2C1027x280%2C1027x280%2C1027x280%2C1027x280&amp;nras=8&amp;correlator=3855336466586&amp;rume=1&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=2&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=27&amp;ady=4062&amp;biw=1080&amp;bih=1024&amp;scr_x=0&amp;scr_y=0&amp;eid=31093232%2C95353386%2C95362655%2C95365225%2C95365235%2C42533294%2C95359266%2C95365115%2C95365798%2C31061691%2C31061692&amp;oid=2&amp;pvsid=1138208994334839&amp;tmod=1708485235&amp;uas=0&amp;nvt=1&amp;fc=1408&amp;brdim=10%2C10%2C10%2C10%2C800%2C0%2C780%2C580%2C1080%2C1024&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=128&amp;bc=31&amp;bz=0.72&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=12&amp;uci=a!c&amp;btvi=7&amp;fsb=1&amp;dtd=394"
        data-google-container-id="a!c"
        tabindex="0"
        title="Advertisement"
        aria-label="Advertisement"
        data-load-complete="true"
        data-google-query-id="CImZ14HsrI4DFXhZDwIdnUEJzg"
      ></iframe></div
  ></ins>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Removing duplicate code between const and non-const overloads
</p>
<div class="code-block code-block-5" style="margin: 8px 0; clear: both"></div>

<p>
  In the above example, note that the implementations of
  <code>int&amp; IntList::operator[](int)</code> and
  <code>const int&amp; IntList::operator[](int) const</code> are identical. The
  only difference is the return type of the function.
</p>
<p>
  In cases where the implementation is trivial (e.g. a single line), it’s fine
  (and preferred) to have both functions use an identical implementation. The
  small amount of redundancy this introduces isn’t worth removing.
</p>
<p>
  But what if the implementation of these operators was complex, requiring many
  statements? For example, maybe it’s important that we validate that the index
  is actually valid, which requires adding many redundant lines of code to each
  function.
</p>
<p>
  In such a case, the redundancy introduced by having many duplicate statements
  is more problematic, and it would be desirable to have a single implementation
  that we could use for both overloads. But how? Normally we’d simply implement
  one function in terms of the other (e.g. have one function call the other).
  But that’s a bit tricky in this case. The const version of the function can’t
  call the non-const version of the function, because that would require
  discarding the const of a const object. And while the non-const version of the
  function can call the const version of the function, the const version of the
  function returns a const reference, when we need to return a non-const
  reference. Fortunately, there is a way to work around this.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_12_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<p>The preferred solution is as follows:</p>
<div class="code-block code-block-6" style="margin: 8px 0; clear: both"></div>

<ul>
  <li>Implement the logic for the const version of the function.</li>
  <li>
    Have the non-const function call the const function and use
    <code>const_cast</code> to remove the const.
  </li>
</ul>
<p>The resulting solution looks something like this:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;utility&gt;</span> <span class="token comment">// for std::as_const</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">IntList</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-76-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-65-close">[</span><span class="token number">10</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-65-open">]</span><span class="token punctuation brace-curly brace-open brace-level-2" id="pair-73-close">{</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-73-open">}</span><span class="token punctuation">;</span> <span class="token comment">// give this class some initial state for this example</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-66-close">[</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-66-open">]</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-60-close">(</span><span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-60-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-74-close">{</span>
        <span class="token comment">// use std::as_const to get a const version of `this` (as a reference)</span>
        <span class="token comment">// so we can call the const version of operator[]</span>
        <span class="token comment">// then const_cast to discard the const on the returned reference</span>
        <span class="token keyword keyword-return">return</span> <span class="token generic-function"><span class="token function">const_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span><span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-62-close">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">as_const</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-61-close">(</span><span class="token operator">*</span><span class="token keyword keyword-this">this</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-61-open">)</span><span class="token punctuation brace-square brace-open brace-level-4" id="pair-67-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-4" id="pair-67-open">]</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-62-open">)</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-74-open">}</span>

    <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-68-close">[</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-68-open">]</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-63-close">(</span><span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-63-open">)</span> <span class="token keyword keyword-const">const</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-75-close">{</span>
        <span class="token keyword keyword-return">return</span> m_list<span class="token punctuation brace-square brace-open brace-level-3" id="pair-69-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-3" id="pair-69-open">]</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-75-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-76-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-64-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-64-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-79-close">{</span>
    IntList list<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-77-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-77-open">}</span><span class="token punctuation">;</span>
    list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-70-close">[</span><span class="token number">2</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-70-open">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// okay: calls non-const version of operator[]</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-71-close">[</span><span class="token number">2</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-71-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-const">const</span> IntList clist<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-78-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-78-open">}</span><span class="token punctuation">;</span>
    <span class="token comment">// clist[2] = 3; // compile error: clist[2] returns const reference, which we can't assign to</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> clist<span class="token punctuation brace-square brace-open brace-level-2" id="pair-72-close">[</span><span class="token number">2</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-72-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-79-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-0588844875925051"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
    ><div
      id="aswift_13_host"
      style="
        border: none;
        height: 280px;
        width: 1027px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div
  ></ins>
</div>
<p>
  Normally using <code>const_cast</code> to remove const is something we want to
  avoid, but in this case it’s acceptable. If the non-const overload was called,
  then we know we’re working with a non-const object. It’s okay to remove the
  const on a const reference to a non-const object.
</p>
<div class="cpp-note cpp-lightgraybackground">
  <p class="cpp-note-title cpp-bottomline">For advanced readers</p>
  <p>
    In C++23, we can do even better by making use of several features we don’t
    yet cover in this tutorial series:
  </p>
  <div class="code-toolbar">
    <pre
      class="line-numbers language-cpp"
      tabindex="0"
    ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">IntList</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-90-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-82-close">[</span><span class="token number">10</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-82-open">]</span><span class="token punctuation brace-curly brace-open brace-level-2" id="pair-88-close">{</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-88-open">}</span><span class="token punctuation">;</span> <span class="token comment">// give this class some initial state for this example</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token comment">// Use an explicit object parameter (self) and auto&amp;&amp; to differentiate const vs non-const</span>
    <span class="token keyword keyword-auto">auto</span><span class="token operator">&amp;&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-83-close">[</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-83-open">]</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-80-close">(</span><span class="token keyword keyword-this">this</span> <span class="token keyword keyword-auto">auto</span><span class="token operator">&amp;&amp;</span> self<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-80-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-89-close">{</span>
        <span class="token comment">// Complex code goes here</span>
        <span class="token keyword keyword-return">return</span> self<span class="token punctuation">.</span>m_list<span class="token punctuation brace-square brace-open brace-level-3" id="pair-84-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-3" id="pair-84-open">]</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-89-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-90-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-81-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-81-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-93-close">{</span>
    IntList list<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-91-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-91-open">}</span><span class="token punctuation">;</span>
    list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-85-close">[</span><span class="token number">2</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-85-open">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// okay: calls non-const version of operator[]</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-86-close">[</span><span class="token number">2</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-86-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-const">const</span> IntList clist<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-92-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-92-open">}</span><span class="token punctuation">;</span>
    <span class="token comment">// clist[2] = 3; // compile error: clist[2] returns const reference, which we can't assign to</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> clist<span class="token punctuation brace-square brace-open brace-level-2" id="pair-87-close">[</span><span class="token number">2</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-87-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-93-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
    <div class="toolbar">
      <div class="toolbar-item">
        <button
          class="copy-to-clipboard-button"
          type="button"
          data-copy-state="copy"
        >
          <span>Copy</span>
        </button>
      </div>
    </div>
  </div>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Detecting index validity
</p>
<p>
  One other advantage of overloading the subscript operator is that we can make
  it safer than accessing arrays directly. Normally, when accessing arrays, the
  subscript operator does not check whether the index is valid. For example, the
  compiler will not complain about the following code:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-int">int</span> list<span class="token punctuation brace-square brace-open brace-level-1" id="pair-94-close">[</span><span class="token number">5</span><span class="token punctuation brace-square brace-close brace-level-1" id="pair-94-open">]</span><span class="token punctuation brace-curly brace-open brace-level-1" id="pair-96-close">{</span><span class="token punctuation brace-curly brace-close brace-level-1" id="pair-96-open">}</span><span class="token punctuation">;</span>
list<span class="token punctuation brace-square brace-open brace-level-1" id="pair-95-close">[</span><span class="token number">7</span><span class="token punctuation brace-square brace-close brace-level-1" id="pair-95-open">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// index 7 is out of bounds!</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  However, if we know the size of our array, we can make our overloaded
  subscript operator check to ensure the index is within bounds:
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cassert&gt;</span> <span class="token comment">// for assert()</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iterator&gt;</span> <span class="token comment">// for std::size()</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">IntList</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-106-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-101-close">[</span><span class="token number">10</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-101-open">]</span><span class="token punctuation brace-curly brace-open brace-level-2" id="pair-104-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-104-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-102-close">[</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-102-open">]</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-97-close">(</span><span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-97-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-105-close">{</span>
        <span class="token function">assert</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-100-close">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>size_t<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-98-close">(</span>index<span class="token punctuation brace-round brace-close brace-level-4" id="pair-98-open">)</span> <span class="token operator">&lt;</span> std<span class="token double-colon punctuation">::</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-99-close">(</span>m_list<span class="token punctuation brace-round brace-close brace-level-4" id="pair-99-open">)</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-100-open">)</span><span class="token punctuation">;</span>

        <span class="token keyword keyword-return">return</span> m_list<span class="token punctuation brace-square brace-open brace-level-3" id="pair-103-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-3" id="pair-103-open">]</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-105-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-106-open">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  In the above example, we have used the assert() function (included in the
  cassert header) to make sure our index is valid. If the expression inside the
  assert evaluates to false (which means the user passed in an invalid index),
  the program will terminate with an error message, which is much better than
  the alternative (corrupting memory). This is probably the most common method
  of doing error checking of this sort.
</p>
<div class="code-block code-block-7" style="margin: 8px 0; clear: both"></div>

<p>
  If you don’t want to use an assert (which will be compiled out of a non-debug
  build) you can instead use an if-statement and your favorite error handling
  method (e.g. throw an exception, call <code>std::exit</code>, etc…):
</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iterator&gt;</span> <span class="token comment">// for std::size()</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">IntList</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-117-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-111-close">[</span><span class="token number">10</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-111-open">]</span><span class="token punctuation brace-curly brace-open brace-level-2" id="pair-114-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-114-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-112-close">[</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-112-open">]</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-107-close">(</span><span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-107-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-116-close">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-3">(</span><span class="token operator">!</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-110-close">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>size_t<span class="token operator">&gt;</span></span></span><span class="token punctuation brace-round brace-open brace-level-5" id="pair-108-close">(</span>index<span class="token punctuation brace-round brace-close brace-level-5" id="pair-108-open">)</span> <span class="token operator">&lt;</span> std<span class="token double-colon punctuation">::</span><span class="token function">size</span><span class="token punctuation brace-round brace-open brace-level-5" id="pair-109-close">(</span>m_list<span class="token punctuation brace-round brace-close brace-level-5" id="pair-109-open">)</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-110-open">)</span>
        <span class="token punctuation brace-curly brace-open brace-level-4" id="pair-115-close">{</span>
            <span class="token comment">// handle invalid index here</span>
        <span class="token punctuation brace-curly brace-close brace-level-4" id="pair-115-open">}</span>

        <span class="token keyword keyword-return">return</span> m_list<span class="token punctuation brace-square brace-open brace-level-4" id="pair-113-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-4" id="pair-113-open">]</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-116-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-117-open">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p class="cpp-section cpp-topline" style="clear: both">
  Pointers to objects and overloaded operator[] don’t mix
</p>
<p>
  If you try to call operator[] on a pointer to an object, C++ will assume
  you’re trying to index an array of objects of that type.
</p>
<p>Consider the following example:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cassert&gt;</span> <span class="token comment">// for assert()</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iterator&gt;</span> <span class="token comment">// for std::size()</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">IntList</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-126-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> m_list<span class="token punctuation brace-square brace-open brace-level-2" id="pair-120-close">[</span><span class="token number">10</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-120-open">]</span><span class="token punctuation brace-curly brace-open brace-level-2" id="pair-124-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-124-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span><span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-121-close">[</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-121-open">]</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-118-close">(</span><span class="token keyword keyword-int">int</span> index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-118-open">)</span>
    <span class="token punctuation brace-curly brace-open brace-level-2" id="pair-125-close">{</span>
        <span class="token keyword keyword-return">return</span> m_list<span class="token punctuation brace-square brace-open brace-level-3" id="pair-122-close">[</span>index<span class="token punctuation brace-square brace-close brace-level-3" id="pair-122-open">]</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-125-open">}</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-126-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-119-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-119-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-129-close">{</span>
    IntList<span class="token operator">*</span> list<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-128-close">{</span> <span class="token keyword keyword-new">new</span> IntList<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-127-close">{</span><span class="token punctuation brace-curly brace-close brace-level-3" id="pair-127-open">}</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-128-open">}</span><span class="token punctuation">;</span>
    list <span class="token punctuation brace-square brace-open brace-level-2" id="pair-123-close">[</span><span class="token number">2</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-123-open">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// error: this will assume we're accessing index 2 of an array of IntLists</span>
    <span class="token keyword keyword-delete">delete</span> list<span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-129-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  Because we can’t assign an integer to an IntList, this won’t compile. However,
  if assigning an integer was valid, this would compile and run, with undefined
  results.
</p>
<div class="cpp-note cpp-lightpurplebackground">
  <p class="cpp-note-title cpp-bottomline">Rule</p>
  <p>
    Make sure you’re not trying to call an overloaded operator[] on a pointer to
    an object.
  </p>
</div>
<p>
  The proper syntax would be to dereference the pointer first (making sure to
  use parenthesis since operator[] has higher precedence than operator*), then
  call operator[]:
</p>
<div class="code-block code-block-8" style="margin: 8px 0; clear: both"></div>

<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-130-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-130-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-135-close">{</span>
    IntList<span class="token operator">*</span> list<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-134-close">{</span> <span class="token keyword keyword-new">new</span> IntList<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-133-close">{</span><span class="token punctuation brace-curly brace-close brace-level-3" id="pair-133-open">}</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-134-open">}</span><span class="token punctuation">;</span>
    <span class="token punctuation brace-round brace-open brace-level-2" id="pair-131-close">(</span><span class="token operator">*</span>list<span class="token punctuation brace-round brace-close brace-level-2" id="pair-131-open">)</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-132-close">[</span><span class="token number">2</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-132-open">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// get our IntList object, then call overloaded operator[]</span>
    <span class="token keyword keyword-delete">delete</span> list<span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-135-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  This is ugly and error prone. Better yet, don’t set pointers to your objects
  if you don’t have to.
</p>
<p class="cpp-section cpp-topline" style="clear: both">
  The function parameter does not need to be an integral type
</p>
<p>
  As mentioned above, C++ passes what the user types between the hard braces as
  an argument to the overloaded function. In most cases, this will be an
  integral value. However, this is not required -- and in fact, you can define
  that your overloaded operator[] take a value of any type you desire. You could
  define your overloaded operator[] to take a double, a std::string, or whatever
  else you like.
</p>
<p>As a ridiculous example, just so you can see that it works:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string_view&gt;</span> <span class="token comment">// C++17</span></span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Stupid</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-142-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
	<span class="token keyword keyword-void">void</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-139-close">[</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-139-open">]</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-136-close">(</span>std<span class="token double-colon punctuation">::</span>string_view index<span class="token punctuation brace-round brace-close brace-level-2" id="pair-136-open">)</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-142-open">}</span><span class="token punctuation">;</span>

<span class="token comment">// It doesn't make sense to overload operator[] to print something</span>
<span class="token comment">// but it is the easiest way to show that the function parameter can be a non-integer</span>
<span class="token keyword keyword-void">void</span> Stupid<span class="token double-colon punctuation">::</span><span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-1" id="pair-140-close">[</span><span class="token punctuation brace-square brace-close brace-level-1" id="pair-140-open">]</span> <span class="token punctuation brace-round brace-open brace-level-1" id="pair-137-close">(</span>std<span class="token double-colon punctuation">::</span>string_view index<span class="token punctuation brace-round brace-close brace-level-1" id="pair-137-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-143-close">{</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> index<span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-143-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-138-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-138-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-145-close">{</span>
	Stupid stupid<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-144-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-144-open">}</span><span class="token punctuation">;</span>
	stupid<span class="token punctuation brace-square brace-open brace-level-2" id="pair-141-close">[</span><span class="token string">"Hello, world!"</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-141-open">]</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-145-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>As you would expect, this prints:</p>
<pre>
Hello, world!
</pre>
<p>
  Overloading operator[] to take a std::string parameter can be useful when
  writing certain kinds of classes, such as those that use words as indices.
</p>
<p class="cpp-section cpp-topline" style="clear: both">Quiz time</p>
<p class="cpp-quiz-question" style="clear: both">Question #1</p>
<p>
  A map is a class that stores elements as a key-value pair. The key must be
  unique, and is used to access the associated pair. In this quiz, we’re going
  to write an application that lets us assign grades to students by name, using
  a simple map class. The student’s name will be the key, and the grade (as a
  char) will be the value.
</p>
<p>
  a) First, write a struct named <code>StudentGrade</code> that contains the
  student’s name (as a <code>std::string</code>) and grade (as a
  <code>char</code>).
</p>
<p>
  <a
    class="solution_link_show"
    href="javascript:void(0)"
    onclick="cppSolutionToggle(document.getElementById('cpp_solution_id_0'), this, 'Show Solution', 'Hide Solution')"
    >Show Solution</a
  >
</p>
<div class="wpsolution" id="cpp_solution_id_0" style="display: none">
  <div class="code-toolbar">
    <pre
      class="line-numbers language-cpp"
      tabindex="0"
    ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>

<span class="token keyword keyword-struct">struct</span> <span class="token class-name">StudentGrade</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-148-close">{</span>
    std<span class="token double-colon punctuation">::</span>string name<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-146-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-146-open">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-char">char</span> grade<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-147-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-147-open">}</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-148-open">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
    <div class="toolbar">
      <div class="toolbar-item">
        <button
          class="copy-to-clipboard-button"
          type="button"
          data-copy-state="copy"
        >
          <span>Copy</span>
        </button>
      </div>
    </div>
  </div>
</div>
<p>
  b) Add a class named <code>GradeMap</code> that contains a
  <code>std::vector</code> of <code>StudentGrade</code> named
  <code>m_map</code>.
</p>
<p>
  <a
    class="solution_link_show"
    href="javascript:void(0)"
    onclick="cppSolutionToggle(document.getElementById('cpp_solution_id_1'), this, 'Show Solution', 'Hide Solution')"
    >Show Solution</a
  >
</p>
<div class="wpsolution" id="cpp_solution_id_1" style="display: none">
  <div class="code-toolbar">
    <pre
      class="line-numbers language-cpp"
      tabindex="0"
    ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-struct">struct</span> <span class="token class-name">StudentGrade</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-151-close">{</span>
	std<span class="token double-colon punctuation">::</span>string name<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-149-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-149-open">}</span><span class="token punctuation">;</span>
	<span class="token keyword keyword-char">char</span> grade<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-150-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-150-open">}</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-151-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">GradeMap</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-153-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
	std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>StudentGrade<span class="token operator">&gt;</span> m_map<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-152-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-152-open">}</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-153-open">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
    <div class="toolbar">
      <div class="toolbar-item">
        <button
          class="copy-to-clipboard-button"
          type="button"
          data-copy-state="copy"
        >
          <span>Copy</span>
        </button>
      </div>
    </div>
  </div>
</div>
<p>
  c) Write an overloaded <code>operator[]</code> for this class. This function
  should take a <code>std::string</code> parameter, and return a reference to a
  char. In the body of the function, first see if the student’s name already
  exists (You can use <code>std::find_if</code> from &lt;algorithm&gt;). If the
  student exists, return a reference to the grade and you’re done. Otherwise,
  use the <code>std::vector::emplace_back()</code> or
  <code>std::vector::push_back()</code> function to add a
  <code>StudentGrade</code> for this new student. When you do this,
  <code>std::vector</code> will add a copy of your <code>StudentGrade</code> to
  itself (resizing if needed, invalidating all previously returned references).
  Finally, we need to return a reference to the grade for the student we just
  added to the <code>std::vector</code>. We can access the student we just added
  using the <code>std::vector::back()</code> function.
</p>
<p>The following program should run:</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token comment">// ...</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-154-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-154-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-160-close">{</span>
	GradeMap grades<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-159-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-159-open">}</span><span class="token punctuation">;</span>

	grades<span class="token punctuation brace-square brace-open brace-level-2" id="pair-155-close">[</span><span class="token string">"Joe"</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-155-open">]</span> <span class="token operator">=</span> <span class="token string">'A'</span><span class="token punctuation">;</span>
	grades<span class="token punctuation brace-square brace-open brace-level-2" id="pair-156-close">[</span><span class="token string">"Frank"</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-156-open">]</span> <span class="token operator">=</span> <span class="token string">'B'</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Joe has a grade of "</span> <span class="token operator">&lt;&lt;</span> grades<span class="token punctuation brace-square brace-open brace-level-2" id="pair-157-close">[</span><span class="token string">"Joe"</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-157-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Frank has a grade of "</span> <span class="token operator">&lt;&lt;</span> grades<span class="token punctuation brace-square brace-open brace-level-2" id="pair-158-close">[</span><span class="token string">"Frank"</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-158-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-160-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  <a
    class="solution_link_show"
    href="javascript:void(0)"
    onclick="cppSolutionToggle(document.getElementById('cpp_solution_id_2'), this, 'Show Solution', 'Hide Solution')"
    >Show Solution</a
  >
</p>
<div class="wpsolution" id="cpp_solution_id_2" style="display: none">
  <div class="code-toolbar">
    <pre
      class="line-numbers language-cpp"
      tabindex="0"
    ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string_view&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword keyword-struct">struct</span> <span class="token class-name">StudentGrade</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-181-close">{</span>
	std<span class="token double-colon punctuation">::</span>string name<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-179-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-179-open">}</span><span class="token punctuation">;</span>
	<span class="token keyword keyword-char">char</span> grade<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-180-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-180-open">}</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-181-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">GradeMap</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-183-close">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
	std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>StudentGrade<span class="token operator">&gt;</span> m_map<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-182-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-182-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
	<span class="token keyword keyword-char">char</span><span class="token operator">&amp;</span> <span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-2" id="pair-172-close">[</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-172-open">]</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-161-close">(</span>std<span class="token double-colon punctuation">::</span>string_view name<span class="token punctuation brace-round brace-close brace-level-2" id="pair-161-open">)</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-183-open">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-char">char</span><span class="token operator">&amp;</span> GradeMap<span class="token double-colon punctuation">::</span><span class="token keyword keyword-operator">operator</span><span class="token punctuation brace-square brace-open brace-level-1" id="pair-173-close">[</span><span class="token punctuation brace-square brace-close brace-level-1" id="pair-173-open">]</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-162-close">(</span>std<span class="token double-colon punctuation">::</span>string_view name<span class="token punctuation brace-round brace-close brace-level-1" id="pair-162-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-188-close">{</span>
	<span class="token keyword keyword-auto">auto</span> found<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-185-close">{</span> std<span class="token double-colon punctuation">::</span><span class="token function">find_if</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-167-close">(</span>m_map<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-163-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-163-open">)</span><span class="token punctuation">,</span> m_map<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-164-close">(</span><span class="token punctuation brace-round brace-close brace-level-4" id="pair-164-open">)</span><span class="token punctuation">,</span>
				<span class="token punctuation brace-square brace-open brace-level-4" id="pair-174-close">[</span>name<span class="token punctuation brace-square brace-close brace-level-4" id="pair-174-open">]</span><span class="token punctuation brace-round brace-open brace-level-4" id="pair-165-close">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-auto">auto</span><span class="token operator">&amp;</span> student<span class="token punctuation brace-round brace-close brace-level-4" id="pair-165-open">)</span> <span class="token punctuation brace-curly brace-open brace-level-4" id="pair-184-close">{</span> <span class="token comment">// this is a lambda that captures name from the surrounding scope</span>
					<span class="token keyword keyword-return">return</span> <span class="token punctuation brace-round brace-open brace-level-5" id="pair-166-close">(</span>student<span class="token punctuation">.</span>name <span class="token operator">==</span> name<span class="token punctuation brace-round brace-close brace-level-5" id="pair-166-open">)</span><span class="token punctuation">;</span> <span class="token comment">// so we can use name here</span>
				<span class="token punctuation brace-curly brace-close brace-level-4" id="pair-184-open">}</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-167-open">)</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-185-open">}</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-if">if</span> <span class="token punctuation brace-round brace-open brace-level-2" id="pair-169-close">(</span>found <span class="token operator">!=</span> m_map<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation brace-round brace-open brace-level-3" id="pair-168-close">(</span><span class="token punctuation brace-round brace-close brace-level-3" id="pair-168-open">)</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-169-open">)</span>
	<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-186-close">{</span>
		<span class="token keyword keyword-return">return</span> found<span class="token operator">-&gt;</span>grade<span class="token punctuation">;</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-186-open">}</span>

	<span class="token comment">// otherwise create a new StudentGrade for this student and add</span>
	<span class="token comment">// it to the end of our vector.  Then return the grade.</span>

	<span class="token comment">// emplace_back version (C++20 onward)</span>
	<span class="token comment">// StudentGrade is an aggregate and emplace_back only works with aggregates as of C++20</span>
	<span class="token keyword keyword-return">return</span> m_map<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation brace-round brace-open brace-level-2" id="pair-170-close">(</span>std<span class="token double-colon punctuation">::</span>string<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-187-close">{</span>name<span class="token punctuation brace-curly brace-close brace-level-3" id="pair-187-open">}</span><span class="token punctuation brace-round brace-close brace-level-2" id="pair-170-open">)</span><span class="token punctuation">.</span>grade<span class="token punctuation">;</span>

	<span class="token comment">// push_back version (C++17 or older)</span>
	<span class="token comment">// m_map.push_back(StudentGrade{std::string{name}});</span>
	<span class="token comment">// return m_map.back().grade;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-188-open">}</span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-171-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-171-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-190-close">{</span>
	GradeMap grades<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-189-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-189-open">}</span><span class="token punctuation">;</span>

	grades<span class="token punctuation brace-square brace-open brace-level-2" id="pair-175-close">[</span><span class="token string">"Joe"</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-175-open">]</span> <span class="token operator">=</span> <span class="token string">'A'</span><span class="token punctuation">;</span>
	grades<span class="token punctuation brace-square brace-open brace-level-2" id="pair-176-close">[</span><span class="token string">"Frank"</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-176-open">]</span> <span class="token operator">=</span> <span class="token string">'B'</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Joe has a grade of "</span> <span class="token operator">&lt;&lt;</span> grades<span class="token punctuation brace-square brace-open brace-level-2" id="pair-177-close">[</span><span class="token string">"Joe"</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-177-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Frank has a grade of "</span> <span class="token operator">&lt;&lt;</span> grades<span class="token punctuation brace-square brace-open brace-level-2" id="pair-178-close">[</span><span class="token string">"Frank"</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-178-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-190-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
    <div class="toolbar">
      <div class="toolbar-item">
        <button
          class="copy-to-clipboard-button"
          type="button"
          data-copy-state="copy"
        >
          <span>Copy</span>
        </button>
      </div>
    </div>
  </div>
  <div class="cpp-note cpp-lightgraybackground">
    <p class="cpp-note-title cpp-bottomline">A reminder</p>
    <p>
      See
      <a
        href="https://www.learncpp.com/cpp-tutorial/introduction-to-lambdas-anonymous-functions/"
        >20.6 -- Introduction to lambdas (anonymous functions)</a
      >
      for more information on lambdas.
    </p>
  </div>
  <div class="cpp-note cpp-lightbluebackground">
    <p class="cpp-note-title cpp-bottomline">Tip</p>
    <p>
      Since maps are common, the standard library offers
      <a href="https://en.cppreference.com/w/cpp/container/map"
        ><code>std::map</code></a
      >, which is not currently covered on learncpp. Using
      <code>std::map</code>, we can simplify our code to
    </p>
    <div class="code-toolbar">
      <pre
        class="line-numbers language-cpp"
        tabindex="0"
      ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;map&gt;</span> <span class="token comment">// std::map</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-191-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-191-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-199-close">{</span>
	<span class="token comment">// std::map can be initialized</span>
	std<span class="token double-colon punctuation">::</span>map<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token punctuation">,</span> <span class="token keyword keyword-char">char</span><span class="token operator">&gt;</span> grades<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-198-close">{</span>
		<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-196-close">{</span> <span class="token string">"Joe"</span><span class="token punctuation">,</span> <span class="token string">'A'</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-196-open">}</span><span class="token punctuation">,</span>
		<span class="token punctuation brace-curly brace-open brace-level-3" id="pair-197-close">{</span> <span class="token string">"Frank"</span><span class="token punctuation">,</span> <span class="token string">'B'</span> <span class="token punctuation brace-curly brace-close brace-level-3" id="pair-197-open">}</span>
	<span class="token punctuation brace-curly brace-close brace-level-2" id="pair-198-open">}</span><span class="token punctuation">;</span>

	<span class="token comment">// and assigned</span>
	grades<span class="token punctuation brace-square brace-open brace-level-2" id="pair-192-close">[</span><span class="token string">"Susan"</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-192-open">]</span> <span class="token operator">=</span> <span class="token string">'C'</span><span class="token punctuation">;</span>
	grades<span class="token punctuation brace-square brace-open brace-level-2" id="pair-193-close">[</span><span class="token string">"Tom"</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-193-open">]</span> <span class="token operator">=</span> <span class="token string">'D'</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Joe has a grade of "</span> <span class="token operator">&lt;&lt;</span> grades<span class="token punctuation brace-square brace-open brace-level-2" id="pair-194-close">[</span><span class="token string">"Joe"</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-194-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Frank has a grade of "</span> <span class="token operator">&lt;&lt;</span> grades<span class="token punctuation brace-square brace-open brace-level-2" id="pair-195-close">[</span><span class="token string">"Frank"</span><span class="token punctuation brace-square brace-close brace-level-2" id="pair-195-open">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-199-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span><span style="height: 0px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
      <div class="toolbar">
        <div class="toolbar-item">
          <button
            class="copy-to-clipboard-button"
            type="button"
            data-copy-state="copy"
          >
            <span>Copy</span>
          </button>
        </div>
      </div>
    </div>
    <p>
      Prefer using <code>std::map</code> over writing your own implementation.
    </p>
  </div>
</div>
<p class="cpp-quiz-question cpp-topline" style="clear: both">Question #2</p>
<p>
  Extra credit #1: The <code>GradeMap</code> class and sample program we wrote
  is inefficient for many reasons. Describe one way that the
  <code>GradeMap</code> class could be improved.
</p>
<p>
  <a
    class="solution_link_show"
    href="javascript:void(0)"
    onclick="cppSolutionToggle(document.getElementById('cpp_solution_id_3'), this, 'Show Solution', 'Hide Solution')"
    >Show Solution</a
  >
</p>
<div class="wpsolution" id="cpp_solution_id_3" style="display: none">
  <p>
    <code>std::vector</code> is unsorted by nature. This means every time we
    call <code>operator[]</code>, we’re potentially traversing the entire
    <code>std::vector</code> to find our element. With a few elements, this
    isn’t a problem, but as we continue to add names, this will become
    increasingly slow. We could optimize this by keeping our
    <code>m_map</code> sorted and using a binary search, so we minimize the
    number of elements we have to look through to find the ones we’re interested
    in.
  </p>
</div>
<p class="cpp-quiz-question cpp-topline" style="clear: both">Question #3</p>
<p>Extra credit #2: Why does this program potentially not work as expected?</p>
<div class="code-toolbar">
  <pre
    class="line-numbers language-cpp"
    tabindex="0"
  ><code class="match-braces language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation brace-round brace-open brace-level-1" id="pair-200-close">(</span><span class="token punctuation brace-round brace-close brace-level-1" id="pair-200-open">)</span>
<span class="token punctuation brace-curly brace-open brace-level-1" id="pair-206-close">{</span>
	GradeMap grades<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-203-close">{</span><span class="token punctuation brace-curly brace-close brace-level-2" id="pair-203-open">}</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-char">char</span><span class="token operator">&amp;</span> gradeJoe<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-204-close">{</span> grades<span class="token punctuation brace-square brace-open brace-level-3" id="pair-201-close">[</span><span class="token string">"Joe"</span><span class="token punctuation brace-square brace-close brace-level-3" id="pair-201-open">]</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-204-open">}</span><span class="token punctuation">;</span> <span class="token comment">// does an emplace_back</span>
	gradeJoe <span class="token operator">=</span> <span class="token string">'A'</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-char">char</span><span class="token operator">&amp;</span> gradeFrank<span class="token punctuation brace-curly brace-open brace-level-2" id="pair-205-close">{</span> grades<span class="token punctuation brace-square brace-open brace-level-3" id="pair-202-close">[</span><span class="token string">"Frank"</span><span class="token punctuation brace-square brace-close brace-level-3" id="pair-202-open">]</span> <span class="token punctuation brace-curly brace-close brace-level-2" id="pair-205-open">}</span><span class="token punctuation">;</span> <span class="token comment">// does a emplace_back</span>
	gradeFrank <span class="token operator">=</span> <span class="token string">'B'</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Joe has a grade of "</span> <span class="token operator">&lt;&lt;</span> gradeJoe <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Frank has a grade of "</span> <span class="token operator">&lt;&lt;</span> gradeFrank <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation brace-curly brace-close brace-level-1" id="pair-206-open">}</span><span aria-hidden="true" class="line-numbers-rows"><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span><span style="height: 16px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code></pre>
  <div class="toolbar">
    <div class="toolbar-item">
      <button
        class="copy-to-clipboard-button"
        type="button"
        data-copy-state="copy"
      >
        <span>Copy</span>
      </button>
    </div>
  </div>
</div>
<p>
  <a
    class="solution_link_show"
    href="javascript:void(0)"
    onclick="cppSolutionToggle(document.getElementById('cpp_solution_id_4'), this, 'Show Solution', 'Hide Solution')"
    >Show Solution</a
  >
</p>
<div class="wpsolution" id="cpp_solution_id_4" style="display: none">
  <p>
    When Frank is added, the <code>std::vector</code> may need to grow to hold
    it. This requires dynamically allocating a new block of memory, copying the
    elements in the array to that new block, and deleting the old block. When
    this happens, any references to existing elements in the std::vector are
    invalidated (meaning they are left as dangling references to deleted
    memory).
  </p>
  <p>
    In other words, after we <code>emplace_back("Frank")</code>, if the
    std::vector had to grow to make room for Frank, the
    <code>gradeJoe</code> reference would be invalidated. Accessing
    <code>gradeJoe</code> to print Joe’s grade would then lead to undefined
    results.
  </p>
  <p>
    How a std::vector grows is a compiler-specific detail, so we can expect the
    above program to work fine when compiled with some compilers and not others.
  </p>
</div>
<div class="prevnext">
  <div class="prevnext-inline">
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/overloading-the-parenthesis-operator/"
    >
      <div class="nav-button nav-button-next">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-right" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Next lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">21.10</span>Overloading the
            parenthesis operator
          </div>
        </div>
      </div></a
    >
    <a class="nav-link" href="/">
      <div class="nav-button nav-button-index">
        <div class="nav-button-icon">
          <i class="fa fa-home" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Back to table of contents</div>
        </div>
      </div></a
    >
    <a
      class="nav-link"
      href="https://www.learncpp.com/cpp-tutorial/overloading-the-increment-and-decrement-operators/"
    >
      <div class="nav-button nav-button-prev">
        <div class="nav-button-icon">
          <i class="fa fa-chevron-circle-left" aria-hidden="true"></i>
        </div>
        <div class="nav-button-text">
          <div class="nav-button-title">Previous lesson</div>
          <div class="nav-button-lesson">
            <span class="nav-button-lesson-number">21.8</span>Overloading the
            increment and decrement operators
          </div>
        </div>
      </div></a
    >
  </div>
</div>
<div class="code-block code-block-10" style="margin: 8px 0; clear: both"></div>
